<!DOCTYPE html>
<html lang="en" class="scrollbar_self">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <!-- <meta name="viewport" content="width=device-width, initial-scale=1.0"> -->
    <meta name="viewport"
        content="width=device-width, initial-scale=1.0, minimum-scale=0.5, maximum-scale=2.0, user-scalable=yes" />
    <!-- <meta http-equiv="Content-Security-Policy" content="upgrade-insecure-requests" /> -->
    <script src="https://cdn.staticfile.org/jquery/3.2.1/jquery.min.js"></script>
    <script src="https://cdn.staticfile.org/popper.js/1.15.0/umd/popper.min.js"></script>
    <link rel="stylesheet" href="https://cdn.staticfile.org/twitter-bootstrap/3.3.7/css/bootstrap.min.css">
    <script src="https://cdn.staticfile.org/twitter-bootstrap/3.3.7/js/bootstrap.min.js"></script>
    <link rel="stylesheet" type="text/css" href="static/css/jquery.datetimepicker.css" />
    <script src="static/js/jquery.datetimepicker.full.min.js"></script>
    <!-- echart -->
    <script type="text/javascript" src="static/js/echarts.min.js"></script>
    <script type="text/javascript" src="static/js/echarts-gl.min.js"></script>
    <script type="text/javascript" src="static/js/ecStat.min.js"></script>
    <script type="text/javascript" src="static/js/dataTool.min.js"></script>
    <script type="text/javascript" src="static/js/china.js"></script>
    <script type="text/javascript" src="static/js/world.js"></script>

    <!-- 表格 -->
    <!-- <link rel="stylesheet" href="https://unpkg.com/x-data-spreadsheet@1.1.9/dist/xspreadsheet.css">
    <script src="https://unpkg.com/x-data-spreadsheet@1.1.9/dist/xspreadsheet.js"></script>
    <script src="https://unpkg.com/x-data-spreadsheet@1.1.9/dist/locale/zh-cn.js"></script> -->
    <!-- tinymce -->
    <script src="static/editor/tinymce.min.js"></script>
    <script src="static/editor/vendor/FileSaver.js"></script>
    <script src="static/editor/html-docx.js"></script>
    <script src="static/js/pdfobject.js"></script>
    <!-- 颜色选择器 -->
    <script src="static/js/jquery.minicolors.js"></script>
    <link rel="stylesheet" href="static/css/jquery.minicolors.css">
    <style type="text/css">
        .scrollbar_self::-webkit-scrollbar {
            display: none;
        }
    
        /* html {
    
            overflow-x: hidden;
    
            overflow-y: hidden;
    
        } */
    </style>
    <title>决策服务模板平台</title>

</head>

<body>
    <!-- 全局布局 -->
    <div
        style="display: flex;align-content:flex-start;position: absolute; justify-content: center; flex-wrap: wrap; width: 100%;height: 100%;  background-color: rgb(243, 244, 247)">
        <!-- 导航栏 -->
        {% csrf_token %}
        <div style="background-color:rgb(119, 160, 236); width: 100%; height: 5%;">
            <div class="tabbable" id="tabs-01" style="display:block;width: 100%; height: 100%;">
                <ul class="nav nav-tabs" style="border-bottom: 0px;;font-size: 16px;font-weight:900;font-family:'宋体';">
                    <li class="active">
                        <a href="#panel-1" data-toggle="tab">材料制作</a>
                    </li>
                    <li>
                        <a href="#panel-2" data-toggle="tab">工具箱</a>
                    </li>
                    <li>
                        <!-- 另外添加一个说明文档 -->
                        <a href="#panel-3" data-toggle="tab">画图</a>
                    </li>
                    <li>
                        <!-- 另外添加一个说明文档 -->
                        <a href="#panel-5" data-toggle="tab">快捷网址</a>
                    </li>
                    <li style="float: right;">
                        <!-- 另外添加一个说明文档 -->
                        <a href="#panel-4" data-toggle="tab">帮助</a>
                    </li>
                </ul>
            </div>
        </div>
        <div id="index_main" style="background-color:rgb(220, 222, 226); width: 100%; height: 95%;display:flex ">
            <!-- 决策材料类型 -->
            <div style=" width: 50%; height: 100%;">
                <!-- 文件头 -->
                <div style=" width: 100%; height: 100%;">
                    <!-- 材料类型选项卡 -->
                    <div class="tab-content" style="display:block;width: 100%; height: 100%;">
                        <!-- tinymce -->
                        <div class="tab-pane active" id="panel-1" style="width:100%;height:100%;">
                            <div style="display:inline-block;width:100%;height:100%">
                                <div style=" width: 100%; height: 5%;">
                                    <a id="modal-000001" href="#modal-container-000001" role="button" class="btn" data-toggle="modal">新建</a>
                                    <a id="modal-000002" href="#modal-container-000002" role="button" class="btn" data-toggle="modal">打开</a>
                                    <a id="modal-000003" href="#modal-container-000003" role="button" class="btn" data-toggle="modal">删除</a>
                                    <a id="modal-000004" href="#modal-container-000004" role="button" class="btn" data-toggle="modal">配置</a>
                                    <div id="button_type_list" style="display: inline-flex;width:50%;height:80%">
                                        <!-- 用来放置添加列表 -->
                                    </div>
                    
                                    <!-- 新建 -->
                                    <div class="modal fade" id="modal-container-000001" role="dialog" aria-labelledby="myModalLabel"
                                        aria-hidden="true">
                                        <div class="modal-dialog">
                                            <div class="modal-content">
                                                <div class="modal-header">
                                                    <button type="button" class="close" data-dismiss="modal" aria-hidden="true"></button>
                                                    <h4 class="modal-title" id="myModalLabel">
                                                        新建材料:
                                                    </h4>
                                                </div>
                                                <div class="modal-body" style="height: 500px;">
                                                    <div style="display: inline-flex;width:100%;height:100%;">
                                                        <div style="width:15%;height:100%;">
                    
                                                        </div>
                                                        <!-- 新建材料的核心数据 -->
                                                        <div style="width:70%;height:100%;border:1px solid black">
                                                            <div style="width:100%;height:20%;"></div>
                                                            <div style="display:inline-block; ;width:100%;height:15%;">
                                                                &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;材料种类:
                                                                <select id="new_document_type" style="width:60%;height:80%;border:0">
                                                                </select>
                                                            </div>
                                                            <div style="display:inline-block; ;width:100%;height:15%;">
                                                                &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;撰稿人:&nbsp;&nbsp;&nbsp;&nbsp;
                                                                <select id="new_document_writer"
                                                                    style="width:20%;height:80%;border:0"></select>
                                                                &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;签发人:
                                                                <select id="new_document_publisher"
                                                                    style="width:20%;height:80%;border:0"></select>
                                                            </div>
                                                            <div style="display:inline-block; ;width:100%;height:15%;">
                                                                &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;发布单位:
                                                                <select id="new_document_unity"
                                                                    style="width:60%;height:80%;border:0"></select>
                                                            </div>
                                                            <div style="display:inline-block; ;width:100%;height:15%;">
                                                                &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;发布日期:
                                                                <input id="create_doc_date" type="text"
                                                                    style="width:60%;height:80%;border:0;text-align: center;" ;>
                                                            </div>
                                                            <div style="display:inline-block; ;width:100%;height:15%;;">
                                                                &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;模块类型:
                                                                <div
                                                                    style="display:inline-flex;width:60%;height:80%;border:1px solid black">
                                                                    <div style="width:10%;height:100%;border:1px solid black">
                                                                        <div style=";width:100%;height:50%">
                                                                            <select id="png_text_add" autocomplete="off"
                                                                                style="appearance:none;;width:100%;height:100%;background-image: url(static/src/加.png);background-size: 60%;background-repeat: no-repeat;">
                                                                                <option style="display:none;" selected></option>
                                                                                <option value="段落">段落</option>
                                                                                <option value="图表">图表</option>
                                                                                <option value="列表">列表</option>
                                                                                <option value="短期">短期</option>
                                                                                <option value="十天">七天</option>
                                                                                <option value="建议">建议</option>
                                                                            </select>
                    
                                                                        </div>
                                                                        <div style=";width:100%;height:50%">
                                                                            <button id="delete_png_text"
                                                                                style=";width:100%;height:100%;background-image: url(static/src/减.png);background-size: 60%;background-repeat: no-repeat;"></button>
                    
                    
                                                                        </div>
                    
                                                                    </div>
                                                                    <div id="png_add_list"
                                                                        style="display:inline-flex;width:90%;height:100%;border:1px solid black">
                    
                                                                    </div>
                                                                    <script>
                                                                        let png_add_list = []
                                                                        $('#png_text_add').change(function () {
                    
                                                                            var select_div = document.createElement('div');
                                                                            select_div.style = "width:10%;height:100%;background-image: url(static/src/" + $('#png_text_add').val() + ".png);background-size: 60%;background-repeat: no-repeat;"
                                                                            $('#png_add_list').append(select_div)
                                                                            png_add_list.push($('#png_text_add').val())
                                                                            console.log(png_add_list)
                                                                        })
                                                                        $('#delete_png_text').click(function () {
                                                                            $('#png_add_list').children().eq(-1).remove()
                                                                            png_add_list.pop()
                                                                            console.log(png_add_list)
                    
                                                                        })
                    
                    
                                                                    </script>
                                                                </div>
                    
                                                            </div>
                                                            <script>
                                                                $('#create_doc_date').datetimepicker({
                                                                    theme: 'dark',
                                                                    format: 'Y-m-d H:i'
                                                                }
                                                                );
                                                            </script>
                                                        </div>
                                                        <div style="width:15%;height:100%;">
                    
                                                        </div>
                    
                                                    </div>
                    
                                                </div>
                                                <div class="modal-footer">
                                                    <button type="button" class="btn btn-default" data-dismiss="modal">返回</button>
                                                    <button id="new_document_post" type="button" class="btn btn-primary"
                                                        data-dismiss="modal">创建</button>
                                                </div>
                                                <script>
                                                    // 后端数据的传输
                                                    const list_button_object = {
                                                        type_list: ['段落', '图表'],
                                                        type:"一周天气预测",
                                                        data: [],
                                                        item: 47,
                                                        year: 2022,
                                                        unity: "台州市气象局",
                                                        writer:"翁之梅",
                                                        publisher:"冯坚",
                                                        time:"2022年8月12日15时",
                                                        cerate_div_button: function () {
                                                            $('#button_type_list').html("")
                                                            for (var i = 0; i < this.type_list.length; i++) {
                                                                this.data.push(this.render_data_list(i))
                                                                var div_single = document.createElement("div")
                                                                div_single.style = "width: 15%; height: 30px;"
                                                                // div_single.innerText = "\xa0\xa0\xa0\xa0\xa0\xa0"+this.type_list[i]
                                                                var label_singl = document.createElement("label")
                                                                label_singl.setAttribute("for",i.toString() +"checkboxitem")
                                                                label_singl.innerText = "\xa0\xa0\xa0\xa0\xa0\xa0\xa0"+this.type_list[i]
                                                                label_singl.style = "width: 100%; height: 30px;font-size:10px;;background-image: url(static/src/" + this.type_list[i] + ".png);background-size: 30%;background-repeat: no-repeat;"
                                                                var checkboxitem =  document.createElement("input")
                                                                checkboxitem.id = i.toString() +"checkboxitem"
                                                                checkboxitem.value = i
                                                                checkboxitem.setAttribute("name","doc_tyoe_opt")
                                                                checkboxitem.setAttribute("type","radio")
                                                                checkboxitem.style = "display:none;"
                                                                div_single.append(checkboxitem,label_singl)
                                                                div_single.addEventListener("click", function (doc) {  
                                                                    console.log('内容',doc.path[0].id.toString()[0])     
                                                                    // this.style = "width: 15%; height: 30px;border:1px solid black" 
                                                                    var item = Number(doc.path[0].id.toString()[0])
                                                                    var content = list_button_object.data[item]                                                   
                                                                    tinymce.remove('#content');
                                                                    tinymce.init({
                                                                        selector: '#content',
                                                                        language: 'zh_CN',
                                                                        branding: false,
                                                                        skin: 'oxide-dark',
                                                                        promotion: false,
                                                                        plugin_plothtml_width: "300%",
                                                                        menubar: false,
                                                                        plugins: "advlist anchor autolink autosave charmap code codesample emoticons footer fullscreen help image importcss indent2em insertdatetime link lists media nonbreaking pagebreak plothtml preview quickbars save searchreplace table template visualblocks wordcount",
                                                                        toolbar: [
                                                                            "footer bullist numlist indent2em plothtml",
                                                                            "insertfile undo redo bold italic underline hr |alignleft aligncenter alignright formatselect fontselect fontsizeselect removeformat subscript superscript charmap searchreplace insertdatetime forecolor backcolor fontsize fontfamily",//段落
                                                                            "image code link unlink rotateleft rotateright flipv fliph editimage imageoptions quickimage | table | bullist numlist| | footer plothtml"
                                                                        ],
                                                                        font_family_formats: "宋体='宋体';仿宋='仿宋';微软雅黑='微软雅黑';楷体='楷体';;隶书='隶书';幼圆='幼圆';Andale Mono=andale mono,times;Arial=arial,helvetica,sans-serif;Arial Black=arial black,avant garde;Book Antiqua=book antiqua,palatino;Comic Sans MS=comic sans ms,sans-serif;Courier New=courier new,courier;Georgia=georgia,palatino;Helvetica=helvetica;Impact=impact,chicago;Symbol=symbol;Tahoma=tahoma,arial,helvetica,sans-serif;Terminal=terminal,monaco;Times New Roman=times new roman,times;Trebuchet MS=trebuchet ms,geneva;Verdana=verdana,geneva;Webdings=webdings;Wingdings=wingdings",
                                                                        font_size_formats: '12px 14px 16px 18px 20px 24px 26px 28px 30px 32px 34px 36px 38px',
                                                                    });   
                                                                    // tinymce.get('content').setContent("设置内容")  
                                                                    $('#content').val(content)  
                                                                                          
                                                                })
                                                                $('#button_type_list').append(div_single)
                                                            }
                                                            
                                                        },
                                                        render_data_list: function (item) {
                                                           
                                                            var doc_type =this.type_list[item]
                                                            var id_number = item 
                                                            var doc_data_obj = {
                                                                type:doc_type,
                                                                id:id_number,
                                                                content:""
                                                            }
                                                            return doc_data_obj
                                                        },
                                                        render_head_info:function () {
                                                           
                                                           var line1 = '<p style="text-align: center;"><span style="font-size: 36pt; color: rgb(224, 62, 45);">'+this.type+'</span></p>'
                                                           var line2 = '<p style="text-align: center;"><span style="font-size: 12pt; color: rgb(0, 0, 0); font-family: \'times new roman\', times, serif;">第'+this.item.toString()+'期</span></p>'
                                                           var line3 = '<table style=" width: 100%;border:none;"><colgroup><col style="width: 33.3333%;"><col style="width: 33.3333%;"><col style="width: 33.3333%;"></colgroup>'
                                                           var line4 = '<tbody><tr><td style="border-width: 1px;">&nbsp;</td><td style="border-width: 1px;">&nbsp;</td>'
                                                           var line5 = '<td style="border-width: 1px; text-align: right;"><span style="font-family: "times new roman", times, serif;">撰稿人：'+this.writer+'</span></td>'
                                                           var line6 = '</tr><tr>'
                                                           var line7 = '<td style="border-width: 1px;"><span style="font-family: \'times new roman\', times, serif;">'+this.time+'</span></td>'
                                                           var line8 = '<td style="border-width: 1px; text-align: center;">'+this.unity+'</td>'
                                                           var line9 = '<td style="border-width: 1px; text-align: right;">签发人：'+this.publisher+'</td>'
                                                           var line10 = '</tr></tbody></table>'
                                                           var line11 = '<hr style="background-color:  #FF0000;">'
                                                           var headerInfo = line1 + line2 + line3 + line4 + line5 + line6 + line7 + line8 + line9 + line10 + line11                                                           
                                                           return headerInfo
                                                       }
                                                    }
                                                    
                    
                                                    $('#new_document_post').click(function () {
                    
                                                        var csrf = $('input[name="csrfmiddlewaretoken"]').val();
                                                        console.log("向后端传输创建信息", png_add_list)
                                                        var content_doc = ""
                                                        for (var i = 0; i < png_add_list.length; i++) {
                                                            content_doc = content_doc + png_add_list[i] + ","
                    
                                                        }
                    
                                                        // 告诉后端创建一个新的数据，并在前端修改文档标识
                                                        $.ajax({
                                                            url: "create_doc_data",  // 请求的地址
                                                            type: "post",  // 请求方式
                                                            timeout: 250, //设置延迟上限
                                                            data: {
                                                                'csrfmiddlewaretoken': csrf,
                                                                'doc_type': $('#new_document_type').val(),
                                                                'doc_writer': $('#new_document_writer').val(),
                                                                'doc_publisher': $('#new_document_publisher').val(),
                                                                'doc_unity': $('#new_document_unity').val(),
                                                                'doc_date': $('#create_doc_date').val(),
                                                                'doc_list': content_doc
                                                            },
                                                            dataType: "json",
                                                            success: function (data) {
                                                                // 返回以后创建一个对象实例
                                                                // console.log("返回成功", data)
                                                                $('#doc_type').text( data.doc_unity)
                                                                $('#doc_info').text("第" + data.doc_item +"期:  "+data.doc_type)
                                                                list_button_object.year = data.doc_year
                                                                list_button_object.item = data.doc_item
                                                                list_button_object.type = data.doc_type
                                                                list_button_object.type_list = png_add_list
                                                                list_button_object.unity = data.doc_unity
                                                                list_button_object.cerate_div_button()
                                                            }
                                                        })
                    
                                                    })
                                                </script>
                                            </div>
                    
                                        </div>
                    
                                    </div>
                                    <script type="text/javascript">
                                        $('#modal-000001').click(function () {
                                            console.log('新建文档')
                                            png_add_list = []
                                            $('#png_add_list').html("")
                                            var csrf = $('input[name="csrfmiddlewaretoken"]').val();
                                            $.ajax({
                                                url: "create_new_doc",  // 请求的地址
                                                type: "post",  // 请求方式
                                                timeout: 250, //设置延迟上限
                                                data: {
                                                    'csrfmiddlewaretoken': csrf
                                                },
                                                dataType: "json",
                                                success: function (data) {
                                                    // 'data_publisher': data_publisher,
                                                    // 'data_writers': data_writers,
                                                    // 'data_unity': data_unity,
                                                    // 'data_documenttype': data_documenttype
                                                    $('#new_document_publisher').html("")
                                                    $('#new_document_writer').html("")
                                                    $('#new_document_unity').html("")
                                                    $('#new_document_type').html("")
                                                    for (i = 0; i < data.data_publisher.length; i++) {
                                                        var option_publisher = document.createElement('option');
                                                        option_publisher.value = data.data_publisher[i]
                                                        option_publisher.innerText = data.data_publisher[i]
                                                        $('#new_document_publisher').append(option_publisher)
                                                    }
                                                    for (j = 0; j < data.data_writers.length; j++) {
                                                        var option_writers = document.createElement('option');
                                                        option_writers.value = data.data_writers[j]
                                                        option_writers.innerText = data.data_writers[j]
                                                        $('#new_document_writer').append(option_writers)
                                                    }
                                                    for (k = 0; k < data.data_unity.length; k++) {
                                                        var option_unity = document.createElement('option');
                                                        option_unity.value = data.data_unity[k]
                                                        option_unity.innerText = data.data_unity[k]
                                                        option_unity.style.textAlign = 'center'
                                                        $('#new_document_unity').append(option_unity)
                                                    }
                                                    for (m = 0; m < data.data_documenttype.length; m++) {
                                                        var option_documenttype = document.createElement('option');
                                                        option_documenttype.value = data.data_documenttype[m]
                                                        option_documenttype.innerText = data.data_documenttype[m]
                                                        option_documenttype.style.textAlign = 'center'
                                                        $('#new_document_type').append(option_documenttype)
                                                    }
                    
                    
                    
                                                }
                    
                                            })
                                        })
                    
                                        $('#modal-000002').click(function () {
                                            console.log('打开文档')
                                            $('#open_item_list').html('')
                                            var csrf = $('input[name="csrfmiddlewaretoken"]').val();
                                            $.ajax({
                                                url: "open_old_doc",  // 请求的地址
                                                type: "post",  // 请求方式
                                                timeout: 250, //设置延迟上限
                                                data: {
                                                    'csrfmiddlewaretoken': csrf
                                                },
                                                dataType: "json",
                                                success: function (data) {
                                                    // console.log(data.type,data.year,data.unity)
                                                    $('#open_select_type').html("")
                                                    for (i = 0; i < data.type.length; i++) {
                                                        var option_type = document.createElement('option');
                                                        option_type.value = data.type[i]
                                                        option_type.innerText = data.type[i]
                                                        $('#open_select_type').append(option_type)
                                                    }
                                                    $('#open_select_year').html("")
                                                    for (i = 0; i < data.year.length; i++) {
                                                        var option_year = document.createElement('option');
                                                        option_year.value = data.year[i]
                                                        option_year.innerText = data.year[i]
                                                        $('#open_select_year').append(option_year)
                                                    }
                                                    $('#open_select_unity').html("")
                                                    for (i = 0; i < data.unity.length; i++) {
                                                        var option_unity = document.createElement('option');
                                                        option_unity.value = data.unity[i]
                                                        option_unity.innerText = data.unity[i]
                                                        $('#open_select_unity').append(option_unity)
                                                    }
                                                    
                                                }
                                            })
                                        })
                                    </script>
                                    <!-- 打开 -->
                                    <div class="modal fade" id="modal-container-000002" role="dialog" aria-labelledby="myModalLabel"
                                        aria-hidden="true">
                                        <div class="modal-dialog">
                                            <div class="modal-content">
                                                <div class="modal-header">
                                                    <button type="button" class="close" data-dismiss="modal" aria-hidden="true"></button>
                                                    <h4 class="modal-title" id="myModalLabel">
                                                        打开材料
                                                    </h4>
                                                </div>
                                                <div class="modal-body" style="height: 300px;">
                                                    <div style="display:inline-block;width:100%;height: 100%;border: 3px solid black">
                                                        <!-- <div style="width:100%;height: 25%">
                                                        </div> -->
                                                        <!-- 选项栏 -->
                                                        <div  style="display: inline-block;width:100%;height: 15%;">
                                                            <select id="open_select_type" style="width: 30%;height:100%;">
                                                                
                                                            </select>
                                                            <div style="display: inline-block;width: 5%;"></div>
                                                            <select id="open_select_year"  style="width: 15%;height:100%;">
                                                                
                                                            </select>
                                                            <div style="display: inline-block;width: 5%;"></div>
                                                            <select id="open_select_unity"  style="width: 30%;height:100%;">
                                                                
                                                            </select>
                                                            <input id="open_document_post" type="button" value="查询" style="width:10%;height:100%"> 
                                                            <script type="text/javascript">

                                                            </script>

                                                        </div>
                                                        <script type="text/javascript">
                                                            $('#open_document_post').click(function () {
                                                                console.log($('#open_select_type').val())
                                                                var csrf = $('input[name="csrfmiddlewaretoken"]').val();
                                                                

                                                                // 告诉后端打开一个新的数据，并在前端修改文档标识
                                                                $.ajax({
                                                                    url: "open_doc_data",  // 请求的地址
                                                                    type: "post",  // 请求方式
                                                                    timeout: 250, //设置延迟上限
                                                                    data: {
                                                                        'csrfmiddlewaretoken': csrf,
                                                                        'type': $('#open_select_type').val(),
                                                                        'unity': $('#open_select_unity').val(),
                                                                        'year': $('#open_select_year').val(),
                                                                       
                                                                    },
                                                                    dataType: "json",
                                                                    success: function (data) {
                                                                        // 返回以后创建一个对象实例
                                                                        console.log("返回成功", data)
                                                                        $('#open_item_list').html("")
                                                                        for (i = 0; i < data.item.length; i++) {
                                                                            var div_label = document.createElement('div');
                                                                            div_label.style = "width:100%;height:8%;"

                                                                            var label = document.createElement('label');
                                                                            label.setAttribute("for","item"+i.toString())
                                                                            label.innerText = "第" + data.item[i] + "期:" + "-----" + data.type[i] + "----"+ data.writer[i]
                                                                            
                                                                            var checkitem = document.createElement('input')
                                                                            checkitem.setAttribute("type","radio")
                                                                            checkitem.setAttribute("name","load_doc_list")
                                                                            checkitem.id = "item"+i.toString()
                                                                            checkitem.style = "display:none"
                                                                            checkitem.value = i.toString() + "-" + data.year + "-" + data.unity  + "-" + data.type[i]
                                                                            div_label.append(label,checkitem)

                                                                            $('#open_item_list').append(div_label)
                                                                        }
                                                                        
                                                                    }
                                                                })

                                                            })


                                                        </script>
                                                        <!-- 加载的栏目 -->
                                                        <div id="open_item_list" class="scrollbar_self" style="width:100%;height: 85%;border: 1px solid black;overflow-x: hidden;overflow-y:scroll;">
                                                        </div>

                                                    </div>
                    
                                                </div>
                                                <div class="modal-footer">
                                                    <button type="button" class="btn btn-default" data-dismiss="modal">关闭</button> 
                                                    <button id="open_load_object" type="button" class="btn btn-primary" data-dismiss="modal">加载</button>
                                                </div>
                                                <script type="text/javascript">
                                                    $('#open_load_object').click(function () {
                                                                // console.log($('#load_open_object').val())
                                                                var upload_data = $("input[name='load_doc_list']:checked").val()
                                                                console.log("返回",$("input[name='load_doc_list']:checked").val())
                                                                var csrf = $('input[name="csrfmiddlewaretoken"]').val();                                                        
                                                                // 告诉后端打开一个新的数据，并在前端修改文档标识
                                                                $.ajax({
                                                                    url: "open_load_object",  // 请求的地址
                                                                    type: "post",  // 请求方式
                                                                    timeout: 250, //设置延迟上限
                                                                    data: {
                                                                        'csrfmiddlewaretoken': csrf, 
                                                                        'info':upload_data
                                                                    },
                                                                    dataType: "json",
                                                                    success: function (data) {
                                                                        // 返回以后创建一个对象实例
                                                                        console.log("返回成功", data)
                                                                        $('#doc_type').text(data.type)
                                                                        $('#doc_info').text("第" + data.item + "期:  " + data.type)
                                                                        list_button_object.year = data.year
                                                                        list_button_object.item = data.item
                                                                        list_button_object.type = data.type
                                                                        list_button_object.type_list = data.type_list
                                                                        list_button_object.unity = data.unity
                                                                        list_button_object.cerate_div_button()
                                                                        list_button_object.data = data.content_list
                                                                    }
                                                                })

                                                            })

                                                </script>
                                            </div>
                    
                                        </div>
                    
                                    </div>
                                    <!-- 删除 -->
                                    <div class="modal fade" id="modal-container-000003" role="dialog" aria-labelledby="myModalLabel"
                                        aria-hidden="true">
                                        <div class="modal-dialog">
                                            <div class="modal-content">
                                                <div class="modal-header">
                                                    <button type="button" class="close" data-dismiss="modal" aria-hidden="true"></button>
                                                    <h4 class="modal-title" id="myModalLabel">
                                                        删除材料
                                                    </h4>
                                                </div>
                                                <div class="modal-body" style="height: 600px;">
                    
                                                </div>
                                                <div class="modal-footer">
                                                    <button type="button" class="btn btn-default" data-dismiss="modal">关闭</button> <button
                                                        type="button" class="btn btn-primary">保存</button>
                                                </div>
                                            </div>
                    
                                        </div>
                    
                                    </div>
                                    <!-- 配置 -->
                                    <div class="modal fade" id="modal-container-000004" role="dialog" aria-labelledby="myModalLabel"
                                        aria-hidden="true">
                                        <div class="modal-dialog">
                                            <div class="modal-content">
                                                <div class="modal-header">
                                                    <button type="button" class="close" data-dismiss="modal" aria-hidden="true"></button>
                                                    <h4 class="modal-title" id="myModalLabel">
                                                        标题
                                                    </h4>
                                                </div>
                                                <div class="modal-body" style="height: 600px;">
                                                    <input type="button" value="模块自定义" style="width:100%;height:10%">
                                                    <input type="button" value="文档种类" style="width:100%;height:10%">
                                                    <input type="button" value="参考网页" style="width:100%;height:10%">
                                                    <input type="button" value="密码账号" style="width:100%;height:10%">
                                                </div>
                                                <div class="modal-footer">
                                                    <button type="button" class="btn btn-default" data-dismiss="modal">关闭</button> <button
                                                        type="button" class="btn btn-primary">保存</button>
                                                </div>
                                            </div>
                    
                                        </div>
                    
                                    </div>
                    
                    
                    
                    
                    
                    
                    
                                    <!-- 文件头 -->
                                </div>
                                <div style="display:inline-flex;width: 100%; height: 90%">

                                    <textarea id="content" style="width:100%;height: 100%;">

                                    </textarea>
                    
                                </div>
                                <div style="display: inline-flex;width:100%;height: 5%;">
                                    <div style="width:85%;height: 100%;">
                                        <h5 id="doc_unity" style="float:left;width:25%">台州市气象局</h5>
                                        <h5 id="doc_info" style="float:left;width:25%">第47期:一周天气</h5>
                                    </div>
                                    <button id="convert3"
                                        style="width:40px;height:40px;background-image: url(static/src/合并.png);background-size: 100%;background-repeat: no-repeat;"></button>
                                    <div style="width:2%;height: 100%;"> </div>
                                    <button id="preview_save"
                                        style="width:40px;height:40px;background-image: url(static/src/保存.png);background-size: 100%;background-repeat: no-repeat;"></button>
                                    <div style="width:2%;height: 100%;"> </div>
                                    <button id="convert"
                                        style="width:40px;height:40px;background-image: url(static/src/预览.png);background-size: 100%;background-repeat: no-repeat;"></button>
                                </div>
                    
                                <script>
                                    tinymce.init({
                                            selector: '#content',
                                            language: 'zh_CN',
                                            branding: false,
                                            skin: 'oxide-dark',
                                            promotion: false,
                                            plugin_plothtml_width: "300%",
                                            menubar:false,
                                            plugins: "advlist anchor autolink autosave charmap code codesample emoticons footer fullscreen help image importcss indent2em insertdatetime link lists media nonbreaking pagebreak plothtml preview quickbars save searchreplace table template visualblocks wordcount",
                                            toolbar: [
                                                    "footer bullist numlist indent2em plothtml",
                                                    "insertfile undo redo bold italic underline hr |alignleft aligncenter alignright formatselect fontselect fontsizeselect removeformat subscript superscript charmap searchreplace insertdatetime forecolor backcolor fontsize fontfamily",//段落
                                                    "image code link unlink rotateleft rotateright flipv fliph editimage imageoptions quickimage | table | bullist numlist| | footer plothtml"                                                                                
                                            ],
                                            font_family_formats: "宋体='宋体';仿宋='仿宋';微软雅黑='微软雅黑';楷体='楷体';;隶书='隶书';幼圆='幼圆';Andale Mono=andale mono,times;Arial=arial,helvetica,sans-serif;Arial Black=arial black,avant garde;Book Antiqua=book antiqua,palatino;Comic Sans MS=comic sans ms,sans-serif;Courier New=courier new,courier;Georgia=georgia,palatino;Helvetica=helvetica;Impact=impact,chicago;Symbol=symbol;Tahoma=tahoma,arial,helvetica,sans-serif;Terminal=terminal,monaco;Times New Roman=times new roman,times;Trebuchet MS=trebuchet ms,geneva;Verdana=verdana,geneva;Webdings=webdings;Wingdings=wingdings",
                                            font_size_formats: '12px 14px 16px 18px 20px 24px 26px 28px 30px 32px 34px 36px 38px',
                                            
                                            
                                        });



                                    document.getElementById('convert').addEventListener('click', function () {
                                        //获取html的内容
                                        var contentDocument = tinymce.get('content').getContent();
                                        // 加载文件头  
                                        var hearder = list_button_object.render_head_info()
                                        contentDocument = hearder + contentDocument
                                        console.log(contentDocument)
                                        var formData = new FormData();
                                        formData.append("document", contentDocument);

                                        $.ajax({
                                            url: "file/pdf",  // 请求的地址
                                            type: "POST",  // 请求方式
                                            data: formData,
                                            processData: false,
                                            contentType: false,
                                            enctype: "multipart/form-data",
                                            responseType: "arraybuffer",
                                            mimeType: "text/plain; charset=x-user-defined",
                                            success: function (data) {
                                                var rawLength = data.length;
                                                var array = new Uint8Array(new ArrayBuffer(rawLength));
                                                for (i = 0; i < rawLength; i++) {
                                                    array[i] = data.charCodeAt(i) & 0xff;
                                                }

                                                var pdfBlob = new Blob([array], { type: "application/pdf;charset=utf-8" })
                                                var pdfFile = URL.createObjectURL(pdfBlob)
                                                const options_pdf = {
                                                    forcePDFJS: true,
                                                    pdfOpenParams: {
                                                        pagemode: "thumbs",
                                                        navpanes: 0,
                                                        toolbar: 0,
                                                        scrollbar: 0,
                                                        statusbar: 0,
                                                        view: "FitV"
                                                    }
                                                }

                                                PDFObject.embed(pdfFile, "#product_view", options_pdf);
                                            }

                                        })
                                    });
                                    document.getElementById('preview_save').addEventListener('click', function () {
                                        //保存并预览单个模块的内容
                                        var contentDocument = tinymce.get('content').getContent();
                                        //收集上传的数据
                                        var item = $("input[name='doc_tyoe_opt']:checked").val()
                                        var types = list_button_object.type
                                        var name = list_button_object.type_list[item]
                                        var year = list_button_object.year
                                        var data = contentDocument
                                        var items = list_button_object.item
                                        var unity = list_button_object.unity
                                        console.log($("input[name='doc_tyoe_opt']:checked").val())
                                        var formData = new FormData();
                                        formData.append("document", contentDocument);
                                        formData.append("item", item);
                                        formData.append("types", types);
                                        formData.append("name", name);
                                        formData.append("year", year);
                                        formData.append("data", data);
                                        formData.append("items", items);
                                        formData.append("unity", unity);
                                        $.ajax({
                                            url: "file/preview_save",  // 请求的地址
                                            type: "POST",  // 请求方式
                                            data: formData,
                                            processData: false,
                                            contentType: false,
                                            enctype: "multipart/form-data",
                                            responseType: "arraybuffer",
                                            mimeType: "text/plain; charset=x-user-defined",
                                            success: function (data) {
                                                var rawLength = data.length;
                                                var array = new Uint8Array(new ArrayBuffer(rawLength));
                                                for (i = 0; i < rawLength; i++) {
                                                    array[i] = data.charCodeAt(i) & 0xff;
                                                }

                                                var pdfBlob = new Blob([array], { type: "application/pdf;charset=utf-8" })
                                                var pdfFile = URL.createObjectURL(pdfBlob)
                                                const options_pdf = {
                                                    forcePDFJS: true,
                                                    pdfOpenParams: {
                                                        pagemode: "thumbs",
                                                        navpanes: 0,
                                                        toolbar: 0,
                                                        scrollbar: 0,
                                                        statusbar: 0,
                                                        view: "FitV"
                                                    }
                                                }

                                                PDFObject.embed(pdfFile, "#product_view", options_pdf);
                                            }

                                        })
                                    });

                                </script>
                    
                            </div>

                        </div>
                        <div class="tab-pane" id="panel-2" style="width:100%;height:100%">
                            <div style="width:100%;height:35%;;padding: 15px;">
                                <div class="tabbable" id="tabs-233110" style="width:100%;height:100%">
                                    <ul class="nav nav-tabs">
                                        <li class="active">
                                            <a href="#panel-03001" data-toggle="tab">一周天气</a>
                                        </li>
                                        <li>
                                            <a href="#panel-03002" data-toggle="tab">气象信息快报</a>
                                        </li>
                                        <li>
                                            <a href="#panel-03003" data-toggle="tab">重要气象报告</a>
                                        </li>
                                        <li>
                                            <a href="#panel-03004" data-toggle="tab">天气专报</a>
                                        </li>
                                        <li>
                                            <a href="#panel-03005" data-toggle="tab">天气公报</a>
                                        </li>
                                    </ul>
                                    <div class="tab-content" style="width:100%;height:87%;background-color: white;">
                                        <div class="tab-pane active" id="panel-03001" style="width:100%;height:100%">
                                            <!-- 调整好的布局结构 -->
                                            <div style="width:100%;height:97%;">
                                                <div class="scrollbar_self"
                                                    style="width:100%;height:80%;overflow-x: hidden;overflow-y:scroll;">

                                                    <div class="tool_history_button"
                                                        style="display: inline-block;font-size: 20px;font-weight:900;font-family:'宋体';;height: 20%;width:100%;;vertical-align: middle;padding-top: 2%;">
                                                        <label for="file_week0"
                                                            style="width:10%;text-align:center;;vertical-align: middle;padding-bottom: 1.5%;">第一期</label>
                                                        <label for="file_week0"
                                                            style="width:73%;text-align:center;vertical-align: middle;">冷空气来袭</label>
                                                        <input type="radio" name="file_week" id="file_week0"
                                                            style="width:10%;;">
                                                    </div>

                                                    <div class="tool_history_button"
                                                        style="display: inline-block;font-size: 20px;font-weight:900;font-family:'宋体';;height: 20%;width:100%;;vertical-align: middle;padding-top: 2%;">
                                                        <label for="file_week1"
                                                            style="width:10%;text-align:center;;vertical-align: middle;padding-bottom: 1.5%;">第二期</label>
                                                        <label for="file_week1"
                                                            style="width:73%;text-align:center;vertical-align: middle;">未来七天天气晴好</label>
                                                        <input type="radio" name="file_week" id="file_week1"
                                                            style="width:10%;;">
                                                    </div>

                                                    <div class="tool_history_button"
                                                        style="display: inline-block;font-size: 20px;font-weight:900;font-family:'宋体';;height: 20%;width:100%;;vertical-align: middle;padding-top: 2%;">
                                                        <label for="file_week2"
                                                            style="width:10%;text-align:center;;vertical-align: middle;padding-bottom: 1.5%;">第三期</label>
                                                        <label for="file_week2"
                                                            style="width:73%;text-align:center;vertical-align: middle;">周四强降水</label>
                                                        <input type="radio" name="file_week" id="file_week2"
                                                            style="width:10%;;">
                                                    </div>

                                                    <div class="tool_history_button"
                                                        style="display: inline-block;font-size: 20px;font-weight:900;font-family:'宋体';;height: 20%;width:100%;;vertical-align: middle;padding-top: 2%;">
                                                        <label for="file_week3"
                                                            style="width:10%;text-align:center;;vertical-align: middle;padding-bottom: 1.5%;">第四期</label>
                                                        <label for="file_week3"
                                                            style="width:73%;text-align:center;vertical-align: middle;">冷空气南下，沿海大风</label>
                                                        <input type="radio" name="file_week" id="file_week3"
                                                            style="width:10%;;">
                                                    </div>







                                                </div>

                                            </div>
                                        </div>
                                        <div class="tab-pane" id="panel-03002">
                                            <p>
                                                Howdy, I'm in Section 2.
                                            </p>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <!-- <div style="width:100%;height:1%;"></div> -->
                            <div style="width:97.5%;height:20%;background-color:white;margin:15px">
                                <div style="width:100%;height:15%;background-color:rgb(220, 222, 226);">
                                    <h2
                                        style="text-align:center;background-color:rgb(45, 104, 221);width:15%;border-top-left-radius: 5px;border-top-right-radius:5px;font-size: 23px;font-weight:900;font-family:'宋体';color:white">
                                        市台订正</h2>
                                </div>
                                <div
                                    style="display: inline-flex;width:100%;height:20%;text-align:center;align-items: center;">
                                    <div style="height: 100%;width:2%;"></div>
                                    <div style="height: 100%;width:10%;font-size: 20px;vertical-align: middle">
                                        <label for="08input">08</label>&nbsp;&nbsp;<input type="radio"
                                            name="tz_self_time" value="08" checked="checked" id="08input">

                                    </div>
                                    <div style="height: 100%;width:1%;">
                                    </div>
                                    <div style="height: 100%;width:10%;font-size: 20px;vertical-align: middle">
                                        <label for="20input">20</label>&nbsp;&nbsp;<input type="radio"
                                            name="tz_self_time" value="20" id="20input">

                                    </div>
                                </div>
                                <div
                                    style="display: inline-flex;width:100%;height:60%;text-align:center;align-items: center;">

                                    <div style="width:15%;height:80%;"></div>
                                    <div
                                        style="display:inline-block;width:8%;height:60%;background-color: rgb(220, 222, 226);;border-radius: 10px;">
                                        <div
                                            style="width:100%;height:50%;text-align:center;;vertical-align: middle;margin:5px">
                                            <label for="T_short"
                                                style="padding-right:10%;padding-top: 10%;">短期气温</label>
                                        </div>
                                        <div style="width:100%;height:50%;">
                                            <input type="radio" name="tz_self" value="T" class="tool_prodict_product"
                                                id="T_short" style="width: 100%;height:50%;padding-bottom: 10%;">
                                        </div>
                                    </div>
                                    <div style="width:1%;height:80%;"></div>

                                    <div style="width:1%;height:80%;"></div>
                                    <div
                                        style="display:inline-block;width:8%;height:60%;background-color: rgb(220, 222, 226);;border-radius: 10px;">
                                        <div
                                            style="width:100%;height:50%;text-align:center;;vertical-align: middle;margin:5px">
                                            <label for="Pr01_short"
                                                style="padding-right:10%;padding-top: 10%;">短期降水</label>
                                        </div>
                                        <div style="width:100%;height:50%;">
                                            <input type="radio" name="tz_self" value="Pr01" class="tool_prodict_product"
                                                id="Pr01_short" style="width: 100%;height:50%;padding-bottom: 10%;">
                                        </div>
                                    </div>
                                    <div style="width:1%;height:80%;"></div>

                                    <div style="width:1%;height:80%;"></div>
                                    <div
                                        style="display:inline-block;width:8%;height:60%;background-color: rgb(220, 222, 226);;border-radius: 10px;">
                                        <div
                                            style="width:100%;height:50%;text-align:center;;vertical-align: middle;margin:5px">
                                            <label for="Pr24_short"
                                                style="padding-right:10%;padding-top: 10%;">降水</label>
                                        </div>
                                        <div style="width:100%;height:50%;">
                                            <input type="radio" name="tz_self" value="Pr12" class="tool_prodict_product"
                                                id="Pr24_short" style="width: 100%;height:50%;padding-bottom: 10%;">
                                        </div>
                                    </div>
                                    <div style="width:1%;height:80%;"></div>

                                    <div style="width:1%;height:80%;"></div>
                                    <div
                                        style="display:inline-block;width:8%;height:60%;background-color: rgb(220, 222, 226);;border-radius: 10px;">
                                        <div
                                            style="width:100%;height:50%;text-align:center;;vertical-align: middle;margin:5px">
                                            <label for="TMax24_short"
                                                style="padding-right:10%;padding-top: 10%;">高温</label>
                                        </div>
                                        <div style="width:100%;height:50%;">
                                            <input type="radio" name="tz_self" value="TMax24"
                                                class="tool_prodict_product" id="TMax24_short"
                                                style="width: 100%;height:50%;padding-bottom: 10%;">
                                        </div>
                                    </div>
                                    <div style="width:1%;height:80%;"></div>

                                    <div style="width:1%;height:80%;"></div>
                                    <div
                                        style="display:inline-block;width:8%;height:60%;background-color: rgb(220, 222, 226);;border-radius: 10px;">
                                        <div
                                            style="width:100%;height:50%;text-align:center;;vertical-align: middle;margin:5px">
                                            <label for="TMin24_short"
                                                style="padding-right:10%;padding-top: 10%;">低温</label>
                                        </div>
                                        <div style="width:100%;height:50%;">
                                            <input type="radio" name="tz_self" value="TMin24"
                                                class="tool_prodict_product" id="TMin24_short"
                                                style="width: 100%;height:50%;padding-bottom: 10%;">
                                        </div>
                                    </div>
                                    <div style="width:1%;height:80%;"></div>

                                    <div style="width:1%;height:80%;"></div>
                                    <div
                                        style="display:inline-block;width:8%;height:60%;background-color: rgb(220, 222, 226);;border-radius: 10px;">
                                        <div
                                            style="width:100%;height:50%;text-align:center;;vertical-align: middle;margin:5px">
                                            <label for="Cloud_7day_short"
                                                style="padding-right:10%;padding-top: 10%;">短期云量</label>
                                        </div>
                                        <div style="width:100%;height:50%;">
                                            <input type="radio" name="tz_self" value="Cloud"
                                                class="tool_prodict_product" id="Cloud_7day_short"
                                                style="width: 100%;height:50%;padding-bottom: 10%;">
                                        </div>
                                    </div>
                                    <div style="width:1%;height:80%;"></div>

                                    <div style="width:1%;height:80%;"></div>
                                    <div
                                        style="display:inline-block;width:8%;height:60%;background-color: rgb(220, 222, 226);;border-radius: 10px;">
                                        <div
                                            style="width:100%;height:50%;text-align:center;;vertical-align: middle;margin:5px">
                                            <label for="Wind_short"
                                                style="padding-right:10%;padding-top: 10%;">特殊天气</label>
                                        </div>
                                        <div style="width:100%;height:50%;">
                                            <input type="radio" name="tz_self" value="Special12"
                                                class="tool_prodict_product" id="Wind_short"
                                                style="width: 100%;height:50%;padding-bottom: 10%;">
                                        </div>
                                    </div>
                                    <div style="width:1%;height:80%;"></div>


                                </div>



                            </div>

                            <div style="width:97.5%;height:10%;background-color:white;margin:15px">
                                <div style="width:100%;height:28%;background-color:rgb(220, 222, 226);">
                                    <h2
                                        style="text-align:center;background-color:rgb(45, 104, 221);width:15%;border-top-left-radius: 5px;border-top-right-radius:5px;font-size: 23px;font-weight:900;font-family:'宋体';color:white">
                                        实况查询</h2>
                                </div>
                                <div style="display: inline-flex;width:100%;height:72%;">
                                    <div style="width:15%;height:100%;"></div>
                                    <div style="width:65%;height:100%;padding-top:2% ;">
                                        <label>自动站</label>&nbsp;&nbsp;&nbsp;
                                        <label style="width:10%;height:60%;">&nbsp;&nbsp;&nbsp;</label>
                                        <input id="datetimepicker_history1" type="text" placeholder="起始时间"
                                            style="width: 20%;height:60%; text-align:center;vertical-align: middle;align-items: center; ">
                                        <label style="width:5%;height:60%;">&nbsp;&nbsp;&nbsp;</label>
                                        <label>&nbsp;&nbsp;&nbsp;至&nbsp;&nbsp;&nbsp;</label>
                                        <label style="width:5%;height:60%;">&nbsp;&nbsp;&nbsp;</label>
                                        <input id="datetimepicker_history2" type="text" placeholder="结束时间"
                                            style="width: 20%;height:60%; text-align:center;vertical-align: middle;align-items: center; ">

                                        <input id="tool_zdz_button" type="button"
                                            style="width: 8%;height:60% ;border: 0px ;float: right;background-color: white;background-image: url(static/src/查询.png);background-size: 50%;background-repeat: no-repeat;">

                                        <script>

                                            $('#datetimepicker_history1').datetimepicker(
                                                {
                                                    theme: 'dark',
                                                    format: 'Y-m-d H:i'
                                                }
                                            );
                                            $("#datetimepicker_history1").datetimepicker("setDate", new Date());
                                            $('#datetimepicker_history2').datetimepicker(
                                                {
                                                    theme: 'dark',
                                                    format: 'Y-m-d H:i'
                                                }
                                            );
                                        </script>
                                    </div>
                                </div>


                            </div>
                            <div style="width:97.5%;height:15%;background-color:white;margin:15px">
                                <script type="text/javascript" src="static/js/乡镇名称.js"></script>
                                <div style="width:100%;height:100%; ;">
                                    <div style="width:100%;height:10%;background-color:rgb(220, 222, 226);">
                                        <h2
                                            style="text-align:center;background-color:rgb(45, 104, 221);width:15%;border-top-left-radius: 5px;border-top-right-radius:5px;font-size: 23px;font-weight:900;font-family:'宋体';color:white">
                                            乡镇预报</h2>
                                    </div>
                                    <div style="display:inline-block;width:100%;height:90%;">
                                        <div style="display:flex;width:100%;height:50%;padding-top:3%;">
                                            <div style="width:15%;height:100%"></div>
                                            <div style="display:flex;width:85%;height:100%">
                                                <label
                                                    style="padding-top: 0.3%;font-size: 20px;">数据源</label>&nbsp;&nbsp;
                                                <div style="width:5%;height:100%"></div>
                                                <select id="ec_data_type" style="width:15%;height:100%;">
                                                    <option value="ec_data">EC数据</option>
                                                    <option value="ec_data">市台订正</option>
                                                </select>
                                                <div style="width:5%;height:100%"></div>


                                                <label id="ec_time_item"
                                                    style="padding-top: 0.3%;font-size: 20px;">时间间隔</label>&nbsp;&nbsp;
                                                <div style="width:5%;height:100%"></div>
                                                <select style="width:15%;height:100%;">
                                                    <option value="1h">1小时</option>
                                                    <option value="3h">3小时</option>
                                                    <option value="6h">6小时</option>
                                                </select>

                                            </div>

                                        </div>

                                        <div style="display:flex;width:100%;height:50%;padding-top:1%;">
                                            <div style="width:15%;height:100%"></div>
                                            <div style="display:flex;width:85%;height:100%">
                                                <label
                                                    style="padding-top: 0.3%;font-size: 20px;">起报时间</label>&nbsp;&nbsp;
                                                <div style="width:3%;height:100%"></div>
                                                <select id="ec_select_time" style="width:9%;height:60%;">
                                                    <option value="08">08时</option>
                                                    <option value="20">20时</option>
                                                </select>
                                                <div style="width:3%;height:100%"></div>
                                                <input id="ec_start_time" type="text" placeholder="起始时间"
                                                    style="width: 20%;height:60%; text-align:center;vertical-align: middle;align-items: center; ">
                                                <label
                                                    style="padding-top: 0.3%;;font-size: 20px;">&nbsp;&nbsp;&nbsp;至&nbsp;&nbsp;&nbsp;</label>
                                                <input id="ec_end_time" type="text" placeholder="结束时间"
                                                    style="width: 20%;height:60%; text-align:center;vertical-align: middle;align-items: center; ">
                                                <div style="width:1%;height:100%"></div>

                                                <input id="tool_ec_button" type="button"
                                                    style="width: 8%;height:60% ;border: 0px ;float: right;background-color: white;background-image: url(static/src/查询.png);background-size: 40%;background-repeat: no-repeat;">
                                            </div>
                                            <script>

                                                $('#ec_start_time').datetimepicker(
                                                    {
                                                        theme: 'dark',
                                                        format: 'Y-m-d H:i'
                                                    }
                                                );
                                                $("#ec_start_time").datetimepicker("setDate", new Date());

                                                $('#ec_end_time').datetimepicker(
                                                    {
                                                        theme: 'dark',
                                                        format: 'Y-m-d H:i'
                                                    }
                                                );
                                            </script>



                                        </div>


                                    </div>
                                    <!-- <div
                                        style="display: inline-block ;width:100%;height:30%;;vertical-align:middle;font-size: 25px;">
                                        <h3 style="display: inline-block ;width:15% ;">数据源:</h3>
                                        EC数据: <input type="radio" name="check_data_source" checked="checked"
                                            style="width: 5%;height:50%;">
                                        市台订正: <input type="radio" name="check_data_source"
                                            style="width: 5%;height:50%;">
                                    </div>
                                    <div
                                        style="display: inline-block ;width:100%;height:25%;;vertical-align:middle;font-size: 25px;">
                                        <h3 style="display: inline-block ;width:15% ;">时间间隔:</h3>
                                        逐1小时: <input type="radio" name="check_data_hours" checked="checked"
                                            style="width: 5%;height:50%;">
                                        逐3小时: <input type="radio" name="check_data_hours" style="width: 5%;height:50%;">
                                        逐6小时: <input type="radio" name="check_data_hours" style="width: 5%;height:50%;">
                                    </div> -->
                                    <!-- <div
                                        style="display: inline-block ;width:100%;height:15%;;vertical-align:middle;font-size: 25px;">
                                        <h3 style="display: inline-block ;width:15% ;">时间:</h3>
                                        <select>
                                            <option value="">20220501</option>
                                            <option value="">20220502</option>
                                            <option value="">20220503</option>
                                            <option value="">20220504</option>
                                        </select>
                                        <input id="ec_start_time" type="text" placeholder="起始时间"
                                            style="width:20%;height:80%;">
                                        <input id="ec_end_time" type="text" placeholder="起始时间"
                                            style="width:20%;height:80%;">
                                        <script>
                                            $('#ec_start_time').datetimepicker(
                                                {
                                                    theme: 'dark',
                                                    format: 'Y-m-d H:i'
                                                }
                                            );
                                            $("#ec_start_time").datetimepicker("setDate", new Date());
                                            $('#ec_end_time').datetimepicker(
                                                {
                                                    theme: 'dark',
                                                    format: 'Y-m-d H:i'
                                                }
                                            );
                                        </script>
                                    </div> -->


                                    <!-- <div
                                        style="display: inline-block ;width:100%;height:25%;background-color:rgb;vertical-align:middle;font-size: 25px;">            
                                        <input id="tool_ec_button" type="button" value="打开"
                                            style="width: 10%;height:60% ;float: right ;">
                                    </div> -->




                                </div>


                            </div>


                        </div>
                        <!-- 利用canvas绘图的模块 ---- 这里主要提供三种画图方式（散点、插值、等值线）-->
                        <div class="tab-pane" id="panel-3"
                            style="width:100%;height:100%;background-color:rgb(243, 244, 247)">
                            <div class="tabbable" id="tabs-329760" style="width:100%;height:100%; ">
                                <ul class="nav nav-tabs">
                                    <li class="active">
                                        <a href="#panel-canvas01" data-toggle="tab">精细化订正</a>
                                    </li>
                                    <li>
                                        <a href="#panel-canvas02" data-toggle="tab">快速绘图</a>
                                    </li>
                                </ul>
                                <div class="tab-content" style="width:100%;height:95%">
                                    <div class="tab-pane active" id="panel-canvas01" style="width:100%;height:100%">

                                        <!-- <label style="fontsize:40px">降水订正</label> -->
                                        <div style="display:inline-flex;width:100%;height:5%;  ">

                                            <div style="width:100%;height:100%;border: 1px solid  black  ">
                                                <div style="width:100%;height:30%  ">
                                                </div>
                                                <!-- 添加数值 -->
                                                <div style="display:inline-block;width:100%;height:35%;  ">
                                                    增加<input checked="checked" type="radio" name="canvas_var" value="+">
                                                    减少<input type="radio" name="canvas_var" value="-">
                                                    0.1<input checked="checked" type="radio" name="canvas_num"
                                                        style="width:5%" value="0.1">
                                                    0.3<input type="radio" name="canvas_num" style="width:5%"
                                                        value="0.3">
                                                    0.5<input type="radio" name="canvas_num" style="width:5%"
                                                        value="0.5">
                                                    1<input type="radio" name="canvas_num" style="width:5%" value="1">
                                                    3<input type="radio" name="canvas_num" style="width:5%" value="3">
                                                    5<input type="radio" name="canvas_num" style="width:5%" value="5">
                                                    10<input type="radio" name="canvas_num" style="width:5%" value="10">

                                                </div>

                                            </div>

                                        </div>

                                        <div
                                            style="display: inline-flex;width:100%;height:75%; background-color: white;">
                                            <div
                                                style="width:10%;height:100%;border: 1px  black;border-style:hidden solid hidden hidden;">
                                                <div style="width:100%;height:5%;">
                                                    请选择颜色:
                                                </div>
                                                <div style="width:100%;height:10%;background-color: rgb(128, 0, 64);">
                                                    <input type="radio" checked="checked" name="selected_color_1st"
                                                        value="rgb(128, 0, 64)" style="width:20%;height:100%;">
                                                </div>
                                                <div style="width:100%;height:10%;background-color: rgb(250, 0, 250);">
                                                    <input type="radio" name="selected_color_1st"
                                                        value="rgb(250, 0, 250)" style="width:20%;height:100%;">
                                                </div>
                                                <div style="width:100%;height:10%;background-color: rgb(0, 0, 225);">
                                                    <input type="radio" name="selected_color_1st" value="rgb(0, 0, 225)"
                                                        style="width:20%;height:100%;">
                                                </div>
                                                <div style="width:100%;height:10%;background-color: rgb(97, 184, 255);">
                                                    <input type="radio" name="selected_color_1st"
                                                        value="rgb(97, 184, 255)" style="width:20%;height:100%;">
                                                </div>
                                                <div style="width:100%;height:10%;background-color: rgb(61,186,61);">
                                                    <input type="radio" name="selected_color_1st" value="rgb(61,186,61)"
                                                        style="width:20%;height:100%;">
                                                </div>
                                                <div style="width:100%;height:10%;background-color: rgb(166,242,143);">
                                                    <input type="radio" name="selected_color_1st"
                                                        value="rgb(166,242,143)" style="width:20%;height:100%;">
                                                </div>
                                                <!-- 自定义颜色 -->
                                                <div style="width:100%;height:10%;background-color: rgb(19, 12, 16);">
                                                    <!-- <input type="text" id="hue-demo" class="form-control demo" data-control="hue" value="#ff6161"> -->

                                                    <input type="radio" name="selected_color_1st"
                                                        value="rgb(19, 12, 16)" style="width:20%;height:100%;">
                                                </div>


                                            </div>
                                            <canvas id="plot_canvas" style="width:90%;height:100%;"></canvas>
                                        </div>
                                        <!-- 自订正绘图的核心js -->
                                        <script src='static/js/taizhou.js'></script>
                                        <script type="text/javascript" src='static/js/canvas_self_plot.js'></script>


                                        <div style="width:100%;height:20%;border: 1px solid black">
                                            <div
                                                style="width:100%;height:20%;border: 1px black;border-style:hidden hidden solid hidden ;">
                                                &nbsp;&nbsp;&nbsp;数据源:<input id="plot_1st_data" checked="checked"
                                                    type="radio" name="select_color_and_data" style="width:2%">
                                                &nbsp;&nbsp;&nbsp;色标:<input id="plot_1st_color" type="radio"
                                                    name="select_color_and_data" style="width:2%">

                                                <input id="plot_self_button" type="button" value="绘制"
                                                    style="width:10%;height: 100%;float:right">
                                                <input id="plot_self_flash" type="button" value="刷新"
                                                    style="width:10%;height:100%;float:right">

                                            </div>
                                            <div id="plot_1st_tool1" style="display:inline-block;width:100%;height:80%">
                                                <div style=";width:100%;height:20%; ">
                                                    &nbsp;&nbsp;&nbsp;EC:<input type="radio" name="defalut_data_sourec"
                                                        style="width:2%">
                                                    &nbsp;&nbsp;&nbsp;订正:<input type="radio" name="defalut_data_sourec"
                                                        style="width:2%">
                                                    &nbsp;&nbsp;&nbsp;自动站:<input type="radio" name="defalut_data_sourec"
                                                        style="width:2%">
                                                </div>
                                                <div style=";width:100%;height:25%; "></div>
                                                <div style="display: inline-flex;width:100%;height:20%; ">
                                                    <div style="width:20%;height:80%; "></div>
                                                    <input id="self_plot_start_time" type="text" placeholder="起始时间"
                                                        style="width:20%;height: 100%;float:left">
                                                    <input id="self_plot_end_time" type="text" placeholder="起始时间"
                                                        style="width:20%;height: 100%;float:left">
                                                    <input type="button" id="self_plot_download" value="下载"
                                                        style="width:10%;height: 100%;float:left">
                                                </div>



                                                <!-- 自订正画图的下载代码 -->

                                                <script type="text/javascript">
                                                    $('#self_plot_start_time').datetimepicker(
                                                        {
                                                            theme: 'dark',
                                                            format: 'Y-m-d H:i',
                                                            minView: "month",
                                                            language: 'zh',
                                                            startView: 2

                                                        }
                                                    );
                                                    $("#self_plot_start_time").datetimepicker("setDate", new Date());

                                                    $('#self_plot_end_time').datetimepicker(
                                                        {
                                                            theme: 'dark',
                                                            format: 'Y-m-d H:i'
                                                        }
                                                    );
                                                    $('#self_plot_download').click(function () {
                                                        // console.log("我被点击了")
                                                        var csrf = $('input[name="csrfmiddlewaretoken"]').val();
                                                        var self_plot_start_time = $('#self_plot_start_time').val();
                                                        var self_plot_end_time = $('#self_plot_end_time').val();
                                                        $.ajax({
                                                            url: "self_plot_download",  // 请求的地址
                                                            type: "post",  // 请求方式
                                                            timeout: 250, //设置延迟上限
                                                            data: {
                                                                'csrfmiddlewaretoken': csrf,
                                                                'self_plot_start_time': self_plot_start_time,
                                                                'self_plot_end_time': self_plot_end_time
                                                            },
                                                            dataType: "json",
                                                            success: function (data) {
                                                                // data_canvas = {}
                                                                data_canvas = data.data_canvas
                                                                // plot_self_flash_data ={}
                                                                plot_self_flash_data = data.data_canvas
                                                            }
                                                        })
                                                    })
                                                    let plot_self_flash_data = {
                                                        "station_list": ['1', '2', '3', '4', '5', '6', '7', '8', '9', '10', '11', '12', '13', '14', '15', '16', '17', '18', '19', '20'],
                                                        "station": [
                                                            [120.5, 28.5, 199],
                                                            [120.92, 28.78, 55],
                                                            [120.47, 28.55, 45],
                                                            [120.91, 29.11, 35],
                                                            [121.46, 28.94, 25],
                                                            [121.05, 28.77, 15],
                                                            [121.41, 28.64, 25],
                                                            [120.21, 28.66, 35],
                                                            [121.41, 28.47, 45],
                                                            [121.40, 28.34, 55],
                                                            [121.15, 27.94, 65],
                                                            [121.21, 28.41, 75],
                                                            [120.54, 28.70, 85],
                                                            [121.20, 28.68, 15],
                                                            [120.66, 28.89, 25],
                                                            [121.04, 29.00, 23],
                                                            [121.25, 28.90, 23],
                                                            [121.21, 28.20, 65],
                                                            [121.15, 28.25, 68],
                                                            [120.95, 28.60, 68],
                                                            [121.00, 28.60, 99]

                                                        ]
                                                    }
                                                    $('#plot_self_flash').click(function () {

                                                        // 解决前端对象相等的时候指针相等的问题
                                                        data_canvas = {}
                                                        data_canvas = JSON.parse(JSON.stringify(plot_self_flash_data))
                                                        console.log("我点击了", data_canvas.station[0], "刷新值", plot_self_flash_data.station[0])
                                                    })

                                                </script>




                                            </div>
                                            <div id="plot_1st_tool2"
                                                style="display:none;width:100%;height:80%;border: 1px solid black">

                                                <div id="color_select_list_for_plot_1st"
                                                    style="display: inline-block;width:100%;height: 40%; "></div>
                                                <div style="width:100%;height: 10%; "></div>


                                                &nbsp;<input id="color_bar_add" type="button" value="添加"
                                                    onclick="color_bar_add_for_plot_1st()"
                                                    style="width: 10%;height: 35%;float: right;">
                                                &nbsp;<input id="color_bar_del" type="button" value="删除"
                                                    onclick="color_bar_del_for_plot_1st()"
                                                    style="width: 10%;height: 35%;float: right;">

                                            </div>

                                            <script type="text/javascript">
                                                var data_color_bar_for_plot_1st = {
                                                    "color": [],
                                                    "text": []
                                                }
                                                function color_bar_add_for_plot_1st() {
                                                    // console.log("添加color")
                                                    var color_style = $("input[name='selected_color_1st']:checked").val()
                                                    var add_radio = document.createElement('input')
                                                    add_radio.style.width = "8%"
                                                    add_radio.style.height = "80%"
                                                    add_radio.style.backgroundColor = color_style
                                                    // color_bar_list.push(color_style)
                                                    // add_radio.
                                                    add_radio.style.display = "inline-block"
                                                    add_radio.style.border = "1px solid black"
                                                    add_radio.setAttribute("class", "color_bar")
                                                    add_radio.setAttribute("type", "text")

                                                    $('#color_select_list_for_plot_1st').append(add_radio)
                                                }
                                                function color_bar_del_for_plot_1st() {
                                                    $('#color_select_list_for_plot_1st').children().last().remove()
                                                    data_color_bar_for_plot_1st.text.pop()
                                                    data_color_bar_for_plot_1st.color.pop()
                                                }



                                                $('#plot_1st_data').click(function () {
                                                    $('#plot_1st_tool1').attr("style", "display:inline-block;width:100%;height:80%;border: 1px solid black")
                                                    $('#plot_1st_tool2').attr("style", "display:none;width:100%;height:80%;border: 1px solid black")
                                                })
                                                $('#plot_1st_color').click(function () {
                                                    console.log("点击颜色成功")
                                                    $('#plot_1st_tool1').attr("style", "display:none;width:100%;height:80%;border: 1px solid black")
                                                    $('#plot_1st_tool2').attr("style", "display:inline-block;width:100%;height:80%;border: 1px solid black")
                                                })


                                            </script>

                                        </div>
                                    </div>
                                    <!-- 快速绘图的核心代码 -->
                                    <div class="tab-pane" id="panel-canvas02" style="width:100%;height:100%">
                                        <div style="width:100%;height:5%;border: 1px solid black">
                                            城市:<input type="radio" checked="checked" name="taizhou_shp_type"
                                                value="taizhou_city">
                                            县区:<input type="radio" name="taizhou_shp_type" value="taizhou_county">
                                            乡镇:<input type="radio" name="taizhou_shp_type" value="taizhou_village">
                                            <span style="width:10%;height: 100%;text-algin-last:justify  ">
                                                &#12288;&#12288;&#12288;</span>
                                            <input id="text_canvas_main" type="text" placeholder="请输入标题" value="请输入标题"
                                                style="width:60%;height:100%">
                                            <input id="text_canvas_plot" type="button" value="绘制"
                                                style="width:10%;height:100%;float: right">
                                            <script>
                                                $('#text_canvas_plot').click(function () {
                                                    ctx_quick_plot.font = 'normal 15pt "楷体"';
                                                    ctx_quick_plot.clearRect(0, 0, 600, 70)
                                                    ctx_quick_plot.fillText($('#text_canvas_main').val(), 35, 60)
                                                })
                                            </script>
                                        </div>
                                        <div
                                            style="display:inline-block;width:100%;height:80%;border: 1px black;border-style:solid solid solid solid ;">
                                            <div
                                                style="display:inline-flex;width:100%;height:100%;border: 1px black;border-style:solid solid solid solid ;">
                                                <!-- 颜色 -->
                                                <div
                                                    style="display:inline-block;width:10%;height:100%;border: 1px black;border-style:hidden solid hidden hidden ;">
                                                    <div style="width:100%;height:5%;">
                                                        请选择颜色:
                                                    </div>
                                                    <div style="width:100%;height:5%;background-color: rgb(245, 9, 9);">
                                                        <input type="radio" checked="checked" name="selected_color"
                                                            value="rgb(245, 9, 9)" style="width:20%;height:100%;">
                                                    </div>
                                                    <div
                                                        style="width:100%;height:5%;background-color: rgb(112, 27, 35);">
                                                        <input type="radio" name="selected_color"
                                                            value="rgb(112, 27, 35)" style="width:20%;height:100%;">
                                                    </div>
                                                    <div
                                                        style="width:100%;height:5%;background-color: rgb(240, 10, 190);">
                                                        <input type="radio" name="selected_color"
                                                            value="rgb(240, 10, 190)" style="width:20%;height:100%;">
                                                    </div>
                                                    <div
                                                        style="width:100%;height:5%;background-color: rgb(13, 27, 224);">
                                                        <input type="radio" name="selected_color"
                                                            value="rgb(13, 27, 224)" style="width:20%;height:100%;">
                                                    </div>
                                                    <div
                                                        style="width:100%;height:5%;background-color: rgb(64, 137, 179);">
                                                        <input type="radio" name="selected_color"
                                                            value="rgb(64, 137, 179)" style="width:20%;height:100%;">
                                                    </div>
                                                    <div
                                                        style="width:100%;height:5%;background-color: rgb(49, 131, 11);">
                                                        <input type="radio" name="selected_color"
                                                            value="rgb(49, 131, 11)" style="width:20%;height:100%;">
                                                    </div>
                                                    <div
                                                        style="width:100%;height:5%;background-color: rgb(156, 231, 35);">
                                                        <input type="radio" name="selected_color"
                                                            value="rgb(156, 231, 35)" style="width:20%;height:100%;">
                                                    </div>
                                                    <div
                                                        style="width:100%;height:5%;background-color: rgb(245, 240, 243)">
                                                        <input type="radio" name="selected_color"
                                                            value="rgb(245, 240, 243)" style="width:20%;height:100%;">
                                                    </div>
                                                    <div
                                                        style="width:100%;height:5%;background-color: rgb(19, 12, 16);">
                                                        <input type="radio" name="selected_color"
                                                            value="rgb(19, 12, 16)" style="width:20%;height:100%;">
                                                    </div>
                                                    <div style="width:100%;height:5%;background-color: red;">
                                                        <input type="radio" name="selected_color"
                                                            value="rgb(19, 12, 16)" style="width:20%;height:100%;">
                                                    </div>
                                                    <div
                                                        style="width:100%;height:5%;background-color: rgb(31, 27, 27);">
                                                        <input type="radio" name="selected_color"
                                                            value="rgb(19, 12, 16)" style="width:20%;height:100%;">
                                                    </div>
                                                    <div
                                                        style="width:100%;height:5%;background-color: rgb(19, 211, 105);">
                                                        <input type="radio" name="selected_color"
                                                            value="rgb(19, 12, 16)" style="width:20%;height:100%;">
                                                    </div>
                                                    <div
                                                        style="width:100%;height:5%;background-color: rgb(13, 27, 224);">
                                                        <input type="radio" name="selected_color"
                                                            value="rgb(19, 12, 16)" style="width:20%;height:100%;">
                                                    </div>
                                                </div>
                                                <!-- 绘图的主要面板 -->
                                                <canvas id="canvas_quick_plot" style="width:90%;height:100%"></canvas>
                                                <script src='static/js/taizhou_county.js'></script>
                                            </div>
                                        </div>
                                        <!-- 画图方法 -->
                                        <div
                                            style="display:inline-block;width:100%;height:3%;border: 1px black;border-style:solid solid solid solid ;">
                                            等值线:&nbsp;<input id="taizhou_quick_plot_contour" type="radio"
                                                checked="checked" name="taizhou_quick_plot_type"
                                                value="coutour">&nbsp;&nbsp;&nbsp;
                                            曲线:&nbsp;<input id="taizhou_quick_plot_line" type="radio"
                                                name="taizhou_quick_plot_type" value="line">&nbsp;&nbsp;&nbsp;
                                            图标:&nbsp;<input id="taizhou_quick_plot_icon" type="radio"
                                                name="taizhou_quick_plot_type" value="scatter_icon">&nbsp;&nbsp;&nbsp;
                                            文字:&nbsp;<input id="taizhou_quick_plot_text" type="radio"
                                                name="taizhou_quick_plot_type" value="scatter_text">&nbsp;&nbsp;&nbsp;
                                            图例:&nbsp;<input id="taizhou_quick_plot_pic" type="radio"
                                                name="taizhou_quick_plot_type" value="scatter_pic">&nbsp;&nbsp;&nbsp;
                                            <input id="forward_canvas" type="button" value="前进" style="float: right;">
                                            <input id="reback_canvas" type="button" value="撤回" style="float: right;">
                                            <input id="flash_canvas" type="button" value="刷新" style="float: right;">

                                        </div>
                                        <!-- 刷新代码 -->
                                        <script>
                                            $('#flash_canvas').click(function () {
                                                // console.log("绘制刷新")
                                                ctx_quick_plot.putImageData(reback_list[0], 0, 0)
                                            })

                                        </script>
                                        <!-- 对应方法的选项 -->
                                        <!-- 等值线的填充 -->
                                        <div id="taizhou_quick_plot_type_view0"
                                            style="display:inline-block;width:100%;height:13%;border: 1px black;border-style:solid solid solid solid ;">
                                            <div style="display:inline-block;width:100%;height: 30%;">
                                                颜色1:&nbsp;<input id="" type="radio" class="select_color_bar_type"
                                                    name="select_color_bar_type" checked="checked"
                                                    value="1">&nbsp;&nbsp;&nbsp;
                                                颜色2:&nbsp;<input id="" type="radio" class="select_color_bar_type"
                                                    name="select_color_bar_type" value="2">&nbsp;&nbsp;&nbsp;
                                                颜色3:&nbsp;<input id="" type="radio" class="select_color_bar_type"
                                                    name="select_color_bar_type" value="3">&nbsp;&nbsp;&nbsp;
                                                颜色4:&nbsp;<input id="" type="radio" class="select_color_bar_type"
                                                    name="select_color_bar_type" value="4">&nbsp;&nbsp;&nbsp;

                                            </div>
                                            <div id="select_color_bar1"
                                                style="display: inline-block;width:100%;height: 60%;">
                                                <div style="display: inline-flex;width: 100%;height:5%"></div>
                                                <div
                                                    style="display: inline-flex;width: 5%;height:40%;background-color:rgb(78, 55, 55);">
                                                </div>
                                                <div
                                                    style="display: inline-flex;width: 5%;height:40%;background-color:rgb(0, 255, 221);">
                                                </div>
                                                <div
                                                    style="display: inline-flex;width: 5%;height:40%;background-color:rgb(150, 69, 197);">
                                                </div>
                                                <div
                                                    style="display: inline-flex;width: 5%;height:40%;background-color:rgb(74, 21, 196);">
                                                </div>
                                                <div
                                                    style="display: inline-flex;width: 5%;height:40%;background-color:rgb(214, 235, 96);">
                                                </div>
                                                <div
                                                    style="display: inline-flex;width: 5%;height:40%;background-color:red;">
                                                </div>

                                            </div>
                                            <div id="select_color_bar2" style="display: none;width:100%;height: 60%;">
                                                <div style="display: inline-flex;width: 100%;height:5%"></div>


                                            </div>
                                            <div id="select_color_bar3" style="display: none;width:100%;height: 60%;">
                                                <div style="display: inline-flex;width: 100%;height:5%"></div>


                                            </div>
                                            <div id="select_color_bar4" style="display: none;width:100%;height: 60%;">
                                                <div style="display: inline-flex;width: 100%;height:5%"></div>


                                            </div>
                                            <script type="text/javascript">
                                                $('input[type=radio][name=select_color_bar_type]').click(function () {
                                                    console.log($('input[type=radio][name=select_color_bar_type]').val(), this.value)
                                                    if (this.value == '1') {
                                                        console.log("开始你的业务逻辑")
                                                    }
                                                    else if (this.value == '2') {
                                                        $('#select_color_bar1').css("display", "none")
                                                        $('#select_color_bar2').css("display", "inline-block")
                                                        $('#select_color_bar3').css("display", "none")
                                                        $('#select_color_bar4').css("display", "none")
                                                        var color_bar = ['red', 'blue', 'green', 'black']
                                                        $('#select_color_bar2').html(" ")
                                                        var add_blank_div = document.createElement("div")
                                                        add_blank_div.style.display = "inline-flex"
                                                        add_blank_div.style.width = "100%"
                                                        add_blank_div.style.height = "5%"
                                                        $('#select_color_bar2').append(add_blank_div)
                                                        for (i = 0; i < color_bar.length; i++) {
                                                            var add_div = document.createElement('div')
                                                            add_div.style.display = "inline-flex"
                                                            add_div.style.width = "5%"
                                                            add_div.style.height = "40%"
                                                            add_div.style.backgroundColor = color_bar[i]
                                                            $('#select_color_bar2').append(add_div)
                                                        }


                                                    }
                                                    else if (this.value == '3') {
                                                        $('#select_color_bar1').css("display", "none")
                                                        $('#select_color_bar2').css("display", "none")
                                                        $('#select_color_bar3').css("display", "inline-block")
                                                        $('#select_color_bar4').css("display", "none")
                                                        var color_bar = ['red', 'blue', 'green', 'black', 'yellow', 'orange']
                                                        $('#select_color_bar3').html(" ")
                                                        var add_blank_div = document.createElement("div")
                                                        add_blank_div.style.display = "inline-flex"
                                                        add_blank_div.style.width = "100%"
                                                        add_blank_div.style.height = "5%"
                                                        $('#select_color_bar3').append(add_blank_div)
                                                        for (i = 0; i < color_bar.length; i++) {
                                                            var add_div = document.createElement('div')
                                                            add_div.style.display = "inline-flex"
                                                            add_div.style.width = "5%"
                                                            add_div.style.height = "40%"
                                                            add_div.style.backgroundColor = color_bar[i]
                                                            $('#select_color_bar3').append(add_div)
                                                        }


                                                    }
                                                    else if (this.value == '4') {

                                                    }

                                                })
                                            // $('.select_color_bar_type').click(function (){
                                            //    console.log($('.select_color_bar_type').val())
                                            // })
                                            </script>

                                        </div>
                                        <div id="taizhou_quick_plot_type_view1"
                                            style="display:none;width:100%;height:13%;border: 3px solid black">
                                            标识:&nbsp;<input id="plot_text_content" type="text" placeholder="请输入线标识"
                                                value="" style="width: 10%;">
                                            线宽:&nbsp;<input id="plot_text_size" type="number" min="0" placeholder="3"
                                                value="3" style="width: 6%;">
                                            线首:&nbsp;<input id="plot_text_start" type="checkbox" value="0"
                                                checked="checked">
                                            线尾:&nbsp;<input id="plot_text_end" type="checkbox" value="0"
                                                checked="checked">
                                            行距:&nbsp;<input id="plot_text_clomn" type="number" min="0" placeholder="50"
                                                value="50" style="width: 6%;">
                                            列距:&nbsp;<input id="plot_text_row" type="number" min="0" placeholder="10"
                                                value="10" style="width: 6%;">

                                        </div>
                                        <div id="taizhou_quick_plot_type_view2"
                                            style="display:none;width:100%;height:13%;border: 3px solid black">
                                            <img class="icon_scatter" src="static/src/icon/35到37度.png"
                                                style="width:50px;height:50px">
                                            <img class="icon_scatter" src="static/src/icon/6-8级大风.png"
                                                style="width:50px;height:50px">
                                            <img class="icon_scatter" src="static/src/icon/40度以上.png"
                                                style="width:50px;height:50px">
                                            <img class="icon_scatter" src="static/src/icon/7-9级大风.png"
                                                style="width:50px;height:50px">
                                            <img class="icon_scatter" src="static/src/icon/7~9级雷雨大风.png"
                                                style="width:50px;height:50px">

                                        </div>
                                        <script>
                                            var el = window.document.body; //声明一个变量，默认值为body
                                            var select_icon_img = []
                                            window.document.body.onmouseover = function (event) {
                                                el = event.target; //鼠标每经过一个元素，就把该元素赋值给变量el
                                                var class_name = el.className
                                                el.addEventListener("click", function () {
                                                    if (class_name == 'icon_scatter') {
                                                        $('.icon_scatter').css("border", "0px")
                                                        el.setAttribute("border", "3px")
                                                        el.style.border = "3px solid red"
                                                        select_icon_img = []
                                                        select_icon_img.push(el)
                                                        console.log(el.className)

                                                    }


                                                })

                                            }

                                        </script>
                                        <div id="taizhou_quick_plot_type_view3"
                                            style="display:none;width:100%;height:13%;border: 3px solid black">
                                            内容:&nbsp;<input id="taizhou_quick_plot_text_content" placeholder="请输入文字"
                                                value="请输入文字" type="text" style="width: 40%;">
                                            颜色:&nbsp;<input type="radio" value="0">
                                            大小:&nbsp;<input type="number" max="10" min="0" placeholder="3"
                                                style="width: 6%;">

                                        </div>
                                        <div id="taizhou_quick_plot_type_view4"
                                            style="display:none;width:100%;height:13%;border: 3px solid black">
                                            <!-- 添加颜色的radio -->
                                            <div id="color_select_list"
                                                style="display: inline-block;width:100%;height: 40%; "></div>
                                            <div style="width:100%;height: 10%; "></div>

                                            &nbsp;<input type="button" value="绘制" onclick="color_bar_plot()"
                                                style="width: 10%;height: 35%;float: right;">
                                            &nbsp;<input id="color_bar_add" type="button" value="添加"
                                                onclick="color_bar_add()" style="width: 10%;height: 35%;float: right;">
                                            &nbsp;<input id="color_bar_del" type="button" value="删除"
                                                onclick="color_bar_del()" style="width: 10%;height: 35%;float: right;">

                                        </div>
                                        <script>
                                            // 颜色色戒的核心代码
                                            var data_color_bar = {
                                                "color": [],
                                                "text": []
                                            }
                                            function color_bar_add() {
                                                console.log("添加color")
                                                var color_style = $("input[name='selected_color']:checked").val()
                                                var add_radio = document.createElement('input')
                                                add_radio.style.width = "8%"
                                                add_radio.style.height = "80%"
                                                add_radio.style.backgroundColor = color_style
                                                // color_bar_list.push(color_style)
                                                // add_radio.
                                                add_radio.style.display = "inline-block"
                                                add_radio.style.border = "1px solid black"
                                                add_radio.setAttribute("class", "color_bar")
                                                add_radio.setAttribute("type", "text")

                                                $('#color_select_list').append(add_radio)
                                            }
                                            function color_bar_del() {
                                                $('#color_select_list').children().last().remove()
                                                data_color_bar.text.pop()
                                                data_color_bar.color.pop()
                                            }
                                            function color_bar_plot() {
                                                var bar_length = $('#color_select_list').children().length
                                                $(".color_bar").each(function (index, el) {
                                                    data_color_bar.text[index] = el.value;
                                                    data_color_bar.color[index] = el.style.backgroundColor;
                                                });
                                                for (i = 0; i < data_color_bar.color.length; i++) {
                                                    ctx_quick_plot.fillStyle = data_color_bar.color[i]
                                                    ctx_quick_plot.fillRect(160, 460 + i * 30, 80, 30)
                                                    ctx_quick_plot.fillText(data_color_bar.text[i], 160 + 80 + 8, 460 + i * 30 + 15)
                                                }
                                            }

                                        </script>
                                        <script type="text/javascript">
                                            var taizhou_quick_plot_type = $("input[name='taizhou_quick_plot_type']:checked").val()

                                            // 前端绘图模块的
                                            $('#taizhou_quick_plot_contour').click(function () {
                                                $('#taizhou_quick_plot_type_view0').attr("style", "display:inline-block;width:100%;height:13%;border: 3px solid black");
                                                $('#taizhou_quick_plot_type_view1').attr("style", "display:none;width:100%;height:13%;border: 3px solid black");
                                                $('#taizhou_quick_plot_type_view2').attr("style", "display:none;width:100%;height:13%;border: 3px solid black");
                                                $('#taizhou_quick_plot_type_view3').attr("style", "display:none;width:100%;height:13%;border: 3px solid black");
                                                $('#taizhou_quick_plot_type_view4').attr("style", "display:none;width:100%;height:13%;border: 3px solid black");
                                            })
                                            $('#taizhou_quick_plot_line').click(function () {
                                                $('#taizhou_quick_plot_type_view0').attr("style", "display:none;width:100%;height:13%;border: 3px solid black");
                                                $('#taizhou_quick_plot_type_view1').attr("style", "display:inline-block;width:100%;height:13%;border: 3px solid black");
                                                $('#taizhou_quick_plot_type_view2').attr("style", "display:none;width:100%;height:13%;border: 3px solid black");
                                                $('#taizhou_quick_plot_type_view3').attr("style", "display:none;width:100%;height:13%;border: 3px solid black");
                                                $('#taizhou_quick_plot_type_view4').attr("style", "display:none;width:100%;height:13%;border: 3px solid black");
                                            })
                                            $('#taizhou_quick_plot_icon').click(function () {
                                                $('#taizhou_quick_plot_type_view0').attr("style", "display:none;width:100%;height:13%;border: 3px solid black");
                                                $('#taizhou_quick_plot_type_view1').attr("style", "display:none;width:100%;height:13%;border: 3px solid black");
                                                $('#taizhou_quick_plot_type_view2').attr("style", "display:inline-block;width:100%;height:13%;border: 3px solid black");
                                                $('#taizhou_quick_plot_type_view3').attr("style", "display:none;width:100%;height:13%;border: 3px solid black");
                                                $('#taizhou_quick_plot_type_view4').attr("style", "display:none;width:100%;height:13%;border: 3px solid black");
                                            })
                                            $('#taizhou_quick_plot_text').click(function () {
                                                $('#taizhou_quick_plot_type_view0').attr("style", "display:none;width:100%;height:13%;border: 3px solid black");
                                                $('#taizhou_quick_plot_type_view1').attr("style", "display:none;width:100%;height:13%;border: 3px solid black");
                                                $('#taizhou_quick_plot_type_view2').attr("style", "display:none;width:100%;height:13%;border: 3px solid black");
                                                $('#taizhou_quick_plot_type_view3').attr("style", "display:inline-block;width:100%;height:13%;border: 3px solid black");
                                                $('#taizhou_quick_plot_type_view4').attr("style", "display:none;width:100%;height:13%;border: 3px solid black");
                                            })
                                            $('#taizhou_quick_plot_pic').click(function () {
                                                $('#taizhou_quick_plot_type_view0').attr("style", "display:none;width:100%;height:13%;border: 3px solid black");
                                                $('#taizhou_quick_plot_type_view1').attr("style", "display:none;width:100%;height:13%;border: 3px solid black");
                                                $('#taizhou_quick_plot_type_view2').attr("style", "display:none;width:100%;height:13%;border: 3px solid black");
                                                $('#taizhou_quick_plot_type_view3').attr("style", "display:none;width:100%;height:13%;border: 3px solid black");
                                                $('#taizhou_quick_plot_type_view4').attr("style", "display:inline-block;width:100%;height:13%;border: 3px solid black");
                                            })



                                        </script>
                                        <script type="text/javascript" src='static/js/canvas_quick_plot.js'></script>
                                    </div>
                                </div>
                            </div>










                        </div>
                        <div class="tab-pane" id="panel-4"
                            style="width:100%;height:100%;background-color:rgb(8, 116, 167)">
                            <p>
                                帮助
                            </p>
                        </div>
                        <div class="tab-pane" id="panel-5"
                            style="width:100%;height:100%;background-color:white;overflow: auto ;">
                            <div
                                style="display:flex;flex-wrap: wrap;align-content:flex-start;width:100%;height:100%;justify-content: center;align-items: center;">
                                <a href="http://www.baidu.com" target="_Blank"
                                    style="display:inline-block;width:24.5%;height:25%;border:3px solid black;background-image: url(static/src/渔场.png);font-size: 25px;color:red;text-align:center;line-height: 230px; ">百度</a>
                                <!-- 控制字符在8个汉字之内 -->
                                <a href="http://www.baidu.com" target="_Blank"
                                    style="display:inline-block;width:24.5%;height:25%;border:3px solid black;background-image: url(static/src/温度.png);font-size: 25px;color:red;text-align:center;line-height: 230px; ">台风</a>
                                <a href="http://www.baidu.com" target="_Blank"
                                    style="display:inline-block;width:24.5%;height:25%;border:3px solid black;background-image: url(static/src/平台.png);font-size: 25px;color:red;text-align:center;line-height: 230px; ">气候</a>
                                <a href="http://www.baidu.com" target="_Blank"
                                    style="display:inline-block;width:24.5%;height:25%;border:3px solid black;background-image: url(static/src/预报.png);font-size: 25px;color:red;text-align:center;line-height: 230px; ">中央台</a>




                            </div>
                        </div>

                    </div>



                </div>


            </div>




            <!-- 预览界面 -->
            <div style="width: 50%; height: 100%;overflow: hidden;">
                <!-- 产品图片 -->
                <div id="product_view"
                    style="background-color:rgb(239, 243, 237); width: 100%; height: 100%;">
                    <!-- 文件头 -->
                    <div style="height:27%;width:100%;position: relative;background-color:white;">
                        <div
                            style="top:30%;height:10%;width:100%;position: absolute;text-align: center;font-size:50px ;font-family:'宋体';color:red">
                            一周天气预测(样板)
                        </div>
                        <div
                            style="top:60%;height:10%;width:100%;position: absolute;text-align: center;font-size:20px ;font-family:'宋体';">
                            第15期
                        </div>
                        <div
                            style="top:80%;;height:10%;width:100%;position: absolute;text-align: center;font-size:20px ;font-family:'宋体';">
                            台州市气象局
                        </div>
                        <div
                            style="top:80%;left:10% ;height:10%;width:100%;position: absolute;font-size:20px ;font-family:'宋体';">
                            2022年3月01日19时
                        </div>
                        <div
                            style="top:65%;left:80%;height:10%;width:100%;position: absolute;font-size:20px ;font-family:'宋体';">
                            撰稿人:翁之梅
                        </div>
                        <div
                            style="top:80%;left:80%;height:10%;width:100%;position: absolute;font-size:20px ;font-family:'宋体';">
                            签发人:高丽
                        </div>
                        <div style="top:95%;left:8%;height:1%;width:88%;;position: absolute;border: 2px solid red;">
                        </div>

                    </div>
                    <!-- 文件段落 -->

                    <div
                        style="display:flex; justify-content:center align-items:center;height:auto;width:100%;background-color:white;font-size:20px ;font-family:'宋体';color:black;">
                        <div style="width: 10%;"></div>
                        <div style="width:80%;">
                            <p
                                style=";width:100% ;line-height:50px;font-size:25px ;font-family:'宋体';color:black;text-align: center;font-weight:bold">
                                本周前期天气阴沉，周后期强冷空气影响转晴冷天气
                            </p>
                            <p style=";width:100%;font-size:20px ;font-family:'宋体';color:black;">
                                一、短期预报
                            </p>
                            <p style="text-indent:2em;width:100% ;line-height:50px;;font-size:20px">
                                本周前期天气阴沉，周后期强冷空气影响转晴冷天气，全市有严重冰冻。今天、明天阴有分散性小雨，最高气温12～14度；后天多云到阴，夜里～周四受强冷空气影响有明显降温、大风和弱雨雪过程。，全市有严重冰冻。今天、明天阴有分散性小雨，最高气温12～14度；后天多云到阴，夜里～周四受强冷空气影响有明显降温、大风和弱雨雪过程。
                                本周前期天气阴沉，周后期强冷空气影响转晴冷天气，全市有严重冰冻。今天、明天阴有分散性小雨，最高气温12～14度；后天多云到阴，夜里～周四受强冷空气影响有明显降温、大风和弱雨雪过程。，全市有严重冰冻。今天、明天阴有分散性小雨，最高气温12～14度；后天多云到阴，夜里～周四受强冷空气影响有明显降温、大风和弱雨雪过程。
                            </p>

                        </div>
                    </div>
                    <!-- 文档列表  -->
                    <div
                        style="display:flex; justify-content:center align-items:center;height:auto;width:100%;background-color:white;font-size:20px ;font-family:'宋体';color:black;line-height:50px;">
                        <div style="width: 10%;"></div>
                        <div style="width:80%;">
                            <p style=";width:100%;font-size:20px ;font-family:'宋体';color:black;;font-weight:bold">
                                台州市主城区具体天气预报如下：
                            </p>
                            <div
                                style="display:inline-block;text-indent:1.5em;width:100%;height: 40% ;line-height:50px;;font-size:20px;">
                                <p style="float:left;line-height:40px;">
                                    4日（周一）：阴，部分地区有时有小雨区有时
                                </p>
                                <p style="float:right;line-height:40px;">
                                    9～14度
                                </p>
                                <p style="float:left;line-height:40px;">
                                    4日（周一）：阴，部分地区有时有小雨区有时
                                </p>
                                <p style="float:right;line-height:40px;">
                                    9～14度
                                </p>
                                <p style="float:left;line-height:40px;">
                                    4日（周一）：阴，部分地区有时有小雨区有时
                                </p>
                                <p style="float:right;line-height:40px;">
                                    9～14度
                                </p>
                                <p style="float:left;line-height:40px;">
                                    4日（周一）：阴，部分地区有时有小雨区有时
                                </p>
                                <p style="float:right;line-height:40px;">
                                    9～14度
                                </p>

                            </div>



                        </div>
                    </div>
                    <!-- 文档图片  单图 -->


                    <!-- 文档结尾 -->



                </div>
                <!-- 预览界面数据交互的核心代码 -->
                <script type="text/javascript" src='static/js/save_and_vue.js'></script>
                <script src='static/js/taizhou_village.js'> </script>
                <script>
                    // id为product_view的数据交互渲染函数
                    function product_view_show(type) {
                        if (type == "plot_self") {
                            console.log("---------------绘图--------------------------")
                            $('#product_view').html(" ")
                            var self_plot_div = document.createElement('div')
                            self_plot_div.style = "width:100%;height:70%;"
                            self_plot_div.id = "self_plot_div"
                            $('#product_view').append(self_plot_div)

                            var analyze_div = document.createElement('div')
                            analyze_div.style = "display:inline-flex;width:100%;height:30%;overflow:auto"
                            canvas_bar = document.createElement('div')
                            canvas_bar.style = "width:60%;height:100%;overflow:auto"
                            canvas_bar.id = "canvas_bar"
                            analyze_div.append(canvas_bar)
                            // 表格数据
                            var table_div = document.createElement('div');
                            table_div.style = "width:40%;height:100%;overflow:auto"
                            var table = document.createElement('table');
                            table.setAttribute("class", "table table-bordered")

                            var caption = document.createElement('caption')
                            caption.innerText = "乡镇排行"
                            table_div.append(table)
                            table.append(caption)
                            table.innerHTML = "<thead><tr><th>排名</th><th>名称</th><th>降水</th></tr></thead><tbody>\
                                                                                                                                <tr><td>1</td><td>坎门</td><td>30mm</td></tr>\
                                                                                                                                <tr><td>2</td><td>淡竹</td><td>15mm</td></tr>\
                                                                                                                                <tr><td>3</td><td>淡竹</td><td>15mm</td></tr>\
                                                                                                                                <tr><td>3</td><td>淡竹</td><td>15mm</td></tr>\
                                                                                                                                <tr><td>3</td><td>淡竹</td><td>15mm</td></tr>\
                                                                                                                                <tr><td>3</td><td>淡竹</td><td>15mm</td></tr>\
                                                                                                                                </tbody>"

                            analyze_div.append(table_div)
                            $('#product_view').append(analyze_div)
                            var chartDom = document.getElementById('canvas_bar');
                            var myChart_bar = echarts.init(chartDom);
                            var option;

                            option = {
                                tooltip: {
                                    trigger: 'axis',
                                    axisPointer: {
                                        type: 'cross'
                                    }
                                },
                                toolbox: {
                                    feature: {
                                        dataView: { show: true, readOnly: false },
                                        restore: { show: true },
                                        saveAsImage: { show: true }
                                    }
                                },
                                xAxis: {
                                    type: 'category',
                                    data: ['仙居', '玉环', '三门', '临海', '椒江', '临海', '黄岩']
                                },
                                yAxis: {
                                    type: 'value'
                                },
                                series: [
                                    {
                                        data: [120, 200, 150, 80, 70, 110, 130],
                                        type: 'bar'
                                    }
                                ]
                            };

                            option && myChart_bar.setOption(option);
                            // 添加表格数据
                            var csrf = $('input[name="csrfmiddlewaretoken"]').val();
                            $.ajax({
                                url: "upload_selfplot_data",  // 请求的地址
                                type: "post",  // 请求方式
                                data: {
                                    "plot_self_data": JSON.stringify(data_canvas),
                                    'csrfmiddlewaretoken': csrf
                                },
                                dataType: "json",
                                success: function (data) {
                                    // 得到请求的数据
                                    var plotImg = new Image();
                                    plotImg.src = data.img
                                    plotImg.style = "width:100%;height:100%"
                                    // js构建前端模板
                                    var self_plot_div = document.getElementById('self_plot_div')
                                    self_plot_div.append(plotImg)

                                }


                            })



                        }
                        else if (type == "product_show") {
                            console.log("-------------------------------自定义材料加载----------------------")
                            $('#product_view').html(" ")
                            var product_view = document.getElementById('product_view')
                            product_view.style = "width:97.5%;height:97%;background-color:white;margin:15px"
                            var list_data_all = [
                                {  //# 文件头
                                    "type": "一周天气",
                                    "company": "台州市气象台",
                                    "writer": "翁之梅",
                                    "putter": "高丽",
                                    "index": 15,
                                    "time": 'Wed Mar 01 2022 19:18:00 GMT+0800 (中国标准时间)'
                                },
                                {  //# 文档内容
                                    "type": "段落",
                                    "title": ["本周后期强冷空气影响，全市有严重冰冻", 1, 2, 3],
                                    "subtitle": ["短信内容", 1, 2, 3],
                                    "text": "本周前期天气阴沉，周后期强冷空气影响转晴冷天气，全市有严重冰冻。今天、明天阴有分散性小雨，最高气温12～14度；后天多云到阴，夜里～周四受强冷空气影响有明显降温、大风和弱雨雪过程，预计日平均气温过程降温幅度可达8～10度，后天夜里部分地区有小雨夹雪或雪，山区有小雪；周五～周日天气晴冷，其中周五、周六早晨北部地区降至零下6～零下8度，山区零下9～零下12度，其它地区零下4～零下6度，全市有严重冰冻，须注意防寒保暖。另外，周二沿海风力8～9级，周三夜里～周四沿海和内陆分别有8～10级和6～8级偏北大风。"
                                },
                                {  //# 文档列表
                                    "type": "列表",
                                    "title": ["台州市主城区具体天气预报如下：", 1, 2, 3],
                                    "subtitle": ["短信内容", 1, 2, 3],
                                    "text_list1": "4日（周一）：阴，部分地区有时有小雨              9～14度",
                                    "text_list2": "4日（周一）：阴，部分地区有时有小雨        9～14度",
                                    "text_list3": "4日（周一）：阴，部分地区有时有小雨        9～14度",
                                    "text_list4": "4日（周一）：阴，部分地区有时有小雨        9～14度",
                                    "text_list5": "4日（周一）：阴，部分地区有时有小雨        9～14度",
                                    "text_list6": "4日（周一）：阴，部分地区有时有小雨        9～14度",

                                },
                                {  //# 图片列表
                                    "type": "单图",
                                    "title": "台州市气象台",
                                    "png": 'src/pre_test.png'
                                },
                                {
                                    "type": "文件尾",
                                    "title1": "微信宣传",
                                    "png1": 'src/二维码.png',
                                    "title2": "气象台宣传",
                                    "png2": 'src/二维码.png',
                                    "title3": "浙政钉宣传",
                                    "png3": 'src/二维码.png',
                                    "service_name": '宋伟2、李渊、小王、张三',
                                    "service_unity": '气象台、玉环市气象局、水利局、气象台、玉环市气象局、水利局、气象台、玉环市气象局、水利局、玉环市气象局、水利局、气象台、玉环市气象局、水利局、玉环市气象局、水利局、气象台、玉环市气象局、水利局、玉环市气象局、水利局、气象台、玉环市气象局、水利局',
                                    "recive_unity": '气象台、玉环市气象局、水利局、玉环市气象局、水利局'
                                }

                            ]
                            $('#product_view').html(" ")


                            for (const i of list_data_all) {
                                if (i['type'] == '一周天气预测') {
                                    head_div(i)
                                }
                                else if (i['type'] == '单图') {
                                    // console.log(i)
                                    png_div(i)
                                }
                                else if (i['type'] == '列表') {
                                    // console.log(i)
                                    list_div(i)
                                }
                                else if (i['type'] == '文件尾') {
                                    // console.log(i)
                                    foot_div(i)
                                }
                                else if (i['type'] == '段落') {
                                    // console.log(i)
                                    text_div(i)
                                }

                            }



                        }
                        else if (type == "tool_history") {
                            console.log("历史数据的加载")
                            $('#product_view').html(" 历史数据的加载")
                            var product_view = document.getElementById('product_view')
                            product_view.style = "width:97.5%;height:97%;background-color:white;margin:15px"
                            var list_data_all = [
                                {  //# 文件头
                                    "type": "一周天气预测",
                                    "company": "台州市气象台",
                                    "writer": "翁之梅",
                                    "putter": "高丽",
                                    "index": 15,
                                    "time": 'Wed Mar 01 2022 19:18:00 GMT+0800 (中国标准时间)'
                                },
                                {  //# 文档内容
                                    "type": "段落",
                                    "title": ["本周后期强冷空气影响，全市有严重冰冻", 1, 2, 3],
                                    "subtitle": ["短信内容", 1, 2, 3],
                                    "text": "本周前期天气阴沉，周后期强冷空气影响转晴冷天气，全市有严重冰冻。今天、明天阴有分散性小雨，最高气温12～14度；后天多云到阴，夜里～周四受强冷空气影响有明显降温、大风和弱雨雪过程，预计日平均气温过程降温幅度可达8～10度，后天夜里部分地区有小雨夹雪或雪，山区有小雪；周五～周日天气晴冷，其中周五、周六早晨北部地区降至零下6～零下8度，山区零下9～零下12度，其它地区零下4～零下6度，全市有严重冰冻，须注意防寒保暖。另外，周二沿海风力8～9级，周三夜里～周四沿海和内陆分别有8～10级和6～8级偏北大风。"
                                },
                                {  //# 文档列表
                                    "type": "列表",
                                    "title": ["台州市主城区具体天气预报如下：", 1, 2, 3],
                                    "subtitle": ["短信内容", 1, 2, 3],
                                    "text_list1": "4日（周一）：阴，部分地区有时有小雨              9～14度",
                                    "text_list2": "4日（周一）：阴，部分地区有时有小雨        9～14度",
                                    "text_list3": "4日（周一）：阴，部分地区有时有小雨        9～14度",
                                    "text_list4": "4日（周一）：阴，部分地区有时有小雨        9～14度",
                                    "text_list5": "4日（周一）：阴，部分地区有时有小雨        9～14度",
                                    "text_list6": "4日（周一）：阴，部分地区有时有小雨        9～14度",

                                },
                                {  //# 图片列表
                                    "type": "单图",
                                    "title": "台州市气象台",
                                    "png": 'src/pre_test.png'
                                },
                                {
                                    "type": "文件尾",
                                    "title1": "微信宣传",
                                    "png1": 'src/二维码.png',
                                    "title2": "气象台宣传",
                                    "png2": 'src/二维码.png',
                                    "title3": "浙政钉宣传",
                                    "png3": 'src/二维码.png',
                                    "service_name": '宋伟2、李渊、小王、张三',
                                    "service_unity": '气象台、玉环市气象局、水利局、气象台、玉环市气象局、水利局、气象台、玉环市气象局、水利局、玉环市气象局、水利局、气象台、玉环市气象局、水利局、玉环市气象局、水利局、气象台、玉环市气象局、水利局、玉环市气象局、水利局、气象台、玉环市气象局、水利局',
                                    "recive_unity": '气象台、玉环市气象局、水利局、玉环市气象局、水利局'
                                }

                            ]
                            $('#product_view').html(" ")


                            for (const i of list_data_all) {
                                if (i['type'] == '一周天气预测') {
                                    head_div(i)
                                }
                                else if (i['type'] == '单图') {
                                    // console.log(i)
                                    png_div(i)
                                }
                                else if (i['type'] == '列表') {
                                    // console.log(i)
                                    list_div(i)
                                }
                                else if (i['type'] == '文件尾') {
                                    // console.log(i)
                                    foot_div(i)
                                }
                                else if (i['type'] == '段落') {
                                    // console.log(i)
                                    text_div(i)
                                }

                            }

                        }
                        else if (type == "tool_prodict_product") {
                            console.log("市台自订正")
                            $('#product_view').html("")
                            var product_view = document.getElementById('product_view')
                            product_view.style = "width:97.5%;height:97%;background-color:white;margin:15px"
                            var prodict_head_div = document.createElement('div')
                            prodict_head_div.style = "width: 100%;height: 5%;background-color:rgb(220, 222, 226);"
                            var head_h = document.createElement('h1')
                            head_h.style = "margin:0;text-align:center;background-color:rgb(45, 104, 221);width:15%;height:100%;border-top-left-radius: 5px;border-top-right-radius:5px;font-size: 23px;font-weight:900;font-family:'宋体';color:white;padding-top:1.5%"
                            head_h.innerText = "市台订正"
                            prodict_head_div.append(head_h)

                            var prodict_body_div = document.createElement('div')
                            prodict_body_div.style = "display: inline-flex;width: 100%;height: 80%;;margin:15px"

                            var self_png_show = document.createElement('div')
                            self_png_show.style = style = " width: 80%;height: 100%;overflow-x: hidden;overflow-y: scroll;"
                            self_png_show.setAttribute("class", "scrollbar_self")


                            self_png_show.id = "self_png_show"

                            var body_ul_div = document.createElement('div')
                            body_ul_div.style = style = style = "width: 18%;height: 100%;overflow-x: hidden;overflow-y: scroll;"
                            body_ul_div.setAttribute("class", "scrollbar_self")
                            body_ul_div.id = "body_ul_div"

                            var body_ul = document.createElement('ul')
                            body_ul.id = "ul_self"
                            body_ul.setAttribute('class', 'list-group')
                            body_ul.style = "width: 100%;height: 100%"
                            body_ul_div.append(body_ul)
                            prodict_body_div.append(self_png_show, body_ul_div)


                            var prodict_foot_div = document.createElement('div')
                            prodict_foot_div.style = "width: 100%;height: 10%;;text-align:center;vertical-align: middle;align-items: center;"

                            var foot_input1 = document.createElement('input')
                            foot_input1.id = "go_on"
                            foot_input1.style = "border:2px;width: 5%;height: 50%;text-align:center;vertical-align: middle;align-items: center;background-image: url(static/src/前进.png);background-size: 100%;background-repeat: no-repeat;"
                            foot_input1.setAttribute("type", "button")
                            // foot_input1.setAttribute("value", "前进")

                            var foot_input2 = document.createElement('input')
                            foot_input2.id = "go_back"
                            foot_input2.style = "border:2px;width: 5%;height: 50%;text-align:center;vertical-align: middle;align-items: center;background-image: url(static/src/后退.png);background-size: 100%;background-repeat: no-repeat;"
                            foot_input2.setAttribute("type", "button")
                            // foot_input2.setAttribute("value", "后退")

                            // var foot_input3 = document.createElement('input')
                            // foot_input3.name = "tool_2_last"
                            // foot_input3.style = "width: 10%;height: 50%;text-align:center;vertical-align: middle;align-items: center;"
                            // foot_input3.setAttribute("type", "button")
                            // foot_input3.setAttribute("value", "导出为git")
                            // prodict_foot_div.append(foot_input1, foot_input2, foot_input3)
                            prodict_foot_div.append(foot_input2, foot_input1)

                            product_view.append(prodict_head_div, prodict_body_div, prodict_foot_div)

                            foot_input1.addEventListener("click", function () {
                                console.log("单机前进按钮")
                                var select_length = $("input:radio[name='ul_png']").length
                                var select_item = $("input:radio[name='ul_png']:checked")
                                var select_data = $("input:radio[name='ul_png']:checked").attr("id").toString()
                                var select_id = parseInt(select_data[3]) + 1
                                var select_show_id = "#self_" + select_id.toString()
                                // console.log($('input:radio[name="ul_png"]:checked').attr("id")) 
                                console.log(select_length)
                                if (select_id <= select_length) {
                                    // $("#self_png_show").animate({scrollTop:$(select_show_id).offset().top},100);
                                    $("#a_" + select_id.toString())[0].click()

                                    var next_id = "#in_" + select_id.toString()
                                    $("input:radio[name='ul_png']:checked").attr("checked", false)
                                    $(next_id).attr("checked", true)
                                }
                                else {
                                    alert("到头了")
                                }

                            })

                            foot_input2.addEventListener("click", function () {
                                console.log("单机前进按钮")
                                var select_length = $("input:radio[name='ul_png']").length
                                var select_item = $("input:radio[name='ul_png']:checked")
                                var select_data = $("input:radio[name='ul_png']:checked").attr("id").toString()
                                var select_id = parseInt(select_data[3]) - 1
                                var select_show_id = "#self_" + select_id.toString()

                                if (select_id >= 1) {
                                    // $("#self_png_show").animate({scrollTop:$(select_show_id).offset().top},100);
                                    $("#a_" + select_id.toString())[0].click()

                                    var next_id = "#in_" + select_id.toString()
                                    $("input:radio[name='ul_png']:checked").attr("checked", false)
                                    $(next_id).attr("checked", true)
                                }
                                else {
                                    alert("到头了")
                                }

                            })



                            // 加载ajax
                            var time_plot_taizhou = $("input[name='tz_self_time']:checked").val()
                            var type_plot_taizhou = $("input[name='tz_self']:checked").val()
                            var csrf = $('input[name="csrfmiddlewaretoken"]').val();
                            console.log(time_plot_taizhou, type_plot_taizhou)

                            $.ajax({
                                url: "upload_select_taizhou_data",  // 请求的地址
                                type: "post",  // 请求方式
                                timeout: 2500000, //设置延迟上限
                                data: {
                                    'csrfmiddlewaretoken': csrf,
                                    'plot_type': type_plot_taizhou,
                                    'plot_time': time_plot_taizhou
                                },
                                dataType: "json",
                                success: function (data) {
                                    // var show_img_list = $
                                    var server_img_list = data.imd_list
                                    var server_time_list = data.time_list
                                    console.log("ajax请求成功返回的数据", server_time_list, server_img_list)
                                    $("#self_png_show").html(" ")
                                    $("#ul_self").html(" ")
                                    for (i = 0; i < server_img_list.length; i++) {
                                        // 图部分
                                        var img_item = new Image()
                                        img_item.id = "self_" + (i + 1).toString()
                                        img_item.src = server_img_list[i]
                                        img_item.style.width = "100%"
                                        img_item.style.height = "100%"

                                        $('#self_png_show').append(img_item)
                                        var a_item = document.createElement("a")
                                        a_item.id = "a_" + (i + 1).toString()
                                        a_item.setAttribute("class", "list-group-item")
                                        a_item.setAttribute("href", "#self_" + (i + 1).toString())
                                        // a_item.innerText = "测试"
                                        a_item.innerText = server_time_list[i]
                                        var input_item = document.createElement("input")
                                        input_item.id = "in_" + (i + 1).toString()
                                        input_item.style.display = "none"
                                        input_item.setAttribute("type", "radio")
                                        input_item.setAttribute("name", "ul_png")
                                        if (i == 0) {
                                            input_item.setAttribute("checked", "true")
                                        }
                                        a_item.appendChild(input_item)
                                        var click_item = parseInt(i)
                                        a_item.addEventListener("click", function (click_item) {
                                            console.log(click_item)
                                            $("input:radio[name='ul_png']").attr("checked", false)
                                            a_item.children[0].setAttribute("checked", "true")

                                            // $('#in_'+(i + 1).toString()).attr("checked", true)
                                            var child_len = $("input:radio[name='ul_png']").length
                                            for (j = 0; j < child_len; j++) {
                                                $('#a_' + (j + 1).toString()).attr("style", "color:balck")
                                            }
                                            $('#a_' + (j + 1).toString()).attr("style", "color:red")

                                        })
                                        // $("#ul_self").css("")
                                        $("#ul_self").append(a_item)




                                    }

                                }
                            })


                        }
                        else if (type == "tool_zdz") {
                            // console.log("自动站数据加载")
                            var csrf = $('input[name="csrfmiddlewaretoken"]').val();
                            $.ajax({
                                url: "tool_zdz_date",  // 请求的地址
                                type: "post",  // 请求方式
                                timeout: 25000, //设置延迟上限
                                data: {
                                    'csrfmiddlewaretoken': csrf,
                                    'start_time': $('#datetimepicker_history1').val(),
                                    'end_time': $('#datetimepicker_history2').val()
                                },
                                dataType: "json",
                                success: function (data) {
                                    //日历数据
                                    var day_list = data.day_list
                                    var day_range = data.day_range
                                    //降水数据
                                    var rain_line = data.rain_line
                                    var rain_scatter = JSON.parse(data.rain_scatter)
                                    // // day_range[0] = data.day_list[0][0]
                                    // // day_range[1] = data.day_list[-1][0]
                                    // console.log("zdz--ok",data.rain_img)
                                    $('#product_view').html("")
                                    var product_view = document.getElementById("product_view")
                                    product_view.style = "width:97.5%;height:97%;background-color:rgb(220, 222, 226);;margin:15px"

                                    // 日历模块
                                    var calendar_all = document.createElement('div')
                                    calendar_all.style = "display:inline-flex;width: 97.5%; height: 28%;;background-color:white;;margin:15px"

                                    var calendar_ul = document.createElement('div')
                                    calendar_ul.style = "display:inline-block;width: 39%; height: 95%;;background-color:white;;margin:15px"


                                    var calendar_history = document.createElement('div')
                                    calendar_history.id = "calendar_history"
                                    calendar_history.style = "display:inline-flex;width: 59%; height: 100%;"

                                    calendar_all.append(calendar_ul, calendar_history)

                                    var tabbable = document.createElement('div')
                                    tabbable.setAttribute('class', 'tabbable')
                                    tabbable.id = "tabs-492675"
                                    tabbable.style = "width: 97.5%; height: 50%;;background-color:white;;margin:15px"

                                    var tab_content = document.createElement('div')
                                    tab_content.style = "display: inline-block;width: 100%; height: 90%;"
                                    tab_content.setAttribute('class', 'tab-content')

                                    // 设置说明头

                                    var tabbable_head = document.createElement('div')
                                    tabbable_head.style = "width: 100%; height: 10%;;background-color:rgb(220, 222, 226);"
                                    var tablehead_h = document.createElement('h1')
                                    tablehead_h.style = "margin:0;text-align:center;background-color:rgb(45, 104, 221);width:15%;height:100%;border-top-left-radius: 5px;border-top-right-radius:5px;font-size: 23px;font-weight:900;font-family:'宋体';color:white;padding-top:1.5%"
                                    tablehead_h.innerText = "实况查询"
                                    tabbable_head.append(tablehead_h)


                                    var tabbable_ul = document.createElement('ul')
                                    tabbable_ul.setAttribute("class", "nav nav-tabs")
                                    tabbable_ul.style = "display:inline-block;width: 100%; height: 90%;border:0px"



                                    calendar_ul.append(tabbable_ul)



                                    var tabbable_li1 = document.createElement('li')
                                    tabbable_li1.setAttribute('class', 'active')
                                    tabbable_li1.style = "display:inline-block;width: 50%; height: 48%;"
                                    var tabbable_a1 = document.createElement('a')
                                    tabbable_a1.setAttribute('href', '#panel-883512')
                                    tabbable_a1.setAttribute('data-toggle', 'tab')
                                    tabbable_a1.style = "display:inline-block;width: 85%; height: 80%;background-color:rgb(220, 222, 226);border-radius:15px;margin:10px;background-image: url(static/src/降水量.png);background-size:65%;background-repeat: no-repeat;background-position:50%;"
                                    // tabbable_a1.innerText = "降水"
                                    tabbable_li1.append(tabbable_a1)

                                    var tabbable_li2 = document.createElement('li')
                                    tabbable_li2.style = "display:inline-block;width: 50%; height: 48%;"
                                    var tabbable_a2 = document.createElement('a')
                                    tabbable_a2.setAttribute('href', '#panel-725174')
                                    tabbable_a2.setAttribute('data-toggle', 'tab')
                                    tabbable_a2.style = "display:inline-block;width: 85%; height: 80%;;background-color:rgb(220, 222, 226);border-radius:15px;margin:10px;background-image: url(static/src/大风.png);background-size:65%;background-repeat: no-repeat;background-position:50%;"
                                    // tabbable_a2.innerText = "大风"
                                    tabbable_li2.append(tabbable_a2)

                                    var tabbable_li3 = document.createElement('li')
                                    tabbable_li3.style = "display:inline-block;width: 50%; height: 48%;"
                                    var tabbable_a3 = document.createElement('a')
                                    tabbable_a3.setAttribute('href', '#panel-725173')
                                    tabbable_a3.setAttribute('data-toggle', 'tab')
                                    tabbable_a3.style = "display:inline-block;width: 85%; height: 80%;;background-color:rgb(220, 222, 226);border-radius:15px;margin:10px;background-image: url(static/src/强浓雾.png);background-size:65%;background-repeat: no-repeat;background-position:50%;"
                                    // tabbable_a3.innerText = "能见度"
                                    tabbable_li3.append(tabbable_a3)

                                    var tabbable_li5 = document.createElement('li')
                                    tabbable_li5.style = "display:inline-block;width: 50%; height: 48%;"
                                    var tabbable_a5 = document.createElement('a')
                                    tabbable_a5.setAttribute('href', '#panel-725172')
                                    tabbable_a5.setAttribute('data-toggle', 'tab')
                                    tabbable_a5.style = "display:inline-block;width: 85%; height: 80%;;background-color:rgb(220, 222, 226);border-radius:15px;margin:10px;background-image: url(static/src/大气温度.png);background-size:65%;background-repeat: no-repeat;background-position:50%;"
                                    // tabbable_a5.innerText = "气温"
                                    tabbable_li5.append(tabbable_a5)

                                    var tabbable_li4 = document.createElement('li')

                                    var tabbable_a4 = document.createElement('a')
                                    tabbable_a4.setAttribute('href', '#panel-725171')
                                    tabbable_a4.setAttribute('data-toggle', 'tab')
                                    tabbable_a4.innerText = "日报"
                                    tabbable_a4.id = "a_panel-725171"
                                    //日报的内容不显示
                                    tabbable_a4.style.display = 'none'
                                    tabbable_li4.append(tabbable_a4)

                                    tabbable_ul.append(tabbable_li1, tabbable_li2, tabbable_li3, tabbable_li5, tabbable_li4)

                                    // 降水
                                    var panel_883512 = document.createElement('div')
                                    panel_883512.style = "width: 100%; height: 100%;"
                                    panel_883512.id = "panel-883512"
                                    panel_883512.setAttribute("class", "tab-pane active")

                                    var map_bar = document.createElement('div')
                                    map_bar.id = "map_bar"
                                    map_bar.style = "width: 100%; height: 100%;"

                                    panel_883512.append(map_bar)
                                    tab_content.append(panel_883512)

                                    // 大风
                                    var panel_725174 = document.createElement('div')
                                    panel_725174.setAttribute("class", "tab-pane")
                                    panel_725174.style = "width: 100%; height: 100%;"
                                    panel_725174.id = "panel-725174"

                                    var wind_all = document.createElement('div')
                                    wind_all.style = "display: inline-flex;width: 100%; height: 100%;"

                                    var map_wind = document.createElement('div')
                                    map_wind.id = "map_wind"
                                    map_wind.style = "display: inline-block;width: 60%; height: 100%;"

                                    var table_wind_div = document.createElement('div')
                                    table_wind_div.style = "width: 40%; height:90%;margin:10px;overflow-x: hidden;overflow-y: scroll;"
                                    table_wind_div.setAttribute("class", "scrollbar_self")

                                    var table_wind = document.createElement('table')
                                    table_wind.setAttribute('class', 'table')

                                    var table_head = document.createElement('thead')
                                    table_head.innerHTML = "<tr><th>排序</th><th>测站名称</th><th>站号</th><th>风速</th></tr>"

                                    var table_body = document.createElement('tbody')
                                    table_body.id = "zdz_wind_table"
                                    table_wind.append(table_head, table_body)
                                    table_wind_div.append(table_wind)
                                    wind_all.append(map_wind, table_wind_div)
                                    panel_725174.append(wind_all)
                                    tab_content.append(panel_725174)
                                    tabbable_li2.addEventListener("click", function () {
                                        var csrf = $('input[name="csrfmiddlewaretoken"]').val();
                                        $.ajax({
                                            url: "tool_zdz_wind",  // 请求的地址
                                            type: "post",  // 请求方式
                                            timeout: 25000, //设置延迟上限
                                            data: {
                                                'csrfmiddlewaretoken': csrf
                                            },
                                            dataType: "json",
                                            success: function (data) {
                                                // console.log("返回成功", data)
                                                // 加载大风图 tz_json
                                                var map = echarts.init(document.getElementById('map_wind'), 'light');
                                                //  echarts.registerMap('taizhou',tz_json,{});
                                                $('#zdz_wind_table').html(data.sort_html)
                                                map.setOption({
                                                    title: {
                                                        text: '8级以上大风',
                                                        textStyle: { fontSize: 30 },
                                                    },
                                                    tooltip: {
                                                        trigger: 'item',
                                                        formatter: 'k8505 50(m/s)'
                                                    },
                                                    geo: {
                                                        map: 'taizhou',
                                                        roam: true,
                                                        // tooltip:{borderColor = '#333'}
                                                        itemStyle: {
                                                            color: 'white'
                                                            // areaColor = '#333',
                                                        }


                                                    },
                                                    visualMap: {

                                                        type: "piecewise",
                                                        show: false,
                                                        // orient:'horizontal',
                                                        // type:"continuous",
                                                        // min: 0,
                                                        // max: 200,
                                                        // splitNumber = 5,
                                                        // color: ["rgb(255, 255, 255)",
                                                        // "rgb(255, 238, 255)",
                                                        // "rgb(255, 238, 204)",
                                                        // "rgb(255, 204, 153)",
                                                        // "rgb(255, 204, 102)",
                                                        // "rgb(255, 170, 68)",
                                                        // "rgb(153, 255, 136)",
                                                        // "rgb(0, 255, 85)",
                                                        // "rgb(0, 170, 51)",
                                                        // "rgb(0, 170, 255)",
                                                        // "rgb(17, 136, 204)",
                                                        // "rgb(0, 85, 204)",
                                                        // "rgb(0, 68, 221)",
                                                        // "rgb(0, 0, 221)"],

                                                        right: "5%",
                                                        bottom: "15%",
                                                        padding: 0,
                                                        itemGap: 0,
                                                        textGap: 0,
                                                        textStyle: { fontSize: 8 },
                                                        pieces: [
                                                            { min: 2000, max: 2500, label: '10 到 200', color: "red" },
                                                            { min: 1500, max: 2000, label: '10 到 200', color: "red" },// 不指定 max，表示 max 为无限大（Infinity）。
                                                            { min: 900, max: 1500, label: '10 到 200', color: "red" },
                                                            { min: 310, max: 1000, label: '10 到 200', color: "red" },
                                                            { min: 200, max: 300, label: '10 到 200', color: "red" },
                                                            { min: 10, max: 200, label: '10 到 200', color: "red" },
                                                            { max: 10, min: 5, label: '10 到 200', color: "red" }

                                                        ],

                                                        // categories: ['1', '2', '3', '4', '5','6']

                                                        // inRange: {
                                                        //     color: ['lightskyblue','yellow', 'orangered']
                                                        // }
                                                    },
                                                    // label: {
                                                    //             show: true,
                                                    //             color: "rgba(50, 44, 44, 1)",
                                                    //             formatter: 'K8505'
                                                    //         },
                                                    series: [{
                                                        name: '大风',
                                                        // type: 'effectScatter',
                                                        type: 'scatter',
                                                        // symble:"triangle",
                                                        // symbol: "roundRect",
                                                        // symbolSize:50,
                                                        coordinateSystem: 'geo',
                                                        // itemStyle: {
                                                        //   color: function (params) {
                                                        //       var colorlist = ['black'];
                                                        //       return colorlist[params.dataIndex];
                                                        //   },
                                                        //   symbol: function (params) {
                                                        //     var symbollist = ['path://M10 10L60 10 60 20 20 20 20 40 60 40 60 50 20 50 20 100 10 100 10 10z'];
                                                        //     return symbollist[params.dataIndex];
                                                        // },
                                                        // },
                                                        data: JSON.parse(data.data_wind_list)

                                                        // data: [{
                                                        //     name: "data", value: [121.0, 28.8, 123], url: "url_data",
                                                        //     symbol: 'path://M10 10L50 10 50 20 20 20 20 40 50 40 50 50 20 50 20 100 10 100 10 10z', symbolSize: 15, symbolRotate: 330
                                                        // }]

                                                    }]



                                                });
                                            }
                                        })
                                    })


                                    // 能见度
                                    var panel_725173 = document.createElement('div')
                                    panel_725173.setAttribute("class", "tab-pane")
                                    panel_725173.style = "width: 100%; height: 100%;"
                                    panel_725173.id = "panel-725173"

                                    var see_view_all = document.createElement('div')

                                    see_view_all.style = "display: inline-flex;width: 100%; height: 100%;"

                                    var map_see_view = document.createElement('div')
                                    map_see_view.id = "map_see_view"
                                    map_see_view.style = "width: 60%; height: 100%;"

                                    var table_see_view_div = document.createElement('div')
                                    table_see_view_div.style = "width: 40%; height:90%;margin:10px;overflow-x: hidden;overflow-y: scroll;"
                                    table_see_view_div.setAttribute("class", "scrollbar_self")

                                    var table_see_view = document.createElement('table')
                                    table_see_view.setAttribute('class', 'table')

                                    var table_head = document.createElement('thead')
                                    table_head.innerHTML = "<tr><th>排序</th><th>乡镇</th><th>站点</th><th>能见度</th></tr>"

                                    var table_body = document.createElement('tbody')
                                    table_body.id = "zdz_view_table"
                                    table_see_view.append(table_head, table_body)
                                    table_see_view_div.append(table_see_view)
                                    see_view_all.append(map_see_view, table_see_view_div)
                                    panel_725173.append(see_view_all)
                                    tab_content.append(panel_725173)
                                    tabbable_li3.addEventListener("click", function () {
                                        var csrf = $('input[name="csrfmiddlewaretoken"]').val();
                                        $.ajax({
                                            url: "tool_zdz_view",  // 请求的地址
                                            type: "post",  // 请求方式
                                            timeout: 25000, //设置延迟上限
                                            data: {
                                                'csrfmiddlewaretoken': csrf
                                            },
                                            dataType: "json",
                                            success: function (data) {
                                                // console.log("返回成功", data)
                                                // 加载大风图 tz_json

                                                //  echarts.registerMap('taizhou',tz_json,{});
                                                $('#zdz_view_table').html(data.sort_html)
                                                // 加载能见度图 
                                                var map = echarts.init(document.getElementById('map_see_view'), 'light');
                                                //  echarts.registerMap('taizhou',tz_json,{});
                                                // console.log(data.data_view_list)
                                                map.setOption({
                                                    title: {
                                                        text: '能见度',
                                                        textStyle: { fontSize: 15 },
                                                    },
                                                    tooltip: {
                                                        trigger: 'item',
                                                        formatter: 'k8505 50(m/s)'
                                                    },
                                                    geo: {
                                                        map: 'taizhou',
                                                        roam: true,
                                                        // tooltip:{borderColor = '#333'}
                                                        itemStyle: {
                                                            color: 'white'
                                                            // areaColor = '#333',
                                                        }


                                                    },
                                                    visualMap: {
                                                        type: "piecewise",


                                                        pieces: [
                                                            { min: 200, max: 500, label: '雾', color: 'yellow' },
                                                            { min: 50, max: 200, label: '浓雾', color: 'orange' },
                                                            { max: 50, min: 0, label: '强浓雾', color: 'red' }
                                                        ],
                                                    },
                                                    series: [{
                                                        name: '自动站能见度',
                                                        // type: 'effectScatter',
                                                        type: 'scatter',
                                                        // symble:"triangle",
                                                        // symbol: "roundRect",
                                                        // symbolSize:50,
                                                        coordinateSystem: 'geo',
                                                        // itemStyle: {
                                                        //   color: function (params) {
                                                        //       var colorlist = ['black'];
                                                        //       return colorlist[params.dataIndex];
                                                        //   },
                                                        //   symbol: function (params) {
                                                        //     var symbollist = ['path://M10 10L60 10 60 20 20 20 20 40 60 40 60 50 20 50 20 100 10 100 10 10z'];
                                                        //     return symbollist[params.dataIndex];
                                                        // },
                                                        // },

                                                        data: JSON.parse(data.data_view_list)

                                                    }]



                                                });

                                            }
                                        })
                                    })
                                    //气温
                                    var panel_725172 = document.createElement('div')
                                    panel_725172.setAttribute("class", "tab-pane")
                                    panel_725172.style = "width: 100%; height: 100%;"
                                    panel_725172.id = "panel-725172"

                                    var see_view_all_temp = document.createElement('div')
                                    see_view_all_temp.style = "display: inline-block;width: 100%; height: 100%;"

                                    var maphigt_see_view = document.createElement('div')
                                    maphigt_see_view.id = "maphigt_see_view"
                                    maphigt_see_view.style = "display: inline-block;width: 50%; height: 100%;border 3px solid black;"

                                    var maplow_see_view = document.createElement('div')
                                    maplow_see_view.id = "maplow_see_view"
                                    maplow_see_view.style = "display: inline-block;width: 50%; height:100%;"

                                    see_view_all_temp.append(maphigt_see_view, maplow_see_view)
                                    panel_725172.append(see_view_all_temp)
                                    tab_content.append(panel_725172)
                                    tabbable_li5.addEventListener("click", function () {
                                        var csrf = $('input[name="csrfmiddlewaretoken"]').val();
                                        $.ajax({
                                            url: "tool_zdz_temp",  // 请求的地址
                                            type: "post",  // 请求方式
                                            timeout: 25000, //设置延迟上限
                                            data: {
                                                'csrfmiddlewaretoken': csrf
                                            },
                                            dataType: "json",
                                            success: function (data) {
                                                // console.log("返回成功", data)
                                                // 加载气温
                                                //加载气温
                                                // 高温
                                                var map_high = echarts.init(document.getElementById('maphigt_see_view'), 'light');
                                                //  echarts.registerMap('taizhou',tz_json,{});
                                                console.log(data.data_temp_max)
                                                map_high.setOption({
                                                    title: {
                                                        text: '高温',
                                                        textStyle: { fontSize: 30 },
                                                    },
                                                    tooltip: {
                                                        trigger: 'item',
                                                        formatter: function (params) {
                                                            if (params['componentType'] == 'series') {
                                                                console.log("打印的是", params)
                                                                var lable_data = params['data']['value'][2]
                                                                var lable_station = params['data']['name']
                                                            }
                                                            return lable_station
                                                        }
                                                    },
                                                    geo: {
                                                        map: 'taizhou',
                                                        roam: true,
                                                        // tooltip:{borderColor = '#333'}
                                                        itemStyle: {
                                                            color: 'white'
                                                            // areaColor = '#333',
                                                        }


                                                    },
                                                    label: {
                                                        show: true,
                                                        color: "black",
                                                        fontSize: 14,
                                                        formatter: function (params) {
                                                            if (params['componentType'] == 'series') {
                                                                console.log("打印的是", params)
                                                                var lable_data = params['data']['value'][2]
                                                                var lable_station = params['data']['name']
                                                            }
                                                            return lable_data
                                                        }
                                                    },
                                                    series: [{
                                                        name: '高温',
                                                        // type: 'effectScatter',
                                                        type: 'scatter',
                                                        // symble:"triangle",
                                                        // symbol: "roundRect",
                                                        symbolSize: 5,
                                                        color: 'red',
                                                        coordinateSystem: 'geo',
                                                        // itemStyle: {
                                                        //   color: function (params) {
                                                        //       var colorlist = ['black'];
                                                        //       return colorlist[params.dataIndex];
                                                        //   },
                                                        //   symbol: function (params) {
                                                        //     var symbollist = ['path://M10 10L60 10 60 20 20 20 20 40 60 40 60 50 20 50 20 100 10 100 10 10z'];
                                                        //     return symbollist[params.dataIndex];
                                                        // },
                                                        // },


                                                        // data: [{
                                                        //     name: "测试站", value: [121.0, 28.8, 123]
                                                        // }]
                                                        data: data.data_temp_max

                                                    }]



                                                });

                                                // 低温
                                                var map_min = echarts.init(document.getElementById('maplow_see_view'), 'light');
                                                //  echarts.registerMap('taizhou',tz_json,{});

                                                map_min.setOption({
                                                    title: {
                                                        text: '低温',
                                                        textStyle: { fontSize: 30 },
                                                    },
                                                    tooltip: {
                                                        trigger: 'item',
                                                        formatter: function (params) {
                                                            if (params['componentType'] == 'series') {
                                                                console.log("打印的是", params)
                                                                var lable_data = params['data']['value'][2]
                                                                var lable_station = params['data']['name']
                                                            }
                                                            return lable_station
                                                        }
                                                    },
                                                    geo: {
                                                        map: 'taizhou',
                                                        roam: true,
                                                        // tooltip:{borderColor = '#333'}
                                                        itemStyle: {
                                                            color: 'white'
                                                            // areaColor = '#333',
                                                        }


                                                    },
                                                    label: {
                                                        show: true,
                                                        color: "black",
                                                        fontSize: 14,
                                                        formatter: function (params) {
                                                            if (params['componentType'] == 'series') {
                                                                console.log("打印的是", params)
                                                                var lable_data = params['data']['value'][2]
                                                                var lable_station = params['data']['name']
                                                            }
                                                            return lable_data
                                                        }
                                                    },
                                                    series: [{
                                                        name: '低温',
                                                        // type: 'effectScatter',
                                                        type: 'scatter',
                                                        // symble:"triangle",
                                                        // symbol: "roundRect",
                                                        symbolSize: 5,
                                                        color: 'blue',
                                                        coordinateSystem: 'geo',
                                                        // itemStyle: {
                                                        //   color: function (params) {
                                                        //       var colorlist = ['black'];
                                                        //       return colorlist[params.dataIndex];
                                                        //   },
                                                        //   symbol: function (params) {
                                                        //     var symbollist = ['path://M10 10L60 10 60 20 20 20 20 40 60 40 60 50 20 50 20 100 10 100 10 10z'];
                                                        //     return symbollist[params.dataIndex];
                                                        // },
                                                        // },


                                                        // data: [{
                                                        //     name: "测试站", value: [121.0, 28.8, 123]
                                                        // }]
                                                        data: data.data_temp_min

                                                    }]



                                                });





                                            }
                                        })
                                    })

                                    // 自定义数据加载                            
                                    var panel_725171 = document.createElement('div')
                                    panel_725171.setAttribute("class", "tab-pane")
                                    panel_725171.style = "width: 100%; height: 100%;"
                                    panel_725171.id = "panel-725171"
                                    var show_panel_725171 = document.createElement('div')
                                    show_panel_725171.id = "show_panel-725171"
                                    show_panel_725171.style = "display: inline-block;width: 100%; height: 100%;"


                                    var div_all_daily = document.createElement('div')
                                    div_all_daily.style = "display: inline-flex;width: 100%;height: 100%"

                                    var station_list = document.createElement('div')
                                    station_list.id = "station_list"
                                    station_list.style = style = "width: 500px;height: 380px"

                                    var station_map = document.createElement('div')
                                    //class="col-md-12 column"
                                    // station_map.setAttribute("class", "col-md-12 column")
                                    station_map.style = "width: 400px;height: 380px"
                                    station_map.id = "station_map"


                                    div_all_daily.append(station_list, station_map)
                                    show_panel_725171.append(div_all_daily)


                                    panel_725171.append(show_panel_725171)
                                    tab_content.append(panel_725171)

                                    // 导航头
                                    tabbable.append(tabbable_head, tab_content)
                                    // tabbable.append(tabbable_ul, tab_content)
                                    // 风雨情
                                    var result_div = document.createElement('div')
                                    result_div.style = "width: 97.5%; height: 18%;;background-color:white;;margin-left:15px;margin-right:15px"
                                    result_div.innerHTML = "\
                                                                            \<blockquote><p>风雨情统计</p><small>昨天08时到今天，全是降水80毫米，本次较强降雨过程已结束，截止26日08时，全市出现大雨，部分地区暴雨，累计面雨量46.2毫米，各县（市、区）如下：玉环55.6毫米、三门53.8毫米、天台51.1毫米、临海49.5毫米、椒江45.8毫米、黄岩44.0毫米、温岭43.0毫米、路桥36.7毫米、仙居34.5毫米；共有58个乡镇面雨量超50毫米，单站最大天台石梁镇龙皇堂91.5毫米；沿海海面和海拔较高山区出现最大10级偏南大风，风力较大的有临海田岙岛27.9m／s（10级）、椒江上大陈26.9m／s（10级）、临海括苍山25.6m／s（10级）。预计今天阴天，傍晚到夜里部分地区有阵雨，沿海海面北到东北风6－7级阵风8级，夜里减弱到5－6级阵风7级。<cite>面雨量最大的城市主要集中在台州的中北部</cite></small></blockquote>\
                                                                            "


                                    product_view.append(tabbable, result_div, calendar_all)
                                    // 加载bar 
                                    var dom = document.getElementById("calendar_history");
                                    var myChart = echarts.init(dom);
                                    // myChart.resize()
                                    var option;


                                    var dateList = [
                                        ['2022-01-25', 200, '高温', '降水 大风', 200],
                                        ['2022-01-26', 200, '低温', '雨', 200],
                                        ['2022-01-27', 200, '浓雾', '风', 200],
                                        ['2022-01-28', 200, '低温', '', 200],
                                        ['2022-01-29', 200, '低温 浓雾', '降水 大风', 200],
                                        ['2022-01-30', 200, ' ', '大风', 200],
                                        ['2022-01-31', 200, ' ', '小雨', 200],
                                        ['2022-02-01', 200, ' ', '', 200],
                                        ['2022-02-02', 200, ' ', '', 200],
                                        ['2022-02-03', 200, ' ', '', 200],
                                        ['2022-02-04', 200, ' ', '', 200],
                                        ['2022-02-05', 200, ' ', '强降水', 200],
                                        ['2022-02-06', 200, ' ', '强降水', 200],
                                        ['2022-02-07', 200, ' ', '强降水', 200],
                                        ['2022-02-08', 200, ' ', '强降水', 200],
                                        ['2022-02-09', 200, ' ', '强降水', 200],
                                        ['2022-02-10', 200, ' ', '强降水', 200]
                                    ];
                                    var dateList = day_list
                                    // let heatmapData = [];
                                    // let lunarData = [];
                                    // for (let i = 0; i < dateList.length; i++) {
                                    //     // heatmapData.push([dateList[i][0], dateList[i][1]]);
                                    //     lunarData.push([dateList[i][0], dateList[i][1], dateList[i][2], dateList[i][3], dateList[i][4]]);
                                    // }
                                    // 日历的配置
                                    option = {
                                        title: {
                                            text: '',
                                            textStyle: { fontSize: 30 },
                                        },
                                        tooltip: {
                                            formatter: function (params) {
                                                // 实现显示的逻辑
                                                return '降雨量: ' + params.value[1].toFixed(2) + params.value[2] + params.value[3];
                                            }
                                        },
                                        visualMap: {
                                            show: false,
                                            min: 0,
                                            max: 300,
                                            calculable: true,
                                            seriesIndex: [3],
                                            orient: 'horizontal',
                                            left: 'center',
                                            bottom: 20,
                                            inRange: {
                                                // color: ['#e0ffff', '#006edd'],
                                                color: ['black'],
                                                opacity: 0.3
                                            },
                                            controller: {
                                                inRange: {
                                                    opacity: 0.5
                                                }
                                            }
                                        },
                                        calendar: [
                                            {
                                                left: 'center',
                                                top: 'middle',
                                                cellSize: [60, 60],
                                                yearLabel: { show: false },
                                                orient: 'vertical',
                                                dayLabel: {
                                                    firstDay: 1,
                                                    nameMap: 'cn'
                                                },
                                                monthLabel: {
                                                    show: false
                                                },
                                                range: day_range//['2022-01-25', '2022-02-10']//day_range//['2022-04-14', '2022-04-25']
                                            }
                                        ],
                                        series: [
                                            {
                                                type: 'scatter',
                                                coordinateSystem: 'calendar',
                                                symbolSize: 1,
                                                label: {
                                                    show: true,
                                                    formatter: function (params) {
                                                        var d = echarts.number.parseDate(params.value[0]);
                                                        // return d.getDate() + '\n\n' + params.value[2] + '\n\n';
                                                        return d.getDate() + '\n\n' + '\n\n'
                                                    },
                                                    color: 'black'
                                                },
                                                data: dateList
                                            },
                                            {   //显示蓝色字
                                                type: 'scatter',
                                                coordinateSystem: 'calendar',
                                                symbolSize: 1,
                                                label: {
                                                    show: true,
                                                    formatter: function (params) {
                                                        return params.value[2];
                                                    },
                                                    fontSize: 12,
                                                    fontWeight: 700,
                                                    color: 'blue'
                                                },
                                                data: dateList
                                            },
                                            {   //显示字
                                                type: 'scatter',
                                                coordinateSystem: 'calendar',
                                                symbolSize: 1,
                                                label: {
                                                    show: true,
                                                    formatter: function (params) {
                                                        return '\n\n\n' + params.value[3];
                                                    },
                                                    fontSize: 12,
                                                    fontWeight: 700,
                                                    color: 'red'
                                                },
                                                data: dateList
                                            },
                                            {   //显示降水量
                                                name: '降雨量',
                                                type: 'heatmap',
                                                coordinateSystem: 'calendar',
                                                data: dateList
                                                // data: heatmapData
                                            }
                                        ]
                                    };

                                    if (option && typeof option === 'object') {
                                        myChart.setOption(option);
                                    }
                                    //日报数据的异步加载
                                    myChart.on('click', function (params) {
                                        let componentType = params.componentType;   // geo是地图图层                      
                                        // 日报的数据加载 
                                        var get_date = params.value[0]
                                        var get_1st = params.value[2]
                                        var get_2st = params.value[3]
                                        console.log("数据", get_date)

                                        //ajax 请求数据
                                        var bar_list = echarts.init(document.getElementById('station_list'), 'light');
                                        //默认的加载数据
                                        bar_list.setOption(
                                            {
                                                title: {
                                                    text: '请选择单站数据',
                                                    textStyle: { fontSize: 25 },
                                                },
                                                xAxis: {
                                                    type: 'category',
                                                    data: [1, 2, 3, 4, 5, 6]
                                                },
                                                yAxis: {
                                                    type: 'category',
                                                    type: 'value'
                                                },
                                                series: [{
                                                    data: [1, 2, 3, 4, 5, 6],
                                                    type: 'bar',
                                                    label: {
                                                        show: true,
                                                        position: 'top'
                                                    },
                                                }]
                                            }
                                        )

                                        var map_zdz_daily = echarts.init(document.getElementById('station_map'), 'light');

                                        var csrf = $('input[name="csrfmiddlewaretoken"]').val();
                                        //日报数据的异步加载
                                        $.ajax({
                                            url: "tool_zdz_daily",  // 请求的地址
                                            type: "post",  // 请求方式
                                            timeout: 25000, //设置延迟上限
                                            data: {
                                                'csrfmiddlewaretoken': csrf,
                                                'date': get_date,
                                                'get_1st': get_1st,
                                                'get_2st': get_2st

                                            },
                                            dataType: "json",
                                            success: function (data) {
                                                console.log("日报的返回成功",typeof(data.daily_data))
                                                var rain_daily = JSON.parse(data.daily_data)['rain']
                                                var wind_daily = JSON.parse(data.daily_data)['wind']
                                                var tmax_daily = JSON.parse(data.daily_data)['tmax']
                                                var tmin_daily = JSON.parse(data.daily_data)['tmin']
                                                var view_daily = JSON.parse(data.daily_data)['view']
                                                map_zdz_daily.setOption({
                                                    legend: {
                                                        data: ['rain','wind','tmax','tmin','view'],
                                                        left: '10%',
                                                        selectedMode: 'single',
                                                        selected: {
                                                            'rain': false,
                                                            'wind': true,
                                                        }
                                                    },
                                                    title: {
                                                        text: '',
                                                        textStyle: { fontSize: 15 },
                                                    },
                                                    geo: {
                                                        map: 'taizhou',
                                                        roam: true,
                                                        // tooltip:{borderColor = '#333'}
                                                        itemStyle: {
                                                            color: 'white'
                                                            // areaColor = '#333',
                                                        }


                                                    },
                                                    label: {
                                                        show: true,
                                                        color: "black",
                                                        fontSize: 14,
                                                        formatter: function (params) {
                                                            if (params['seriesName'] == 'tmax') {
                                                                console.log("打印的是", params)
                                                                var lable_data = params['data']['value'][4]
                                                                return lable_data
                                                            }
                                                            else if(params['seriesName'] == 'tmin'){
                                                                var lable_data = params['data']['value'][4]
                                                                return lable_data
                                                            }
                                                            else
                                                            {
                                                                var lable_data = " "
                                                                return lable_data
                                                            }
                                                        }
                                                    },
                                                    series: [
                                                        {
                                                            name: 'rain',
                                                            // type: 'effectScatter',
                                                            type: 'scatter',
                                                            symble: "circle",
                                                            // symbol: "roundRect",
                                                            symbolSize: 10,
                                                            coordinateSystem: 'geo',
                                                            data:rain_daily
                                                            // data: [
                                                            //     {
                                                            //         name: "K8517", value: [121.3, 28.7, [10, 170, 120, 90, 30, 150, 10], 110],
                                                            //         symbol: 'circle', color: '#00FFFF'
                                                            //     },
                                                            //     {
                                                            //         name: "K8519", value: [121.0, 28.8, [10, 170, 120, 90, 30, 150, 10], 110], url: "url_data",
                                                            //         symbol: 'circle'
                                                            //     }

                                                            // ]

                                                        },
                                                        {
                                                            name: 'wind',
                                                            // type: 'effectScatter',
                                                            type: 'scatter',
                                                            symble: "circle",
                                                            // symbol: "roundRect",
                                                            symbolSize: 10,
                                                            color:'red',
                                                            coordinateSystem: 'geo',
                                                            data:wind_daily
                                                            // data: [
                                                            //     {
                                                            //         name: "K8519", value: [121.0, 28.8, [10, 130, 120, 90, 30, 150, 10], [
                                                            //             {
                                                            //                 'symbol': 'path://M10 10L60 10 60 20 20 20 20 40 60 40 60 50 20 50 20 100 10 100 10 10z',
                                                            //                 'symbolRotate': 310,
                                                            //                 'value': 10
                                                            //             },
                                                            //             {
                                                            //                 'symbol': 'path://M10 10L60 10 60 20 20 20 20 40 60 40 60 50 20 50 20 100 10 100 10 10z',
                                                            //                 'symbolRotate': 30,
                                                            //                 'value': 130
                                                            //             },
                                                            //             {
                                                            //                 'symbol': 'path://M10 10L60 10 60 20 20 20 20 40 60 40 60 50 20 50 20 100 10 100 10 10z',
                                                            //                 'symbolRotate': 360,
                                                            //                 'value': 120
                                                            //             },
                                                            //             {
                                                            //                 'symbol': 'path://M10 10L60 10 60 20 20 20 20 40 60 40 60 50 20 50 20 100 10 100 10 10z',
                                                            //                 'symbolRotate': 360,
                                                            //                 'value': 90
                                                            //             },
                                                            //             {
                                                            //                 'symbol': 'path://M10 10L60 10 60 20 20 20 20 40 60 40 60 50 20 50 20 100 10 100 10 10z',
                                                            //                 'symbolRotate': 360,
                                                            //                 'value': 30
                                                            //             },
                                                            //             {
                                                            //                 'symbol': 'path://M10 10L60 10 60 20 20 20 20 40 60 40 60 50 20 50 20 100 10 100 10 10z',
                                                            //                 'symbolRotate': 360,
                                                            //                 'value': 150
                                                            //             },
                                                            //             {
                                                            //                 'symbol': 'path://M10 10L60 10 60 20 20 20 20 40 60 40 60 50 20 50 20 100 10 100 10 10z',
                                                            //                 'symbolRotate': 36,
                                                            //                 'value': 10
                                                            //             }
                                                            //         ], 253], url: "url_data",
                                                            //         symbol: 'path://M10 10L50 10 50 20 20 20 20 40 50 40 50 50 20 50 20 100 10 100 10 10z', symbolSize: 15, symbolRotate: 330
                                                            //     }

                                                            // ]

                                                        },
                                                        {
                                                            name: 'tmax',
                                                            // type: 'effectScatter',
                                                            type: 'scatter',
                                                            symble: "circle",
                                                            // symbol: "roundRect",
                                                            symbolSize: 10,
                                                            coordinateSystem: 'geo',
                                                            data:tmax_daily
                                                            // data: [
                                                            //     {
                                                            //         name: "K8519", value: [121.0, 28.8, [10, 13, 300, 90, 30, 150, 10], 25.3]
                                                            //     }

                                                            // ]

                                                        },
                                                        {
                                                            name: 'tmin',
                                                            // type: 'effectScatter',
                                                            type: 'scatter',
                                                            symble: "circle",
                                                            // symbol: "roundRect",
                                                            symbolSize: 10,
                                                            coordinateSystem: 'geo',
                                                            data:tmin_daily
                                                            // data: [
                                                            //     {
                                                            //         name: "K8519", value: [121.0, 28.8, [10, 13, 300, 90, 30, 150, 10], 25.3]
                                                            //     }

                                                            // ]

                                                        },
                                                        {
                                                            name: 'view',
                                                            // type: 'effectScatter',
                                                            type: 'scatter',
                                                            symble: "circle",
                                                            // symbol: "roundRect",
                                                            symbolSize: 10,
                                                            coordinateSystem: 'geo',
                                                            data:view_daily
                                                            // data: [
                                                            //     {
                                                            //         name: "K8517", value: [121.3, 28.7, [10, 170, 120, 90, 30, 150, 10], 110],
                                                            //         symbol: 'circle', color: '#00FFFF'
                                                            //     },
                                                            //     {
                                                            //         name: "K8519", value: [121.0, 28.8, [10, 170, 120, 90, 30, 150, 10], 110], url: "url_data",
                                                            //         symbol: 'circle'
                                                            //     }

                                                            // ]

                                                        }
                                                    ]



                                                });

                                                map_zdz_daily.on('click', function (params) {
                                                    // console.log("地图加载的数据", params)
                                                    var series_option = {}
                                                    if (params['componentType'] == 'series') {
                                                        console.log("地图的数据类型", params['seriesName'])
                                                        // 坐标值的区间
                                                        var x_data = params.value[2]
                                                        var data_line = params.value[2]
                                                        // 画图的细节
                                                        if (params['seriesName'] == 'wind') {
                                                            // console.log("风场", params['seriesName'])
                                                            bar_list.clear()
                                                            series_option =
                                                            {
                                                                title: {
                                                                    text: '风场',
                                                                    textStyle: { fontSize: 15 },
                                                                },
                                                                xAxis: {
                                                                    type: 'category',
                                                                    data: params.value[2]
                                                                },
                                                                yAxis: {
                                                                    type: 'value'
                                                                },
                                                                series: [
                                                                    {
                                                                        name: "image",
                                                                        data: params.value[5],
                                                                        //symbolRotate
                                                                        type: 'scatter',
                                                                        color: 'red',
                                                                    },
                                                                    {
                                                                        data: params.value[4],
                                                                        type: 'bar',
                                                                        label: {
                                                                            show: true,
                                                                            position: 'top',
                                                                        }
                                                                    }

                                                                ]
                                                            }

                                                        }
                                                        else {

                                                            console.log('非风场')
                                                            series_option =
                                                            {
                                                                title: {
                                                                    text: '自动站',
                                                                    textStyle: { fontSize: 15 },
                                                                },
                                                                xAxis: {
                                                                    type: 'category',
                                                                    data: params.value[2]
                                                                },
                                                                yAxis: {
                                                                    type: 'value'
                                                                },
                                                                series: [{
                                                                    data: params.value[3],
                                                                    type: 'bar',
                                                                    label: {
                                                                        show: true,
                                                                        position: 'top',
                                                                    },
                                                                }]
                                                            }

                                                        }


                                                    }
                                                    else {
                                                        // 默认情况的xy
                                                        console.log("不是series")

                                                        var series_option = {
                                                            title: {
                                                                text: '点错',
                                                                textStyle: { fontSize: 15 },
                                                            },
                                                            xAxis: {
                                                                type: 'category',
                                                                data: [1, 2, 3, 4, 5, 6, 7, 8, 9]
                                                            },
                                                            yAxis: {
                                                                type: 'value'
                                                            },
                                                            series: [{
                                                                data: [1, 2, 3, 4, 5, 6, 7, 8, 9],
                                                                type: 'bar',
                                                                label: {
                                                                    show: true,
                                                                    position: 'top',
                                                                },
                                                            }]
                                                        }

                                                    }
                                                    console.log("打印ser", series_option)
                                                    bar_list.clear()
                                                    bar_list.setOption(series_option)

                                                })


                                            }

                                        })
                                        // echarts.registerMap('taizhou', tz_json, {});






                                        //开始加载
                                        $('#a_panel-725171').click()
                                    });


                                    // 加载降水图 tz_json
                                    var chart = echarts.init(document.getElementById('map_bar'), 'light');
                                    echarts.registerMap('taizhou', tz_json, {});
                                    // var data_xy = [["天台", "仙居", "玉环", "临海", "黄岩", "三门", "温岭", "仙居", "仙居"], [600, 1150, 400, 850, 600, 650, 100, 1150, 100]]
                                    var data_xy = rain_line
                                    console.log('打印单站数据', typeof (data_xy))
                                    chart.setOption(
                                        {
                                            legend: {
                                                data: ['bar1', 'bar2'],
                                                left: '30%',
                                                selectedMode: 'single'
                                            },
                                            title: {
                                                text: ' 降水分布',
                                                textStyle: { fontSize: 10 },
                                            },
                                            xAxis: [
                                                { data: rain_line[0] }
                                            ],
                                            yAxis: [

                                                {
                                                    name: '面雨量',
                                                    splitLine: { show: false },
                                                }
                                            ],
                                            grid: {
                                                left: "10%",
                                                top: "10%",
                                                right: "40%",
                                                bottom: "15%",
                                                borderWidth: 1
                                            },
                                            graphic: [
                                                {
                                                    type: 'image', // 图形元素类型
                                                    right: '5%', // 根据父元素进行定位 （居中）
                                                    bottom: '15%', // 根据父元素进行定位   （0%）, 如果bottom的值是 0，也可以删除该bottom属性值。
                                                    z: 3,  // 层叠
                                                    bounding: 'all', // 决定此图形元素在定位时，对自身的包围盒计算方式
                                                    style: {
                                                        image: data.rain_img,//'static/src/温度.png', // 这里一定要注意、注意，必须是https开头的图片路径地址
                                                        width: 350,
                                                        height: 350
                                                    }
                                                }
                                            ],
                                            dataZoom: [
                                                {
                                                    show: true,
                                                    start: 0,
                                                    end: 100
                                                },
                                                {
                                                    type: 'inside',
                                                    start: 94,
                                                    end: 100
                                                }
                                            ],
                                            series: [
                                                {
                                                    name: 'bar1',
                                                    type: 'bar',
                                                    color: 'red',
                                                    data: rain_line[2]
                                                },
                                                {
                                                    name: 'bar2',
                                                    type: 'bar',
                                                    color: 'blue',
                                                    data: rain_line[1]
                                                }
                                            ]
                                        })





                                }

                            })




                        }
                        else if (type == "tool_ec") {
                            console.log("---------------模式数据单点导出---------------")
                            $('#product_view').html(" ")
                            var product_view = document.getElementById("product_view")
                            product_view.style = "width:97.5%;height:97%;background-color:white;margin:15px"
                            // 绘图的核心程序
                            var map_tool1 = document.createElement('div')
                            map_tool1.style = "display: inline-flex;width: 50%; height: 45%;margin:15px;border-radius: 20px;"
                            map_tool1.id = "map_tool1"
                            // 映射位置的核心程序
                            // 图表
                            var position_ec = document.createElement('div')
                            position_ec.style = ";width: 45%; height: 45%;;float: right;"
                            // 文字描述
                            var blank_ec = document.createElement('div')
                            blank_ec.id = "blank_ec"
                            blank_ec.style = "width: 85%; height: 35%;margin:15px;border-radius: 20px;;float: left;font-size: 17px;font-weight:900;font-family:'宋体';overflow-x: hidden;overflow-y: scroll;;"
                            blank_ec.setAttribute("class", "scrollbar_self")
                            blank_ec.innerHTML = "&nbsp;&nbsp;大麦屿街道，隶属于浙江省台州市玉环市，地处玉环市西南部，东连坎门街道，南与温州市洞头县鹿西乡隔海相望，西、西北临乐清湾，与温州市乐清市城东街道、虹桥镇隔海相眺，北、东北连接玉城街道，辖区总面积74.1平方千米。"
                            var name_ec = document.createElement('div')
                            name_ec.style = "display: inline-flex;width: 100%; height: 20%;"
                            name_ec.innerHTML = "&nbsp;&nbsp;&nbsp;"
                            var name_ec_h = document.createElement('h4')
                            name_ec_h.id = "h4_village"
                            name_ec_h.style = "font-size: 25px;font-weight:900;font-family:'宋体';color:blue;padding-top:20%"
                            name_ec_h.innerText = "乡镇名称:仙居"
                            name_ec.append(name_ec_h)
                            // 位置
                            var latlon_ec = document.createElement('div')
                            latlon_ec.style = "display: inline-flex;width: 100%; height: 20%;font-size: 10px;font-weight:900;font-family:'宋体';color:black;padding-top:10%;padding-left:2%"
                            latlon_ec.innerHTML = "&nbsp;"
                            var lon_ec_h = document.createElement('h4')
                            lon_ec_h.id = "h4_lon"
                            lon_ec_h.innerText = "经度:121.5度"
                            latlon_ec.append(lon_ec_h)
                            var lon_ec_blank = document.createElement('h4')
                            lon_ec_blank.style = "width: 1%; height:100%;"
                            lon_ec_blank.innerHTML = "&nbsp;&nbsp;&nbsp; "
                            latlon_ec.append(lon_ec_blank)

                            // latlon_ec.innerHTML = "&nbsp;&nbsp;&nbsp;&nbsp;" 
                            var lat_ec_h = document.createElement('h4')
                            lat_ec_h.id = "h4_lat"
                            lat_ec_h.innerText = "纬度:27.5度"
                            latlon_ec.append(lat_ec_h)
                            // 添加按钮
                            var button_ec = document.createElement("div")
                            button_ec.style = "display: inline-block;width: 100%; height: 20%;padding-top:4%;padding-right:12%;"
                            var button_input_ec = document.createElement('input')
                            button_input_ec.setAttribute('type', 'button')
                            button_input_ec.setAttribute('value', '查询')
                            button_input_ec.style = "width:25%;height:50%;float:right;font-size: 18px;font-weight:900;font-family:'宋体';color:white;background-color:blue;border-radius:10px"
                            button_input_ec.id = 'button_input_ec'
                            button_ec.append(button_input_ec)

                            position_ec.append(name_ec, latlon_ec, blank_ec, button_ec)
                            // 添加查询按钮的响应事件
                            button_input_ec.addEventListener('click', function () {
                                // console.log("button_input_ec被点击了",taizhou['features'])
                                var csrf = $('input[name="csrfmiddlewaretoken"]').val();
                                $.ajax({
                                    url: "ec_single_data",  // 请求的地址
                                    type: "post",  // 请求方式
                                    timeout: 25000, //设置延迟上限
                                    data: {
                                        'csrfmiddlewaretoken': csrf,
                                        'ec_village': $('#h4_village').text(),
                                        'ec_lon': $('#h4_lon').text(),
                                        'ec_lat': $('#h4_lat').text(),
                                        'ec_start_time': $('#ec_start_time').val(),
                                        'ec_end_time': $('#ec_end_time').val(),
                                        "ec_data_type": $("#ec_data_type").val(),
                                        "ec_time_item": $("#ec_time_item").val(),
                                        "ec_select_time": $("#ec_select_time").val()


                                    },
                                    dataType: "json",
                                    success: function (data) {
                                        console.log("返回成功", data)

                                        $("#table_ecworker_html").html(" ")
                                        // panel-727742   multiple-y-axis
                                        $("#panel-727742").html(" ") //风场
                                        $("#panel-578432").html(" ") //降水

                                        var image_rain = new Image()
                                        image_rain.id = 'image_rain'
                                        image_rain.src = data.img_rain
                                        image_rain.style.width = "100%"
                                        image_rain.style.height = "100%"
                                        $('#panel-578432').append(image_rain)

                                        var image_wind = new Image()
                                        image_wind.id = 'image_wind'
                                        image_wind.src = data.img_wind
                                        image_wind.style.width = "100%"
                                        image_wind.style.height = "100%"
                                        $('#panel-727742').append(image_wind)

                                    }
                                })
                            })
                            // 数据展示
                            var ec_single_data = document.createElement('div')
                            ec_single_data.style = "width: 100%; height: 50%;float: right;"

                            var ec_tabbable = document.createElement('div')
                            ec_tabbable.setAttribute("class", "tabbable")
                            ec_tabbable.id = "tabs-439149"
                            ec_tabbable.style = "width: 98%;height: 100%;margin:15px;border-radius: 20px;background-color:rgb(220, 222, 226);"

                            ec_tabbable_ul = document.createElement('ul')
                            ec_tabbable_ul.setAttribute("class", "nav nav-tabs")
                            ec_tabbable_ul.style = "width: 100%;height: 10%;background-color:white;"

                            ec_tabbable_li1 = document.createElement('li')
                            ec_tabbable_a1 = document.createElement('a')
                            ec_tabbable_a1.setAttribute('href', '#panel-727742')
                            ec_tabbable_a1.setAttribute('data-toggle', 'tab')
                            ec_tabbable_a1.innerText = "风场"
                            ec_tabbable_li1.append(ec_tabbable_a1)

                            ec_tabbable_li2 = document.createElement('li')
                            ec_tabbable_li2.setAttribute('class', 'active')
                            ec_tabbable_a2 = document.createElement('a')
                            ec_tabbable_a2.setAttribute('href', '#panel-578432')
                            ec_tabbable_a2.setAttribute('data-toggle', 'tab')
                            ec_tabbable_a2.innerText = "降水"
                            ec_tabbable_li2.append(ec_tabbable_a2)

                            var ec_tabbable_content = document.createElement('div')
                            ec_tabbable_content.style = "width: 100%;height: 90%;"
                            ec_tabbable_content.setAttribute("class", "tab-content")
                            // ec表格
                            tabbable_content1 = document.createElement('div')
                            tabbable_content1.id = "panel-727742"
                            tabbable_content1.style = "width: 100%;height: 100%;"
                            tabbable_content1.setAttribute("class", "tab-pane")

                            tabbable_h = document.createElement('h2')
                            tabbable_h.innerText = "仙居淡竹乡精细化预报:"

                            tabbable_table = document.createElement('table')
                            tabbable_table.setAttribute('class', 'table table-bordered table-condensed')

                            tabbable_head = document.createElement('thead')
                            tabbable_head.innerHTML = "<tr><th>时间</th><th>时段</th><th>天况</th><th>气温</th><th>风力</th><th>降水</th><th>相对湿度</th></tr>"

                            tabbable_body = document.createElement('tbody')
                            tabbable_body.id = "table_ecworker_html"


                            tabbable_table.append(tabbable_head, tabbable_body)
                            tabbable_content1.append(tabbable_h, tabbable_table)



                            // 时序图
                            tabbable_content2 = document.createElement('div')
                            tabbable_content2.id = "panel-578432"
                            tabbable_content2.style = "width: 100%;height: 100%;"
                            tabbable_content2.setAttribute("class", "tab-pane active")
                            content2_h = document.createElement('h3')
                            content2_h.style = "width: 100%;height:5%;"
                            content2_h.innerText = "仙居淡竹乡精细化时序图:"
                            content2_div = document.createElement('div')
                            content2_div.id = "multiple-y-axis"
                            content2_div.style = "width: 900px;height:400px"
                            tabbable_content2.append(content2_h, content2_div)
                            ec_tabbable_ul.append(ec_tabbable_li1, ec_tabbable_li2)
                            ec_tabbable_content.append(tabbable_content1, tabbable_content2)
                            ec_tabbable.append(ec_tabbable_ul, ec_tabbable_content)











                            ec_single_data.append(ec_tabbable)
                            product_view.append(map_tool1, position_ec, ec_single_data)
                            // product_view.append(position_ec)



                            //乡镇地图v 
                            var chartDom = document.getElementById('map_tool1');
                            var map = echarts.init(chartDom, 'light');
                            echarts.registerMap('taizhou', taizhou, {});
                            map.setOption({
                                title: {
                                    text: '',
                                    textStyle: { fontSize: 50 },
                                },
                                backgroundColor: 'rgba(128, 128, 128, 0.1)',
                                tooltip: {
                                    trigger: 'item',
                                    // formatter: '{c}(m/s)'
                                    formatter: function (params) {
                                        // do some thing
                                        return params.value[2] + params.name
                                    }
                                },
                                geo: {
                                    map: 'taizhou',
                                    roam: true,
                                    // tooltip:{borderColor = '#333'}
                                    itemStyle: {
                                        color: 'white'
                                        // areaColor = '#333',
                                    }


                                },


                                series: [{
                                    name: '确诊数量',
                                    // type: 'effectScatter',
                                    type: 'scatter',
                                    // symble:"triangle",
                                    // symbol: "roundRect",
                                    // symbolSize:50,
                                    coordinateSystem: 'geo'
                                    // itemStyle: {
                                    //   color: function (params) {
                                    //       var colorlist = ['black'];
                                    //       return colorlist[params.dataIndex];
                                    //   },
                                    //   symbol: function (params) {
                                    //     var symbollist = ['path://M10 10L60 10 60 20 20 20 20 40 60 40 60 50 20 50 20 100 10 100 10 10z'];
                                    //     return symbollist[params.dataIndex];
                                    // },
                                    // },

                                    // data:[{ name:"K8515",value: [121.0, 28.8, 123], url: "url_data",
                                    // symbol:'path://M10 10L50 10 50 20 20 20 20 40 50 40 50 50 20 50 20 100 10 100 10 10z',symbolSize:15,symbolRotate:330}]

                                }]



                            });
                            // ec地图的相应事件
                            map.on('click', function (params) {
                                let componentType = params.componentType;   // geo是地图图层
                                if (componentType == "geo") {
                                    var offsetX = params.event.offsetX;
                                    var offsetY = params.event.offsetY;
                                    var zuobiao = map.convertFromPixel('geo', [offsetX, offsetY]); // 转换成坐标
                                    var detail = taizhou_xz[params.name]
                                    console.log("数据----", taizhou_xz[params.name])
                                    // var  village
                                    $('#h4_village').html("乡镇名称:" + " " + params.name)
                                    $('#h4_lon').html("经度:" + " " + zuobiao[0].toFixed(2))
                                    $('#h4_lat').html("纬度:" + " " + zuobiao[1].toFixed(2))
                                    // $('#blank_ec').text("&nbsp;&nbsp;" +detail.toString())
                                    $('#blank_ec').html("&nbsp;&nbsp;" + detail.toString())

                                }
                            });



                        }
                    }
                    // 自定义材料加载
                    $('#product_show_button').click(function () {
                        var type = "product_show"
                        product_view_show(type)

                    })
                    // 画图--精细化
                    $('#plot_self_button').click(function () {
                        var type = "plot_self"
                        product_view_show(type)
                        // var chartDom = document.getElementById('canvas_bar');
                        // var myChart_bar = echarts.init(chartDom);

                    })
                    // 市台历史数据的显示
                    $('.tool_history_button').click(function () {
                        var type = "tool_history"
                        product_view_show(type)


                    })

                    // 市台订正数据加载
                    $('.tool_prodict_product').click(function () {
                        console.log("点击了数据文件")
                        var type = "tool_prodict_product"
                        product_view_show(type)

                    })

                    // 自动站数据加载
                    $('#tool_zdz_button').click(function () {
                        var type = "tool_zdz"
                        product_view_show(type)

                    })
                    // 精细化EC单点数据加载
                    $('#tool_ec_button').click(function () {
                        var type = "tool_ec"
                        product_view_show(type)

                    })





                </script>




            </div>

        </div>
        {% csrf_token %}
    </div>


</body>

</html>