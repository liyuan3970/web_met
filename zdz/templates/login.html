<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <!-- <meta name="viewport" content="width=device-width, initial-scale=1.0"> -->
    <meta name="viewport"
        content="width=device-width, initial-scale=1.0, minimum-scale=0.5, maximum-scale=2.0, user-scalable=yes" />
    <!-- <meta http-equiv="Content-Security-Policy" content="upgrade-insecure-requests" /> -->
    <script src="https://cdn.staticfile.org/jquery/3.2.1/jquery.min.js"></script>
    <script src="https://cdn.staticfile.org/popper.js/1.15.0/umd/popper.min.js"></script>
    <link rel="stylesheet" href="https://cdn.staticfile.org/twitter-bootstrap/3.3.7/css/bootstrap.min.css">
    <script src="https://cdn.staticfile.org/twitter-bootstrap/3.3.7/js/bootstrap.min.js"></script>
    <link rel="stylesheet" type="text/css" href="static/js/jquery.datetimepicker.css" />
    <script src="static/js/jquery.datetimepicker.full.min.js"></script>
    <!-- echart -->
    <script type="text/javascript" src="static/js/echarts.min.js"></script>
    <script type="text/javascript" src="static/js/echarts-gl.min.js"></script>
    <script type="text/javascript" src="static/js/ecStat.min.js"></script>
    <script type="text/javascript" src="static/js/dataTool.min.js"></script>
    <script type="text/javascript" src="static/js/china.js"></script>
    <script type="text/javascript" src="static/js/world.js"></script>
    <!-- 表格 -->
    <link rel="stylesheet" href="https://unpkg.com/x-data-spreadsheet@1.1.9/dist/xspreadsheet.css">
    <script src="https://unpkg.com/x-data-spreadsheet@1.1.9/dist/xspreadsheet.js"></script>
    <script src="https://unpkg.com/x-data-spreadsheet@1.1.9/dist/locale/zh-cn.js"></script>




    <title>决策服务模板平台</title>

</head>

<body>
    <!-- 全局布局 -->
    <div
        style="display: flex;align-content:flex-start;position: absolute; justify-content: center; flex-wrap: wrap; width: 100%;height: 100%; color: rgb(204, 203, 203); background-color: rgb(212, 202, 202);">
        <!-- 导航栏 -->
        {% csrf_token %}
        <div style="background-color:rgb(211, 13, 13); width: 100%; height: 5%;border: 3px solid rgb(238, 14, 14);">
            <div class="tabbable" id="tabs-01" style="display:block;width: 100%; height: 100%;">
                <ul class="nav nav-tabs">
                    <li class="active">
                        <a href="#panel-1" data-toggle="tab">材料制作</a>
                    </li>
                    <li>
                        <a href="#panel-2" data-toggle="tab">工具箱</a>
                    </li>
                    <li>
                        <!-- 另外添加一个说明文档 -->
                        <a href="#panel-3" data-toggle="tab">画图</a>
                    </li>
                    <li>
                        <!-- 另外添加一个说明文档 -->
                        <a href="#panel-5" data-toggle="tab">快捷网址</a>
                    </li>
                    <li style="float: right;">
                        <!-- 另外添加一个说明文档 -->
                        <a href="#panel-4" data-toggle="tab">帮助</a>
                    </li>
                </ul>
            </div>
        </div>
        <div id="index_main"
            style="background-color:rgb(17, 16, 17); width: 100%; height: 95%;border: 3px solid rgb(236, 5, 5);display:flex ">
            <!-- 决策材料类型 -->
            <div style="background-color:rgb(24, 214, 97); width: 50%; height: 100%;border: 3px solid rgb(128, 0, 0);">
                <!-- 文件头 -->
                <div
                    style="background-color:rgb(61, 201, 136); width: 100%; height: 100%;border: 3px solid rgb(221, 20, 20);">
                    <!-- 材料类型选项卡 -->
                    <div class="tab-content" style="display:block;width: 100%; height: 100%;">
                        <div class="tab-pane active" id="panel-1"
                            style="width:100%;height:100%;background-color:rgb(182, 180, 71)">
                            <div style="width:100%;height:25%;"></div>
                            <div style="display:inline-flex;width:100%;height:35%;">
                                <div style="width:15%;height:100%;"></div>
                                <!-- 登录的代码 -->
                                <form action="/login" method="POST"
                                    style="width:70%;height:100%;background-color:rgb(22, 119, 197)">
                                    {% csrf_token %}
                                    <div style="width:100%;height:100%;background-color:rgb(14, 158, 230)">
                                        <div style="width:100%;height:20%;background-color:rgb(231, 162, 71)"></div>
                                        <div style="width:100%;height:60%;">
                                            <div style="width:100%;height:25%"></div>
                                            <div style="width:100%;height:25%;">
                                                &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                                                &nbsp;&nbsp;&nbsp;&nbsp;
                                                &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                                                <label style="font-size:25px">账号:</label>
                                                <input id="user" name="user" type="text" placeholder="请输入用户"
                                                    style="width:50%;height:80%;">
                                            </div>
                                            <div style="width:100%;height:25%;">
                                                &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                                                &nbsp;&nbsp;&nbsp;&nbsp;
                                                &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                                                <label style="font-size:25px">密码:</label>
                                                <input name="passwd" type="password" placeholder="请输入密码"
                                                    style="width:50%;height:80%;">
                                            </div>
                                        </div>
                                        <div style="width:100%;height:20%;background-color:rgb(231, 162, 71)">
                                            <div style="width:100%;height:20%"></div>
                                            <input type="submit" value="登录"
                                                style="width:15%;height:60%;float:right;background-color: brown;" />
                                        </div>
                                    </div>
                                </form>


                            </div>
                            <!-- <div style ="width:70%;height:35%;background-color:rgb(233, 18, 18)"></div> -->







                        </div>
                        <div class="tab-pane" id="panel-2"
                            style="width:100%;height:100%;background-color:rgb(8, 116, 167)">
                            <div style="width:100%;height:25%;background-color:rgb ;border: 3px solid black;">
                                <div
                                    style="display: inline-block ;width:100%;height:15%;background-color:rgb;vertical-align:middle;font-size: 25px;">
                                    <label>精细化站点预报</label>
                                </div>
                                <div
                                    style="display: inline-block ;width:100%;height:25%;background-color:rgb;vertical-align:middle;font-size: 25px;">
                                    <h3 style="display: inline-block ;width:15% ;">数据源：</h3>
                                    EC数据: <input type="radio" name="check_data_source" style="width: 5%;height:50%;">
                                    智能网格: <input type="radio" name="check_data_source" style="width: 5%;height:50%;">
                                    市台订正: <input type="radio" name="check_data_source" style="width: 5%;height:50%;">

                                </div>

                                <div
                                    style="display: inline-block ;width:100%;height:25%;background-color:rgb;vertical-align:middle;font-size: 25px;">
                                    站点模式：<input type="radio" name="check_data_way" style="width: 5%;height:50%;">
                                    <input placeholder="初始时间" id="datetimepicker_check_data_way_start" type="text"
                                        style="width: 35%;height:80% ; ">
                                    <input placeholder="终止时间" id="datetimepicker_check_data_way_end" type="text"
                                        style="width: 35%;height:80% ; ">
                                </div>
                                <script>
                                    $('#datetimepicker_check_data_way_start').datetimepicker(
                                        {
                                            theme: 'dark',
                                            format: 'Y-m-d H:i'
                                        }
                                    );
                                </script>
                                <script>
                                    $('#datetimepicker_check_data_way_end').datetimepicker(
                                        {
                                            theme: 'dark',
                                            format: 'Y-m-d H:i'
                                        }
                                    );
                                </script>
                                <div
                                    style="display: inline-block ;width:100%;height:25%;background-color:rgb;vertical-align:middle;font-size: 25px;">
                                    经纬度模式：<input type="radio" name="check_data_way" style="width: 5%;height:50%;">
                                    <input type="text" placeholder="经度" style="width: 20%;height:80%;"><input
                                        type="text" placeholder="纬度" style="width: 20%;height:80%;">
                                    <input id="tool_submit1" onclick="tool_1()" type="button" value="查询"
                                        style="width: 10%;height:60% ;float: right ;">
                                </div>


                            </div>
                            <div style="width:100%;height:25%;background-color:rgb ;border: 3px solid black;">
                                <div style="width:100%;height:15%">
                                    <h3>市台订正:</h3>

                                </div>
                                <div
                                    style="display: inline-flex;width:100%;height:15%;text-align:center;align-items: center;">
                                    08:<input type="radio" name="tz_self_time" value="08" checked="checked"
                                        style="width: 10%;text-align:center;vertical-align: middle;align-items: center;">
                                    20:<input type="radio" name="tz_self_time" value="20"
                                        style="width: 10%;text-align:center;vertical-align: middle;align-items: center;">

                                </div>
                                <div
                                    style="display: inline-flex;width:100%;height:40%;text-align:center;align-items: center;">

                                    短期气温:<input type="radio" name="tz_self" value="T"
                                        style="width: 10%;text-align:center;vertical-align: middle;align-items: center;">
                                    短期降水:<input type="radio" name="tz_self" value="P"
                                        style="width: 10%;text-align:center;vertical-align: middle;align-items: center;">
                                    短期大风:<input type="radio" name="tz_self" value="Wind"
                                        style="width: 10%;text-align:center;vertical-align: middle;align-items: center;">
                                    降水:<input type="radio" name="tz_self" value="P_7day"
                                        style="width: 10%;text-align:center;vertical-align: middle;align-items: center;">
                                    高温:<input type="radio" name="tz_self" value="TMax24" checked="checked"
                                        style="width: 10%;text-align:center;vertical-align: middle;align-items: center;">
                                    低温:<input type="radio" name="tz_self" value="TMin24"
                                        style="width: 10%;text-align:center;vertical-align: middle;align-items: center;">
                                    短期云量:<input type="radio" name="tz_self" value="Cloud_7day"
                                        style="width: 10%;text-align:center;vertical-align: middle;align-items: center;">

                                </div>
                                <div style="display: inline-block;width:100%;height:20%;">
                                    <input id="tool_submit2" onclick="tool_2()" type="button" value="查看"
                                        style="width: 10%;height:80% ;float: right ;">

                                </div>


                            </div>
                            <div style="width:100%;height:25%;background-color:rgb ;border: 3px solid black;">
                                <div style="width:100%;height:30%">
                                    <h3>历史数据</h3>

                                </div>
                                <div
                                    style=" display: inline-block;width:100%;height:45%;text-align:center;vertical-align: middle;align-items: center;">
                                    <label style="float: left" for="datetimepicker_history1">自动站数据:</label>
                                    <input id="datetimepicker_history1" type="text" placeholder="起始时间"
                                        style="width: 25%;height:40%; text-align:center;vertical-align: middle;align-items: center; ">
                                    <input id="datetimepicker_history2" type="text" placeholder="结束时间"
                                        style="width: 25%;height:40%; text-align:center;vertical-align: middle;align-items: center; ">
                                    <input id="tool_submit3" onclick="tool_3()" type="button" value="查看"
                                        style="width: 10%;height:40% ;float: right ;">
                                    <script>
                                        $('#datetimepicker_history1').datetimepicker(
                                            {
                                                theme: 'dark',
                                                format: 'Y-m-d H:i'
                                            }
                                        );
                                    </script>
                                    <script>
                                        $('#datetimepicker_history2').datetimepicker(
                                            {
                                                theme: 'dark',
                                                format: 'Y-m-d H:i'
                                            }
                                        );
                                    </script>

                                </div>
                                <!-- <div style="display: inline-block;width:100%;height:15%;">
                                    <label>历史材料查询</label>
                                    <input id="tool_submit3" onclick="tool_3()" type="button" value="查看"
                                        style="width: 10%;height:100% ;float: right ;">

                                </div> -->

                            </div>
                            <div
                                style="width:100%;height:25%;background-color:rgb ;background-color: rgb(247, 248, 248);">
                                <div style="width:100%;height:100%;background-color:rgb ;">
                                    <div class="tabbable" id="tabs-233110" style="width:100%;height:100%;">
                                        <ul class="nav nav-tabs">
                                            <li class="active">
                                                <a href="#panel-03001" data-toggle="tab">一周天气</a>
                                            </li>
                                            <li>
                                                <a href="#panel-03002" data-toggle="tab">气象信息快报</a>
                                            </li>
                                            <li>
                                                <a href="#panel-03003" data-toggle="tab">重要气象报告</a>
                                            </li>
                                            <li>
                                                <a href="#panel-03004" data-toggle="tab">天气专报</a>
                                            </li>
                                            <li>
                                                <a href="#panel-03005" data-toggle="tab">天气公报</a>
                                            </li>
                                        </ul>
                                        <div class="tab-content" style="width:100%;height:87%">
                                            <div class="tab-pane active" id="panel-03001"
                                                style="width:100%;height:100%">
                                                <!-- 调整好的布局结构 -->
                                                <div style="width:100%;height:97%;">
                                                    <div style="width:100%;height:80%;overflow: auto;">
                                                        <div style="height: 20%;border: 1px solid rgb(15, 15, 15);">
                                                            <span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> <label
                                                                for="file_week0"
                                                                style="width:90%;text-align:center;vertical-align: middle;align-items: center;">第一期
                                                                一周天气 </label> <input type="radio" name="file_week"
                                                                id="file_week0">
                                                        </div>
                                                        <div style="height: 20%;border: 1px solid rgb(15, 15, 15);">
                                                            <span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> <label
                                                                for="file_week1"
                                                                style="width:90%;text-align:center;vertical-align: middle;align-items: center;">第一期
                                                                一周天气 </label> <input type="radio" name="file_week"
                                                                id="file_week1">
                                                        </div>
                                                        <div style="height: 20%;border: 1px solid rgb(15, 15, 15);">
                                                            <span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> <label
                                                                for="file_week2"
                                                                style="width:90%;text-align:center;vertical-align: middle;align-items: center;">第一期
                                                                一周天气 </label> <input type="radio" name="file_week"
                                                                id="file_week2">
                                                        </div>
                                                    </div>
                                                    <input type="button" value="查看"
                                                        style="width:15%;height:18%;float:right">

                                                </div>
                                            </div>
                                            <div class="tab-pane" id="panel-03002">
                                                <p>
                                                    Howdy, I'm in Section 2.
                                                </p>
                                            </div>
                                        </div>
                                    </div>



                                </div>


                            </div>
                            <script>
                                function tool_3() {

                                    var tool1_view = document.getElementById("tool1_view")
                                    var tool2_view = document.getElementById("tool2_view")
                                    var tool3_view = document.getElementById("tool3_view")
                                    var tool5_view = document.getElementById("tool5_view")
                                    var product_view = document.getElementById("product_view")
                                    product_view.style.display = "none"
                                    tool1_view.style.display = "none"
                                    tool2_view.style.display = "none"
                                    tool3_view.style.display = "inline-block"


                                }
                                function tool_2() {
                                    // 市台订正数据的核心代码
                                    var time_plot_taizhou = $("input[name='tz_self_time']:checked").val()
                                    var type_plot_taizhou = $("input[name='tz_self']:checked").val()
                                    var csrf = $('input[name="csrfmiddlewaretoken"]').val();
                                    console.log(time_plot_taizhou, type_plot_taizhou)

                                    $.ajax({
                                        url: "upload_select_taizhou_data",  // 请求的地址
                                        type: "post",  // 请求方式
                                        timeout: 2500000, //设置延迟上限
                                        data: {
                                            'csrfmiddlewaretoken': csrf,
                                            'plot_type': type_plot_taizhou,
                                            'plot_time': time_plot_taizhou
                                        },
                                        dataType: "json",
                                        success: function (data) {
                                            // var show_img_list = $
                                            var server_img_list = data.img_list
                                            console.log("ajax请求成功返回的数据", server_img_list)
                                            $("#self_png_show").html(" ")
                                            $("#ul_self").html(" ")
                                            for (i = 0; i < server_img_list.length; i++) {
                                                // 图部分
                                                var img_item = new Image()
                                                img_item.id = "self_" + (i + 1).toString()
                                                img_item.src = server_img_list[i]
                                                img_item.style.width = "100%"
                                                img_item.style.height = "100%"
                                                $('#self_png_show').append(img_item)
                                                var a_item = document.createElement("a")
                                                a_item.id = "a_" + (i + 1).toString()
                                                a_item.setAttribute("class", "list-group-item")
                                                a_item.setAttribute("href", "#self_" + (i + 1).toString())
                                                a_item.innerText = "202200401"
                                                var input_item = document.createElement("input")
                                                input_item.id = "in_" + (i + 1).toString()
                                                input_item.style.display = "none"
                                                input_item.setAttribute("type", "radio")
                                                input_item.setAttribute("name", "ul_png")
                                                if (i == 0) {
                                                    input_item.setAttribute("checked", "true")
                                                }
                                                a_item.appendChild(input_item)
                                                var click_item = parseInt(i)
                                                a_item.addEventListener("click", function (click_item) {
                                                    console.log(click_item)
                                                    $("input:radio[name='ul_png']").attr("checked", false)
                                                    a_item.children[0].setAttribute("checked", "true")

                                                    // $('#in_'+(i + 1).toString()).attr("checked", true)
                                                    var child_len = $("input:radio[name='ul_png']").length
                                                    for (j = 0; j < child_len; j++) {
                                                        $('#a_' + (j + 1).toString()).attr("style", "color:balck")
                                                    }
                                                    $('#a_' + (j + 1).toString()).attr("style", "color:red")

                                                })

                                                $("#ul_self").append(a_item)




                                            }

                                        }
                                    })

                                    var tool1_view = document.getElementById("tool1_view")
                                    var tool2_view = document.getElementById("tool2_view")
                                    var tool3_view = document.getElementById("tool3_view")
                                    var tool5_view = document.getElementById("tool5_view")
                                    var product_view = document.getElementById("product_view")
                                    product_view.style.display = "none"
                                    tool1_view.style.display = "none"
                                    tool2_view.style.display = "inline-block"
                                    tool3_view.style.display = "none"
                                    tool5_view.style.display = "none"


                                }
                                function tool_1() {

                                    var tool1_view = document.getElementById("tool1_view")
                                    var tool2_view = document.getElementById("tool2_view")
                                    var tool3_view = document.getElementById("tool3_view")
                                    var tool5_view = document.getElementById("tool5_view")
                                    var product_view = document.getElementById("product_view")
                                    product_view.style.display = "none"
                                    tool1_view.style.display = "inline-block"
                                    // tool1_view.style.height = "100%"

                                    tool2_view.style.display = "none"
                                    tool3_view.style.display = "none"
                                    tool5_view.style.display = "none"


                                }

                                function tool_5() {
                                    // 向服务器要数据并显示tool5
                                    var csrf = $('input[name="csrfmiddlewaretoken"]').val();

                                    $.ajax({
                                        url: "upload_selfplot_data",  // 请求的地址
                                        type: "get",  // 请求方式
                                        data: {
                                            "plot_self_data": JSON.stringify(data_canvas),
                                            'csrfmiddlewaretoken': csrf
                                        },
                                        dataType: "json",
                                        success: function (data) {
                                            console.log("ajax请求成功返回的数据", data.img)
                                            var plotImg = new Image();
                                            plotImg.src = data.img
                                            $('#canvas_plot_div').html(" ")
                                            $('#canvas_plot_div').html(plotImg)

                                        }
                                    })

                                    var tool1_view = document.getElementById("tool1_view")
                                    var tool2_view = document.getElementById("tool2_view")
                                    var tool3_view = document.getElementById("tool3_view")
                                    var tool5_view = document.getElementById("tool5_view")
                                    var product_view = document.getElementById("product_view")
                                    product_view.style.display = "none"
                                    tool1_view.style.display = "none"
                                    // tool1_view.style.height = "100%"

                                    tool2_view.style.display = "none"
                                    tool3_view.style.display = "none"
                                    tool5_view.style.display = "inline-block"



                                }
                            </script>

                        </div>
                        <!-- 利用canvas绘图的模块 ---- 这里主要提供三种画图方式（散点、插值、等值线）-->
                        <div class="tab-pane" id="panel-3"
                            style="width:100%;height:100%;background-color:rgb(243, 244, 247)">
                            <div class="tabbable" id="tabs-329760" style="width:100%;height:100%; ">
                                <ul class="nav nav-tabs">
                                    <li class="active">
                                        <a href="#panel-canvas01" data-toggle="tab">精细化订正</a>
                                    </li>
                                    <li>
                                        <a href="#panel-canvas02" data-toggle="tab">快速绘图</a>
                                    </li>
                                </ul>
                                <div class="tab-content" style="width:100%;height:95%">
                                    <div class="tab-pane active" id="panel-canvas01" style="width:100%;height:100%">

                                        <!-- <label style="fontsize:40px">降水订正</label> -->
                                        <div style="display:inline-flex;width:100%;height:10%;  ">
                                            <div style="width:7%;height:100%">
                                                <div style="width:100%;height:70%">增加<input checked="checked"
                                                        type="radio" name="canvas_var" value="+">
                                                </div>
                                                <div style="width:100%;height:70%">减少<input type="radio"
                                                        name="canvas_var" value="-"></div>
                                            </div>
                                            <div style="width:80%;height:100%  ">
                                                <div style="width:100%;height:30%  ">
                                                </div>
                                                <!-- 添加数值 -->
                                                <div style="display:inline-block;width:100%;height:35%;  ">
                                                    0.1<input checked="checked" type="radio" name="canvas_num"
                                                        style="width:5%" value="0.1">
                                                    0.3<input type="radio" name="canvas_num" style="width:5%"
                                                        value="0.3">
                                                    0.5<input type="radio" name="canvas_num" style="width:5%"
                                                        value="0.5">
                                                    1<input type="radio" name="canvas_num" style="width:5%" value="1">
                                                    3<input type="radio" name="canvas_num" style="width:5%" value="3">
                                                    5<input type="radio" name="canvas_num" style="width:5%" value="5">
                                                    10<input type="radio" name="canvas_num" style="width:5%" value="10">

                                                </div>

                                            </div>

                                        </div>

                                        <div
                                            style="width:100%;height:75%; text-align:center;vertical-align: middle;align-items: center; ">
                                            <canvas id="plot_canvas" style="width:727px;height:651px;"></canvas>
                                        </div>
                                        <!-- 绘图的核心js -->
                                        <script type="text/javascript">
                                            // 控件连接


                                            //数据设置
                                            var data_canvas = {
                                                "station_list": ['1', '2', '3', '4', '5', '6', '7', '8', '9', '10', '11', '12'],
                                                "station": [
                                                    [360, 320, 32],
                                                    [330, 370, 15],
                                                    [310, 345, 15],
                                                    [310, 280, 15],
                                                    [390, 200, 15],
                                                    [486, 422, 15],
                                                    [426, 526, 15],
                                                    [513, 257, 15],
                                                    [210, 291, 15],
                                                    [348, 114, 15],
                                                    [523, 179, 15],
                                                    [440, 253, 15],

                                                ]
                                            }
                                            //设置画布
                                            const canvas = document.getElementById("plot_canvas");
                                            const ctx = canvas.getContext('2d');
                                            canvas.width = 727;
                                            canvas.height = 651;
                                            canvas.style.backgroundColor = "white";

                                            ctx.font = "20px Arial";
                                            var myImg = new Image();
                                            myImg.src = 'static/src/taizhou.png';


                                            let ballArr = [];
                                            let colorArr = ['red', "blue", 'green'];

                                            let mouseInCanvas = false;
                                            let offsetX;//通过事件获取鼠标X
                                            let offsetY;//通过事件获取鼠标Y
                                            let r = 150;//球的半径

                                            //小球类
                                            class Ball {
                                                undefined
                                                constructor(x, y, color) {
                                                    undefined
                                                    this.x = x;
                                                    this.y = y;
                                                    this.color = color;
                                                    this.r = r;
                                                }
                                                //绘制小球
                                                render() {
                                                    undefined
                                                    ctx.save();
                                                    ctx.beginPath();
                                                    ctx.arc(this.x, this.y, this.r, 0, Math.PI * 2);
                                                    // ctx.fillText(data_canvas['station'][2].toFixed(2), data_canvas['station'][0], data_canvas['station'][1]);
                                                    for (var i = 0; i < data_canvas.station_list.length; i++) {
                                                        ctx.fillText(data_canvas['station'][i][2].toFixed(1), data_canvas['station'][i][0], data_canvas['station'][i][1]);
                                                    }
                                                    ctx.lineWidth = 3;
                                                    ctx.strokeStyle = "red";
                                                    ctx.stroke();
                                                    // ctx.fillStyle = this.color;
                                                    // ctx.fill();
                                                    ctx.restore();
                                                }
                                            }

                                            //会移动的小球类
                                            class MoveBall extends Ball {
                                                undefined
                                                constructor(x, y, color) {
                                                    undefined
                                                    super(x, y, color);
                                                }

                                                Update() {
                                                    undefined
                                                    this.x += this.dX;
                                                    this.y += this.dY;
                                                    this.r -= this.dR;
                                                    if (this.r < 0) {
                                                        undefined
                                                        this.r = 0;
                                                    }
                                                }
                                            }

                                            //鼠标移动
                                            canvas.addEventListener('mousemove',
                                                function (e) {
                                                    undefined
                                                    mouseInCanvas = true;
                                                    offsetX = e.offsetX;
                                                    offsetY = e.offsetY;

                                                });
                                            // 鼠标点击模块
                                            canvas.addEventListener('click',
                                                function (e) {
                                                    undefined
                                                    mouseInCanvas = true;
                                                    offsetX = e.offsetX;
                                                    offsetY = e.offsetY;
                                                    // console.log(offsetX,offsetY)

                                                    var canvas_select_value = parseFloat($("input[name='canvas_num']:checked").val());
                                                    var canvas_select_method = $("input[name='canvas_var']:checked").val();
                                                    for (var i = 0; i < data_canvas.station_list.length; i++) {

                                                        var len_r = (offsetX - data_canvas['station'][i][0]) * (offsetX - data_canvas['station'][i][0]) + (offsetY - data_canvas['station'][i][1]) * (offsetY - data_canvas['station'][i][1]);
                                                        if (canvas_select_method == '+') {

                                                            if (len_r < r * r) {
                                                                data_canvas['station'][i][2] = data_canvas['station'][i][2] + canvas_select_value
                                                            }
                                                        }
                                                        else {

                                                            if (len_r < r * r) {
                                                                data_canvas['station'][i][2] = data_canvas['station'][i][2] - canvas_select_value
                                                            }
                                                        }
                                                    }





                                                });
                                            // 鼠标滑轮
                                            canvas.addEventListener('mousewheel',
                                                function (e) {
                                                    undefined
                                                    mouseInCanvas = true;

                                                    let z = e.deltaY
                                                    if (r >= 50) {
                                                        r = r + z * 0.1
                                                    }
                                                    else {
                                                        r = 50
                                                    }
                                                    // r = r + z*0.1

                                                    // console.log(z, r)

                                                });
                                            //鼠标出画布
                                            canvas.addEventListener('mouseout',
                                                function (e) {
                                                    undefined
                                                    mouseInCanvas = false;
                                                });
                                            //鼠标进画布
                                            canvas.addEventListener('mouseover',
                                                function (e) {
                                                    undefined
                                                    mouseInCanvas = true;
                                                });

                                            setInterval(function () {
                                                undefined
                                                if (mouseInCanvas) {
                                                    undefined
                                                    //圆圈移动
                                                    ballArr.push(new MoveBall(offsetX, offsetY, colorArr[1]));

                                                }
                                                ctx.clearRect(0, 0, canvas.width, canvas.height);

                                                ctx.drawImage(myImg, 0, 0, 727, 651)

                                                // console.log("我在刷新")
                                                for (let i = 0; i < ballArr.length; i++) {
                                                    undefined
                                                    ballArr[i].render();
                                                    ballArr[i].Update();
                                                }
                                            }, 50);
                                        </script>
                                        <div style="width:100%;height:5%;"></div>

                                        <div style="width:100%;height:5%;  ">
                                            <input type="text" placeholder="起始时间"
                                                style="width:20%;height: 50%;float:left">
                                            <input type="text" placeholder="起始时间"
                                                style="width:20%;height: 50%;float:left">
                                            <input type="button" value="下载" style="width:10%;height: 50%;float:left">
                                            <input type="button" value="绘制" onclick="tool_5()"
                                                style="width:10%;height: 100%;float:right">
                                            <input type="button" value="刷新" style="width:10%;height: 100%;float:right">
                                        </div>
                                    </div>
                                    <!-- 快速绘图的核心代码 -->
                                    <div class="tab-pane" id="panel-canvas02" style="width:100%;height:100%">
                                        <div style="width:100%;height:5%;border: 3px solid black">
                                            城市:<input type="radio" checked="checked" name="taizhou_shp_type"
                                                value="taizhou_city">
                                            县区:<input type="radio" name="taizhou_shp_type" value="taizhou_county">
                                            乡镇:<input type="radio" name="taizhou_shp_type" value="taizhou_village">
                                            <span style="width:10%;height: 100%;text-algin-last:justify  ">
                                                &#12288&#12288&#12288</span>
                                            <input type="text" placeholder="请输入标题" style="width:60%;height:100%">
                                        </div>
                                        <div style="display:inline-block;width:100%;height:80%;border: 3px solid black">
                                            <div
                                                style="display:inline-flex;width:100%;height:100%;border: 3px solid black">
                                                <!-- 颜色 -->
                                                <div
                                                    style="display:inline-block;width:10%;height:100%;border: 3px solid black">
                                                    <div style="width:100%;height:5%;">
                                                        请选择颜色:
                                                    </div>
                                                    <div style="width:100%;height:5%;background-color: rgb(245, 9, 9);">
                                                        <input type="radio" checked="checked" name="selected_color"
                                                            value="rgb(245, 9, 9)" style="width:20%;height:100%;">
                                                    </div>
                                                    <div
                                                        style="width:100%;height:5%;background-color: rgb(112, 27, 35);">
                                                        <input type="radio" name="selected_color"
                                                            value="rgb(112, 27, 35)" style="width:20%;height:100%;">
                                                    </div>
                                                    <div
                                                        style="width:100%;height:5%;background-color: rgb(240, 10, 190);">
                                                        <input type="radio" name="selected_color"
                                                            value="rgb(240, 10, 190)" style="width:20%;height:100%;">
                                                    </div>
                                                    <div
                                                        style="width:100%;height:5%;background-color: rgb(13, 27, 224);">
                                                        <input type="radio" name="selected_color"
                                                            value="rgb(13, 27, 224)" style="width:20%;height:100%;">
                                                    </div>
                                                    <div
                                                        style="width:100%;height:5%;background-color: rgb(64, 137, 179);">
                                                        <input type="radio" name="selected_color"
                                                            value="rgb(64, 137, 179)" style="width:20%;height:100%;">
                                                    </div>
                                                    <div
                                                        style="width:100%;height:5%;background-color: rgb(49, 131, 11);">
                                                        <input type="radio" name="selected_color"
                                                            value="rgb(49, 131, 11)" style="width:20%;height:100%;">
                                                    </div>
                                                    <div
                                                        style="width:100%;height:5%;background-color: rgb(156, 231, 35);">
                                                        <input type="radio" name="selected_color"
                                                            value="rgb(156, 231, 35)" style="width:20%;height:100%;">
                                                    </div>
                                                    <div
                                                        style="width:100%;height:5%;background-color: rgb(245, 240, 243)">
                                                        <input type="radio" name="selected_color"
                                                            value="rgb(245, 240, 243)" style="width:20%;height:100%;">
                                                    </div>
                                                    <div
                                                        style="width:100%;height:5%;background-color: rgb(19, 12, 16);">
                                                        <input type="radio" name="selected_color"
                                                            value="rgb(19, 12, 16)" style="width:20%;height:100%;">
                                                    </div>
                                                    <div style="width:100%;height:5%;background-color: red;">
                                                        <input type="radio" name="selected_color"
                                                            value="rgb(19, 12, 16)" style="width:20%;height:100%;">
                                                    </div>
                                                    <div
                                                        style="width:100%;height:5%;background-color: rgb(31, 27, 27);">
                                                        <input type="radio" name="selected_color"
                                                            value="rgb(19, 12, 16)" style="width:20%;height:100%;">
                                                    </div>
                                                    <div
                                                        style="width:100%;height:5%;background-color: rgb(19, 211, 105);">
                                                        <input type="radio" name="selected_color"
                                                            value="rgb(19, 12, 16)" style="width:20%;height:100%;">
                                                    </div>
                                                    <div
                                                        style="width:100%;height:5%;background-color: rgb(13, 27, 224);">
                                                        <input type="radio" name="selected_color"
                                                            value="rgb(19, 12, 16)" style="width:20%;height:100%;">
                                                    </div>
                                                </div>
                                                <!-- 绘图的主要面板 -->
                                                <canvas id="canvas_quick_plot" style="width:90%;height:100%"></canvas>
                                                <script src='static/js/taizhou_county.js'></script>
                                                <script>
                                                    // 快速绘图的核心代码
                                                    let isDown = false;
                                                    let beginPoint = null;
                                                    let points = [];
                                                    const canvas_quick_plot = document.querySelector('#canvas_quick_plot');
                                                    const ctx_quick_plot = canvas_quick_plot.getContext('2d');
                                                    let canvasW = canvas_quick_plot.width = window.innerWidth * 0.5 * 0.895
                                                    let canvasH = canvas_quick_plot.height = window.innerHeight * 0.95 * 0.73

                                                    let geoCenterX = 0, geoCenterY = 0  // 地图区域的经纬度中心点
                                                    let scale = 1   // 地图缩放系数
                                                    let geoData = []
                                                    let offsetX_qp = 0, offsetY_qp = 0    // 鼠标事件的位置信息
                                                    let eventType = ''  // 事件类型
                                                    let countour_rect = {
                                                        'x': [],
                                                        'y': []

                                                    }
                                                    function down(evt) {
                                                        isDown = true;
                                                        const { x, y } = getPos(evt);
                                                        points.push({ x, y });
                                                        beginPoint = { x, y };
                                                    }

                                                    function move(evt) {
                                                        if (!isDown) return;

                                                        const { x, y } = getPos(evt);
                                                        points.push({ x, y });

                                                        if (points.length > 3) {
                                                            const lastTwoPoints = points.slice(-2);
                                                            const controlPoint = lastTwoPoints[0];
                                                            const endPoint = {
                                                                x: (lastTwoPoints[0].x + lastTwoPoints[1].x) / 2,
                                                                y: (lastTwoPoints[0].y + lastTwoPoints[1].y) / 2,
                                                            }
                                                            drawLine(beginPoint, controlPoint, endPoint);
                                                            beginPoint = endPoint;
                                                        }
                                                    }

                                                    function up(evt) {
                                                        if (!isDown) return;
                                                        const { x, y } = getPos(evt);
                                                        points.push({ x, y });

                                                        if (points.length > 3) {
                                                            const lastTwoPoints = points.slice(-2);
                                                            const controlPoint = lastTwoPoints[0];
                                                            const endPoint = lastTwoPoints[1];
                                                            drawLine(beginPoint, controlPoint, endPoint);
                                                        }
                                                        beginPoint = null;
                                                        isDown = false;
                                                        points = [];
                                                    }

                                                    function getPos(evt) {
                                                        return {
                                                            x: evt.offsetX,
                                                            y: evt.offsetY
                                                            // x: evt.clientX,
                                                            // y: evt.clientY
                                                        }
                                                    }

                                                    function drawLine(beginPoint, controlPoint, endPoint) {
                                                        console.log(beginPoint.x, beginPoint.y)
                                                        countour_rect.x.push(beginPoint.x)
                                                        countour_rect.y.push(beginPoint.y)
                                                        ctx_quick_plot.beginPath();
                                                        ctx_quick_plot.moveTo(beginPoint.x, beginPoint.y);
                                                        // ctx_quick_plot.quadraticCurveTo(controlPoint.x, controlPoint.y, endPoint.x, endPoint.y);
                                                        ctx_quick_plot.lineTo(endPoint.x, endPoint.y);
                                                        ctx_quick_plot.stroke();
                                                        ctx_quick_plot.fill()
                                                        ctx_quick_plot.closePath();
                                                    }


                                                    // 图像的底图
                                                    var maskCanvas = document.createElement('canvas');
                                                    // Ensure same dimensions
                                                    maskCanvas.width = canvas_quick_plot.width;
                                                    maskCanvas.height = canvas_quick_plot.height;
                                                    var maskCtx = maskCanvas.getContext('2d');

                                                    function drawMap() {
                                                        maskCtx.clearRect(0, 0, canvasW, canvasH)
                                                        // 画布背景
                                                        maskCtx.fillStyle = 'white'
                                                        maskCtx.fillRect(0, 0, canvasW, canvasH)
                                                        drawArea()
                                                        // drawText()
                                                    }
                                                    // 绘制地图各子区域
                                                    function drawArea() {
                                                        let dataArr = geoData.features
                                                        let cursorFlag = false
                                                        for (let i = 0; i < dataArr.length; i++) {
                                                            let centerX = canvasW / 2
                                                            let centerY = canvasH / 2
                                                            dataArr[i].geometry.coordinates.forEach(area => {
                                                                maskCtx.save()
                                                                maskCtx.beginPath()
                                                                // maskCtx.strokeStyle = 'black'
                                                                maskCtx.translate(centerX, centerY)
                                                                area[0].forEach((elem, index) => {
                                                                    let position = toScreenPosition(elem[0], elem[1])
                                                                    if (index === 0) {
                                                                        maskCtx.moveTo(position.x, position.y)
                                                                    } else {
                                                                        maskCtx.lineTo(position.x, position.y)
                                                                    }

                                                                })
                                                                maskCtx.closePath()
                                                                maskCtx.strokeStyle = 'black'
                                                                maskCtx.lineWidth = 3
                                                                // 将鼠标悬浮的区域设置为橘黄色
                                                                // if (maskCtx.isPointInPath(offsetX_qp, offsetY_qp)) {
                                                                //     cursorFlag = true
                                                                //     maskCtx.fillStyle = 'white'
                                                                //     if (eventType === 'click') {
                                                                //         console.log(dataArr[i])
                                                                //     }
                                                                // } else {
                                                                //     maskCtx.fillStyle = 'white'
                                                                // }
                                                                maskCtx.fill()
                                                                maskCtx.stroke()
                                                                maskCtx.restore()
                                                            });
                                                            // 动态设置鼠标样式
                                                            // if (cursorFlag) {
                                                            //     canvas.style.cursor = 'pointer'
                                                            // } else {
                                                            //     canvas.style.cursor = 'default'
                                                            // }
                                                        }
                                                    }
                                                    // 将经纬度坐标转换为屏幕坐标
                                                    function toScreenPosition(horizontal, vertical) {
                                                        return {
                                                            x: (horizontal - geoCenterX) * scale,
                                                            y: (geoCenterY - vertical) * scale
                                                        }
                                                    }

                                                    // 获取包围盒范围，计算包围盒中心经纬度坐标，计算地图缩放系数
                                                    function getBoxArea() {
                                                        let N = -90, S = 90, W = 180, E = -180
                                                        geoData.features.forEach(item => {
                                                            // 将MultiPolygon和Polygon格式的地图处理成统一数据格式
                                                            if (item.geometry.type === 'Polygon') {
                                                                item.geometry.coordinates = [item.geometry.coordinates]
                                                            }
                                                            // 取四个方向的极值
                                                            item.geometry.coordinates.forEach(area => {
                                                                let areaN = - 90, areaS = 90, areaW = 180, areaE = -180
                                                                area[0].forEach(elem => {
                                                                    if (elem[0] < W) {
                                                                        W = elem[0]
                                                                    }
                                                                    if (elem[0] > E) {
                                                                        E = elem[0]
                                                                    }
                                                                    if (elem[1] > N) {
                                                                        N = elem[1]
                                                                    }
                                                                    if (elem[1] < S) {
                                                                        S = elem[1]
                                                                    }
                                                                })
                                                            })
                                                        })
                                                        // 计算包围盒的宽高
                                                        let width = Math.abs(E - W)
                                                        let height = Math.abs(N - S)
                                                        let wScale = canvasW / width
                                                        let hScale = canvasH / height
                                                        // 计算地图缩放系数
                                                        scale = wScale > hScale ? hScale : wScale
                                                        scale = scale - 70
                                                        // 获取包围盒中心经纬度坐标
                                                        geoCenterX = (E + W) / 2
                                                        geoCenterY = (N + S) / 2
                                                    }

                                                    // This color is the one of the filled shape
                                                    maskCtx.fillStyle = "black";
                                                    // Fill the mask
                                                    // maskCtx.fillRect(0, 0, maskCanvas.width, maskCanvas.height);
                                                    // Set xor operation
                                                    maskCtx.globalCompositeOperation = 'xor';
                                                    // Draw the shape you want to take out
                                                    geoData = tz_json_county
                                                    getBoxArea()
                                                    drawMap()
                                                    // maskCtx.arc(600, 450, 130, 0, 2 * Math.PI);
                                                    maskCtx.fill();
                                                    ctx_quick_plot.drawImage(maskCanvas, 0, 0);

                                                    // 设置线条颜色
                                                    ctx_quick_plot.strokeStyle = 'black';
                                                    ctx_quick_plot.lineWidth = 2;
                                                    ctx_quick_plot.lineJoin = 'round';
                                                    ctx_quick_plot.lineCap = 'round';
                                                    // var countour_rect_x = []
                                                    // var countour_rect_y = []


                                                    canvas_quick_plot.addEventListener('mousedown', down, false);
                                                    canvas_quick_plot.addEventListener('mousemove', move, false);
                                                    canvas_quick_plot.addEventListener('mouseup', up, false);
                                                    canvas_quick_plot.addEventListener('mouseout', up, false);


                                                    // canvas_quick_plot.addEventListener('click',
                                                    //     function (e) {
                                                    //         undefined
                                                    //         offsetX_qp = e.offsetX;
                                                    //         offsetY_qp = e.offsetY;
                                                    //         var color_style = $("input[name='selected_color']:checked").val()
                                                    //         // var canvas_quick_plot_select_value = parseFloat($("input[name='canvas_quick_plot_num']:checked").val());
                                                    //         console.log(offsetX_qp, offsetY_qp)

                                                    //         ctx_quick_plot.beginPath();

                                                    //         ctx_quick_plot.fillStyle = color_style
                                                    //         ctx_quick_plot.fillRect(offsetX_qp - 5, offsetY_qp - 5, 10, 10);
                                                    //         countour_rect.x.push(offsetX_qp)
                                                    //         countour_rect.y.push(offsetY_qp)
                                                    //         ctx_quick_plot.closePath();


                                                    //     });
                                                    canvas_quick_plot.oncontextmenu = function (event) {
                                                        var event = event || window.event;
                                                        // console.log("右键点击", countour_rect)
                                                        // ctx_quick_plot.strokeStyle = 'rgb(255,255,255,1)'
                                                        // 绘制直线，清空举行框
                                                        var select_plot_type = $("input[name='taizhou_quick_plot_type']:checked").val()
                                                        if (select_plot_type == 'coutour') {
                                                            var len_point = countour_rect.x.length
                                                            for (i = 0; i < len_point; i++) {
                                                                if (i == 0) {
                                                                    ctx_quick_plot.beginPath();
                                                                    ctx_quick_plot.moveTo(countour_rect.x[i], countour_rect.y[i]);
                                                                }
                                                                else if (i != len_point - 1) {
                                                                    ctx_quick_plot.lineTo(countour_rect.x[i], countour_rect.y[i]);

                                                                    // ctx_quick_plot.stroke();

                                                                }
                                                                else {
                                                                    ctx_quick_plot.lineTo(countour_rect.x[i], countour_rect.y[i]);
                                                                    var color_style = $("input[name='selected_color']:checked").val()

                                                                    // 清空矩形点                                                 
                                                                    // for (i = 0; i < len_point; i++) {
                                                                    //     console.log(countour_rect.x.length)
                                                                    //     // ctx_quick_plot.fillStyle = "blue"
                                                                    //     ctx_quick_plot.clearRect(countour_rect.x[i] - 5, countour_rect.y[i] - 5, 10, 10);

                                                                    // }

                                                                    ctx_quick_plot.fillStyle = color_style
                                                                    ctx_quick_plot.fill()
                                                                    ctx_quick_plot.stroke()
                                                                    ctx_quick_plot.closePath();

                                                                    // ctx_quick_plot.fillStyle = "red"
                                                                    countour_rect.x = []
                                                                    countour_rect.y = []

                                                                }



                                                            }
                                                            ctx_quick_plot.drawImage(maskCanvas, 0, 0);
                                                            return false;//屏蔽浏览器自带的右键菜单

                                                        }
                                                        else if (select_plot_type == 'line') {
                                                            console.log('开始绘制曲线')
                                                            countour_rect.x = []
                                                            countour_rect.y = []
                                                            ctx_quick_plot.drawImage(maskCanvas, 0, 0);
                                                            return false;//屏蔽浏览器自带的右键菜单

                                                        }

                                                    };



                                                </script>

                                            </div>
                                        </div>
                                        <!-- 画图方法 -->
                                        <div style="display:inline-block;width:100%;height:3%">
                                            等值线:<input type="radio" checked="checked" name="taizhou_quick_plot_type"
                                                value="coutour">
                                            曲线:<input type="radio" name="taizhou_quick_plot_type" value="line">
                                            图标:<input type="radio" name="taizhou_quick_plot_type" value="scatter_icon">
                                            文字:<input type="radio" name="taizhou_quick_plot_type" value="scatter_text">
                                            图例:<input type="radio" name="taizhou_quick_plot_type" value="scatter_pic">
                                        </div>
                                        <!-- 对应方法的选项 -->
                                        <div id="taizhou_quick_plot_type_view"
                                            style="display:inline-block;width:100%;height:10%;border: 3px solid black">

                                        </div>
                                        <script type="text/javascript">
                                            var taizhou_quick_plot_type = $("input[name='taizhou_quick_plot_type']:checked").val()
                                            // $("input[name='taizhou_quick_plot_type']:checked").click(function () {
                                            //     console.log("dianji")
                                            // }
                                            // )
                                            $(document).ready(function () {
                                                        $('input[type=radio][name=taizhou_quick_plot_type]').change(function () {
                                                            if (this.value == 'contour') {
                                                                console.log("contour");
                                                                
                                                            }
                                                            else if (this.value == 'line') {
                                                                console.log("line");
                                                                
                                                            }
                                                            else if (this.value == 'scatter_icon') {
                                                                console.log("scatter_icon");
                                                                
                                                            }
                                                            else if (this.value == 'scatter_text') {
                                                                console.log("scatter_text");
                                                                
                                                            }
                                                            else if (this.value == 'scatter_pic') {
                                                                console.log("scatter_pic");
                                                                
                                                            }
                                                        });
                                                    });
                                            // if (taizhou_quick_plot_type == 'coutour'){
                                            //     $('#taizhou_quick_plot_type_view').innerText("等值线") 
                                            // }
                                            // else if (taizhou_quick_plot_type == 'line'){
                                            //     $('#taizhou_quick_plot_type_view').innerText("曲线") 
                                            // }
                                            // else if (taizhou_quick_plot_type == 'scatter_icon'){
                                            //     $('#taizhou_quick_plot_type_view').innerText("文本") 
                                            // }
                                            // else if (taizhou_quick_plot_type == 'scatter_pic'){
                                            //     $('#taizhou_quick_plot_type_view').innerText("图例") 
                                            // }


                                        </script>
                                    </div>
                                </div>
                            </div>










                        </div>
                        <div class="tab-pane" id="panel-4"
                            style="width:100%;height:100%;background-color:rgb(8, 116, 167)">
                            <p>
                                帮助
                            </p>
                        </div>
                        <div class="tab-pane" id="panel-5"
                            style="width:100%;height:100%;background-color:rgb(235, 243, 247);overflow: auto ;">
                            <div
                                style="display:flex;flex-wrap: wrap;align-content:flex-start;width:100%;height:100%;justify-content: center;align-items: center;">
                                <a href="http://www.baidu.com" target="_Blank"
                                    style="display:inline-block;width:24.5%;height:25%;border:3px solid black;background-image: url(static/src/二维码.png);font-size: 25px;color:red;text-align:center;line-height: 230px; ">百度</a>
                                <!-- 控制字符在8个汉字之内 -->
                                <a href="http://www.baidu.com" target="_Blank"
                                    style="display:inline-block;width:24.5%;height:25%;border:3px solid black;background-image: url(static/src/二维码.png);font-size: 25px;color:red;text-align:center;line-height: 230px; ">百度</a>
                                <a href="http://www.baidu.com" target="_Blank"
                                    style="display:inline-block;width:24.5%;height:25%;border:3px solid black;background-image: url(static/src/二维码.png);font-size: 25px;color:red;text-align:center;line-height: 230px; ">百度</a>
                                <a href="http://www.baidu.com" target="_Blank"
                                    style="display:inline-block;width:24.5%;height:25%;border:3px solid black;background-image: url(static/src/二维码.png);font-size: 25px;color:red;text-align:center;line-height: 230px; ">百度</a>




                            </div>
                        </div>

                    </div>



                </div>


            </div>




            <!-- 预览界面 -->
            <div
                style="background-color:white; width: 50%; height: 100%;border: 3px solid rgb(58, 128, 0);overflow: hidden;">
                <!-- 产品图片 -->
                <div id="product_view"
                    style="background-color:white; width: 100%; height: 100%;border: 3px solid rgb(58, 128, 0);overflow:auto">
                    <img src="static/src/week.png" style="width:100%"></img>
                    <img src="static/src/week.png" style="width:100%"></img>


                </div>
                <!-- <div style="display: block;width: 100%; height: 0%;border: 3px solid rgb(58, 128, 0)">
                </div> -->


                <!-- 预览图片 -->
                <!-- <img src="src/week.png" style="width:100%"></img>
                <img src="src/week.png" style="width:100%"></img> -->

                <!-- 精细化站点预报服务 -->
                <div id="tool1_view"
                    style="display: inline-block;background-color:white; width: 100%; height: 100%;border: 3px solid rgb(58, 128, 0);overflow:auto">


                    <div id="map_tool1"
                        style=" display: inline-flex;width: 60%; height: 45%;border: 3px solid rgb(58, 128, 0)">

                    </div>
                    <!-- <script>
                        $(function () {
                            console.log("要实现小目标了-1！")
                            var h = window.screen.height * 0.44*0.8
                            var w = document.body.clientWidth * 0.58
                            var map_tool1 = document.getElementById("map_tool1")
                            console.log(h, w)
                            map_tool1.style.width = w
                            map_tool1.style.height = h
                        });

                    </script> -->

                    <script src='static/js/map_tool1.js'></script>
                    <div style=" width: 40%; height: 45%;border: 3px solid rgb(58, 128, 0);float: right;">
                        <div
                            style="width: 100%;height: 12%;text-align:center;vertical-align: middle;align-items: center;">
                            1小时:<input type="radio" name="time_data"
                                style="height: 80%;width: 15%;text-align:center;vertical-align: middle;align-items: center;">
                            3小时:<input type="radio" name="time_data"
                                style="height: 80%;width: 15%;text-align:center;vertical-align: middle;align-items: center;">
                            6小时:<input type="radio" name="time_data"
                                style="height: 80%;width: 15%;text-align:center;vertical-align: middle;align-items: center;">
                        </div>
                        <!-- <div style="width: 100%;height: 8%;text-align:center">
                            <h4 style="display:inline-flex;height: 100%;width: 32%;text-align:center; line-height:30px">ec</h4>   
                            <h4 style="display:inline-flex;height: 100%;width: 32%;text-align:center; line-height:30px">ec</h4>  
                            <h4 style="display:inline-flex;height: 100%;width: 32%;text-align:center; line-height:30px">ec</h4>  
                        </div> -->
                        <div style="width: 100%;height: 88%;overflow: auto;">
                            <input type="button" value="2022年8月30日20时"
                                style="border: 2px solid black;width: 100%;height: 10%;">
                            <input type="button" value="2022年9月1日20时"
                                style="border: 2px solid black;width: 100%;height: 10%;">
                            <input type="button" value="2022年8月2日20时"
                                style="border: 2px solid black;width: 100%;height: 10%;">
                            <input type="button" value="2022年8月3日20时"
                                style="border: 2px solid black;width: 100%;height: 10%;">
                            <input type="button" value="2022年8月4日20时"
                                style="border: 2px solid black;width: 100%;height: 10%;">
                            <input type="button" value="2022年8月5日20时"
                                style="border: 2px solid black;width: 100%;height: 10%;">
                            <input type="button" value="2022年8月6日20时"
                                style="border: 2px solid black;width: 100%;height: 10%;">
                            <input type="button" value="2022年8月7日20时"
                                style="border: 2px solid black;width: 100%;height: 10%;">
                            <input type="button" value="2022年8月8日20时"
                                style="border: 2px solid black;width: 100%;height: 10%;">
                            <input type="button" value="2022年8月9日20时"
                                style="border: 2px solid black;width: 100%;height: 10%;">
                            <input type="button" value="2022年8月10日20时"
                                style="border: 2px solid black;width: 100%;height: 10%;">
                        </div>


                    </div>
                    <div style=" width: 100%; height: 62%;border: 3px solid rgb(58, 128, 0);float: right;">
                        <div class="tabbable" id="tabs-439149" style="width: 100%;height: 100%;">
                            <ul class="nav nav-tabs" style="width: 100%;height: 10%;">
                                <li>
                                    <a href="#panel-727742" data-toggle="tab">数据表格</a>
                                </li>
                                <li class="active">
                                    <a href="#panel-578432" data-toggle="tab">时序图</a>
                                </li>
                            </ul>
                            <div class="tab-content" style="width: 100%;height: 70%;">
                                <div class="tab-pane " id="panel-727742" style="width: 100%;height: 100%;">
                                    <h2>
                                        仙居淡竹乡精细化预报:
                                    </h2>
                                    <table class="table table-bordered table-condensed">
                                        <thead>
                                            <tr>
                                                <th>
                                                    时间
                                                </th>
                                                <th>
                                                    20
                                                </th>
                                                <th>
                                                    21
                                                </th>
                                                <th>
                                                    22
                                                </th>
                                                <th>
                                                    23
                                                </th>
                                                <th>
                                                    00
                                                </th>
                                                <th>
                                                    01
                                                </th>
                                                <th>
                                                    02
                                                </th>
                                                <th>
                                                    03
                                                </th>
                                                <th>
                                                    04
                                                </th>
                                                <th>
                                                    05
                                                </th>
                                                <th>
                                                    06
                                                </th>
                                                <th>
                                                    07
                                                </th>
                                                <th>
                                                    08
                                                </th>
                                                <th>
                                                    09
                                                </th>
                                                <th>
                                                    10
                                                </th>
                                                <th>
                                                    11
                                                </th>
                                                <th>
                                                    12
                                                </th>
                                                <th>
                                                    13
                                                </th>
                                                <th>
                                                    14
                                                </th>
                                                <th>
                                                    15
                                                </th>
                                                <th>
                                                    16
                                                </th>
                                                <th>
                                                    17
                                                </th>
                                                <th>
                                                    18
                                                </th>
                                                <th>
                                                    19
                                                </th>
                                                <th>
                                                    20
                                                </th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            <tr>
                                                <th>
                                                    要素0
                                                </th>
                                                <th>
                                                    20
                                                </th>
                                                <th>
                                                    21
                                                </th>
                                                <th>
                                                    22
                                                </th>
                                                <th>
                                                    23
                                                </th>
                                                <th>
                                                    00
                                                </th>
                                                <th>
                                                    01
                                                </th>
                                                <th>
                                                    02
                                                </th>
                                                <th>
                                                    03
                                                </th>
                                                <th>
                                                    04
                                                </th>
                                                <th>
                                                    05
                                                </th>
                                                <th>
                                                    06
                                                </th>
                                                <th>
                                                    07
                                                </th>
                                                <th>
                                                    08
                                                </th>
                                                <th>
                                                    09
                                                </th>
                                                <th>
                                                    10
                                                </th>
                                                <th>
                                                    11
                                                </th>
                                                <th>
                                                    12
                                                </th>
                                                <th>
                                                    13
                                                </th>
                                                <th>
                                                    14
                                                </th>
                                                <th>
                                                    15
                                                </th>
                                                <th>
                                                    16
                                                </th>
                                                <th>
                                                    17
                                                </th>
                                                <th>
                                                    18
                                                </th>
                                                <th>
                                                    19
                                                </th>
                                                <th>
                                                    20
                                                </th>
                                            </tr>
                                            <tr>
                                                <th>
                                                    要素1
                                                </th>
                                                <th>
                                                    20
                                                </th>
                                                <th>
                                                    21
                                                </th>
                                                <th>
                                                    22
                                                </th>
                                                <th>
                                                    23
                                                </th>
                                                <th>
                                                    00
                                                </th>
                                                <th>
                                                    01
                                                </th>
                                                <th>
                                                    02
                                                </th>
                                                <th>
                                                    03
                                                </th>
                                                <th>
                                                    04
                                                </th>
                                                <th>
                                                    05
                                                </th>
                                                <th>
                                                    06
                                                </th>
                                                <th>
                                                    07
                                                </th>
                                                <th>
                                                    08
                                                </th>
                                                <th>
                                                    09
                                                </th>
                                                <th>
                                                    10
                                                </th>
                                                <th>
                                                    11
                                                </th>
                                                <th>
                                                    12
                                                </th>
                                                <th>
                                                    13
                                                </th>
                                                <th>
                                                    14
                                                </th>
                                                <th>
                                                    15
                                                </th>
                                                <th>
                                                    16
                                                </th>
                                                <th>
                                                    17
                                                </th>
                                                <th>
                                                    18
                                                </th>
                                                <th>
                                                    19
                                                </th>
                                                <th>
                                                    20
                                                </th>
                                            </tr>
                                            <tr>
                                                <th>
                                                    高温
                                                </th>
                                                <th>
                                                    20
                                                </th>
                                                <th>
                                                    21
                                                </th>
                                                <th>
                                                    22
                                                </th>
                                                <th>
                                                    23
                                                </th>
                                                <th>
                                                    00
                                                </th>
                                                <th>
                                                    01
                                                </th>
                                                <th>
                                                    02
                                                </th>
                                                <th>
                                                    03
                                                </th>
                                                <th>
                                                    04
                                                </th>
                                                <th>
                                                    05
                                                </th>
                                                <th>
                                                    06
                                                </th>
                                                <th>
                                                    07
                                                </th>
                                                <th>
                                                    08
                                                </th>
                                                <th>
                                                    09
                                                </th>
                                                <th>
                                                    10
                                                </th>
                                                <th>
                                                    11
                                                </th>
                                                <th>
                                                    12
                                                </th>
                                                <th>
                                                    13
                                                </th>
                                                <th>
                                                    14
                                                </th>
                                                <th>
                                                    15
                                                </th>
                                                <th>
                                                    16
                                                </th>
                                                <th>
                                                    17
                                                </th>
                                                <th>
                                                    18
                                                </th>
                                                <th>
                                                    19
                                                </th>
                                                <th>
                                                    20
                                                </th>
                                            </tr>
                                            <tr>
                                                <th>
                                                    低温
                                                </th>
                                                <th>
                                                    20
                                                </th>
                                                <th>
                                                    21
                                                </th>
                                                <th>
                                                    22
                                                </th>
                                                <th>
                                                    23
                                                </th>
                                                <th>
                                                    00
                                                </th>
                                                <th>
                                                    01
                                                </th>
                                                <th>
                                                    02
                                                </th>
                                                <th>
                                                    03
                                                </th>
                                                <th>
                                                    04
                                                </th>
                                                <th>
                                                    05
                                                </th>
                                                <th>
                                                    06
                                                </th>
                                                <th>
                                                    07
                                                </th>
                                                <th>
                                                    08
                                                </th>
                                                <th>
                                                    09
                                                </th>
                                                <th>
                                                    10
                                                </th>
                                                <th>
                                                    11
                                                </th>
                                                <th>
                                                    12
                                                </th>
                                                <th>
                                                    13
                                                </th>
                                                <th>
                                                    14
                                                </th>
                                                <th>
                                                    15
                                                </th>
                                                <th>
                                                    16
                                                </th>
                                                <th>
                                                    17
                                                </th>
                                                <th>
                                                    18
                                                </th>
                                                <th>
                                                    19
                                                </th>
                                                <th>
                                                    20
                                                </th>
                                            </tr>
                                            <tr>
                                                <th>
                                                    湿度
                                                </th>
                                                <th>
                                                    20
                                                </th>
                                                <th>
                                                    21
                                                </th>
                                                <th>
                                                    22
                                                </th>
                                                <th>
                                                    23
                                                </th>
                                                <th>
                                                    00
                                                </th>
                                                <th>
                                                    01
                                                </th>
                                                <th>
                                                    02
                                                </th>
                                                <th>
                                                    03
                                                </th>
                                                <th>
                                                    04
                                                </th>
                                                <th>
                                                    05
                                                </th>
                                                <th>
                                                    06
                                                </th>
                                                <th>
                                                    07
                                                </th>
                                                <th>
                                                    08
                                                </th>
                                                <th>
                                                    09
                                                </th>
                                                <th>
                                                    10
                                                </th>
                                                <th>
                                                    11
                                                </th>
                                                <th>
                                                    12
                                                </th>
                                                <th>
                                                    13
                                                </th>
                                                <th>
                                                    14
                                                </th>
                                                <th>
                                                    15
                                                </th>
                                                <th>
                                                    16
                                                </th>
                                                <th>
                                                    17
                                                </th>
                                                <th>
                                                    18
                                                </th>
                                                <th>
                                                    19
                                                </th>
                                                <th>
                                                    20
                                                </th>
                                            </tr>
                                            <tr>
                                                <th>
                                                    风向
                                                </th>
                                                <th>
                                                    20
                                                </th>
                                                <th>
                                                    21
                                                </th>
                                                <th>
                                                    22
                                                </th>
                                                <th>
                                                    23
                                                </th>
                                                <th>
                                                    00
                                                </th>
                                                <th>
                                                    01
                                                </th>
                                                <th>
                                                    02
                                                </th>
                                                <th>
                                                    03
                                                </th>
                                                <th>
                                                    04
                                                </th>
                                                <th>
                                                    05
                                                </th>
                                                <th>
                                                    06
                                                </th>
                                                <th>
                                                    07
                                                </th>
                                                <th>
                                                    08
                                                </th>
                                                <th>
                                                    09
                                                </th>
                                                <th>
                                                    10
                                                </th>
                                                <th>
                                                    11
                                                </th>
                                                <th>
                                                    12
                                                </th>
                                                <th>
                                                    13
                                                </th>
                                                <th>
                                                    14
                                                </th>
                                                <th>
                                                    15
                                                </th>
                                                <th>
                                                    16
                                                </th>
                                                <th>
                                                    17
                                                </th>
                                                <th>
                                                    18
                                                </th>
                                                <th>
                                                    19
                                                </th>
                                                <th>
                                                    20
                                                </th>
                                            </tr>
                                            <tr>
                                                <th>
                                                    风速
                                                </th>
                                                <th>
                                                    20
                                                </th>
                                                <th>
                                                    21
                                                </th>
                                                <th>
                                                    22
                                                </th>
                                                <th>
                                                    23
                                                </th>
                                                <th>
                                                    00
                                                </th>
                                                <th>
                                                    01
                                                </th>
                                                <th>
                                                    02
                                                </th>
                                                <th>
                                                    03
                                                </th>
                                                <th>
                                                    04
                                                </th>
                                                <th>
                                                    05
                                                </th>
                                                <th>
                                                    06
                                                </th>
                                                <th>
                                                    07
                                                </th>
                                                <th>
                                                    08
                                                </th>
                                                <th>
                                                    09
                                                </th>
                                                <th>
                                                    10
                                                </th>
                                                <th>
                                                    11
                                                </th>
                                                <th>
                                                    12
                                                </th>
                                                <th>
                                                    13
                                                </th>
                                                <th>
                                                    14
                                                </th>
                                                <th>
                                                    15
                                                </th>
                                                <th>
                                                    16
                                                </th>
                                                <th>
                                                    17
                                                </th>
                                                <th>
                                                    18
                                                </th>
                                                <th>
                                                    19
                                                </th>
                                                <th>
                                                    20
                                                </th>
                                            </tr>
                                            <tr>
                                                <th>
                                                    能见度
                                                </th>
                                                <th>
                                                    20
                                                </th>
                                                <th>
                                                    21
                                                </th>
                                                <th>
                                                    22
                                                </th>
                                                <th>
                                                    23
                                                </th>
                                                <th>
                                                    00
                                                </th>
                                                <th>
                                                    01
                                                </th>
                                                <th>
                                                    02
                                                </th>
                                                <th>
                                                    03
                                                </th>
                                                <th>
                                                    04
                                                </th>
                                                <th>
                                                    05
                                                </th>
                                                <th>
                                                    06
                                                </th>
                                                <th>
                                                    07
                                                </th>
                                                <th>
                                                    08
                                                </th>
                                                <th>
                                                    09
                                                </th>
                                                <th>
                                                    10
                                                </th>
                                                <th>
                                                    11
                                                </th>
                                                <th>
                                                    12
                                                </th>
                                                <th>
                                                    13
                                                </th>
                                                <th>
                                                    14
                                                </th>
                                                <th>
                                                    15
                                                </th>
                                                <th>
                                                    16
                                                </th>
                                                <th>
                                                    17
                                                </th>
                                                <th>
                                                    18
                                                </th>
                                                <th>
                                                    19
                                                </th>
                                                <th>
                                                    20
                                                </th>
                                            </tr>
                                            <tr>
                                                <th>
                                                    云量
                                                </th>
                                                <th>
                                                    20
                                                </th>
                                                <th>
                                                    21
                                                </th>
                                                <th>
                                                    22
                                                </th>
                                                <th>
                                                    23
                                                </th>
                                                <th>
                                                    00
                                                </th>
                                                <th>
                                                    01
                                                </th>
                                                <th>
                                                    02
                                                </th>
                                                <th>
                                                    03
                                                </th>
                                                <th>
                                                    04
                                                </th>
                                                <th>
                                                    05
                                                </th>
                                                <th>
                                                    06
                                                </th>
                                                <th>
                                                    07
                                                </th>
                                                <th>
                                                    08
                                                </th>
                                                <th>
                                                    09
                                                </th>
                                                <th>
                                                    10
                                                </th>
                                                <th>
                                                    11
                                                </th>
                                                <th>
                                                    12
                                                </th>
                                                <th>
                                                    13
                                                </th>
                                                <th>
                                                    14
                                                </th>
                                                <th>
                                                    15
                                                </th>
                                                <th>
                                                    16
                                                </th>
                                                <th>
                                                    17
                                                </th>
                                                <th>
                                                    18
                                                </th>
                                                <th>
                                                    19
                                                </th>
                                                <th>
                                                    20
                                                </th>
                                            </tr>

                                        </tbody>
                                    </table>
                                </div>
                                <div class="tab-pane active" id="panel-578432" style="width: 100%;height: 70%;">
                                    <h3 style="width: 100%;height:5%; ">
                                        仙居淡竹乡精细化时序图：
                                    </h3>
                                    <div id="multiple-y-axis" style="width: 900px;height:400px;">

                                    </div>
                                    <script type="text/javascript"
                                        src="https://cdn.jsdelivr.net/npm/echarts@5.3.1/dist/echarts.min.js"></script>
                                    <script type="text/javascript">
                                        var dom = document.getElementById("multiple-y-axis");
                                        //参数container为图表盒子节点.charts为图表节点  

                                        // function chartssize(container, charts) {
                                        //     function getStyle(el, name) {
                                        //         if (window.getComputedStyle) {
                                        //             return window.getComputedStyle(el, null);
                                        //         } else {
                                        //             return el.currentStyle;
                                        //         }
                                        //     }
                                        //     var wi = getStyle(container, 'width').width;
                                        //     var hi = getStyle(container, 'height').height;
                                        //     charts.style.width = wi
                                        //     charts.style.height = hi
                                        // }
                                        var myChart = echarts.init(dom);
                                        var app = {};

                                        var option;



                                        const colors = ['#5470C6', '#91CC75', '#EE6666', '#1E0026'];
                                        option = {
                                            color: colors,
                                            tooltip: {
                                                trigger: 'axis',
                                                axisPointer: {
                                                    type: 'cross'
                                                }
                                            },
                                            grid: {
                                                left: 60,
                                                right: 50,
                                                height: '65%'
                                            },
                                            toolbox: {
                                                feature: {
                                                    dataView: { show: true, readOnly: false },
                                                    restore: { show: true },
                                                    saveAsImage: { show: true }
                                                }
                                            },
                                            legend: {
                                                data: ['1小时降水', '2米相对湿度', '2米温度', '能见度']
                                            },
                                            xAxis: [
                                                {
                                                    type: 'category',
                                                    axisTick: {
                                                        alignWithLabel: true
                                                    },
                                                    // prettier-ignore
                                                    data: ['23:00', '01:00', '03:00', '05:00', '07:00', '09:00',
                                                        '11:00', '13:00', '15:00', '17:00', '19:00', '21:00']
                                                }
                                            ],
                                            yAxis: [
                                                {
                                                    type: 'value',
                                                    name: '1小时降水',
                                                    position: 'right',
                                                    alignTicks: false,
                                                    axisLabel: {
                                                        formatter: '{value} ml'
                                                    },
                                                    min: 0,
                                                    max: 3,
                                                    show: false
                                                },
                                                {
                                                    type: 'value',
                                                    name: '相对湿度',
                                                    position: 'right',
                                                    alignTicks: false,
                                                    splitLine: {
                                                        show: false
                                                    },
                                                    axisLine: {
                                                        show: true,
                                                        lineStyle: {
                                                            color: '#333333'
                                                        }
                                                    },
                                                    axisLabel: {
                                                        formatter: '{value} %'
                                                    },
                                                    min: 0,
                                                    max: 100
                                                },
                                                {
                                                    type: 'value',
                                                    name: '温度',
                                                    position: 'left',
                                                    alignTicks: false,
                                                    splitLine: {
                                                        lineStyle: {
                                                            color: '#333333'
                                                        }
                                                    },
                                                    axisLine: {
                                                        show: true,
                                                        lineStyle: {
                                                            color: '#333333'
                                                        }
                                                    },
                                                    axisLabel: {
                                                        formatter: '{value} °C'
                                                    },
                                                    min: 0,
                                                    max: 18,
                                                    splitNumber: 6
                                                },
                                                {
                                                    type: 'value',
                                                    name: '能见度',
                                                    position: 'right',
                                                    alignTicks: false,
                                                    // offset: 80,
                                                    axisLine: {
                                                        show: true,
                                                        lineStyle: {
                                                            color: colors[3]
                                                        }
                                                    },
                                                    axisLabel: {
                                                        formatter: '{value}'
                                                    },
                                                    min: 0,
                                                    max: 100,
                                                    show: false
                                                }
                                            ],
                                            series: [
                                                {
                                                    name: '1小时降水',
                                                    type: 'bar',
                                                    data: [0.3, 2, 0.8, 1.2, 0.7, 0.1, 0, 0, 0.2, 0.7, 0.4, 0.1],
                                                    label: {
                                                        show: true,
                                                        position: 'top'
                                                    }
                                                },
                                                {
                                                    name: '2米相对湿度',
                                                    type: 'line',
                                                    yAxisIndex: 1,
                                                    data: [95, 93, 90, 89, 88, 88, 86.9, 86, 85, 84, 83, 82]
                                                },
                                                {
                                                    name: '2米温度',
                                                    type: 'line',
                                                    yAxisIndex: 2,
                                                    data: [18, 15, 16, 17, 15, 18, 17, 17, 16, 16.5, 15, 14]
                                                },
                                                {
                                                    name: '风向',
                                                    type: 'scatter',
                                                    yAxisIndex: 3,
                                                    symbol: 'path://M10 10L60 10 60 20 20 20 20 40 60 40 60 50 20 50 20 100 10 100 10 10z',
                                                    symbolSize: 15,
                                                    symbolRotate: 330,
                                                    data: [30, 70, 80, 80, 50, 20, 20, 20, 50, 80, 60, 50]
                                                    // markLine: {
                                                    //     data: [{ type: 'average', name: 'Avg' }]
                                                    // }
                                                }
                                            ]
                                        };


                                        if (option && typeof option === 'object') {
                                            myChart.setOption(option);
                                        }

                                    </script>

                                </div>
                            </div>
                        </div>

                    </div>







                </div>
                <!-- 图表模式 -->
                <div id="tool2_view"
                    style="display: none;background-color:white; width: 100%; height: 100%;border: 3px solid rgb(58, 128, 0);overflow:auto">
                    <div style="border: 3px solid black ;width: 100%;height: 10%;">
                        <h1>市台订正：</h1>
                    </div>
                    <div style="display: inline-flex;border: 3px solid black ;width: 100%;height: 80%;">
                        <div id="self_png_show"
                            style=" border: 3px solid black ;width: 80%;height: 100%;overflow:auto ;">
                            <img src="static/src/降水.png" style="width:98%;height:100% ;">

                        </div>
                        <!-- <img src="src/降水.png" style="display: inline-block;width:80%;height:99%"> -->
                        <div style="border: 3px solid black ;width: 18%;height: 100%;overflow: auto;">

                            <ul id="ul_self" class="list-group" style="width: 100%;height: 100%">
                                <!-- <li class="list-group-item">2022年8月3日20时</li>
                                <li class="list-group-item">2022年8月3日20时</li>
                                <li class="list-group-item">2022年8月3日20时</li>
                                <li class="list-group-item">2022年8月3日20时</li>
                                <li class="list-group-item">2022年8月3日20时</li>
                                <li class="list-group-item">2022年8月3日20时</li> -->

                            </ul>


                        </div>

                    </div>
                    <div
                        style="border: 3px solid black ;width: 100%;height: 10%;;text-align:center;vertical-align: middle;align-items: center;">
                        <input id="go_on" type="button" value="前进："
                            style="width: 10%;height: 50%;text-align:center;vertical-align: middle;align-items: center;">
                        <input id="go_back" type="button" value="后退："
                            style="width: 10%;height: 50%;text-align:center;vertical-align: middle;align-items: center;">
                        <input type="button" name="tool_2_last" value="导出为gif"
                            style="width: 10%;height: 50%;text-align:center;vertical-align: middle;align-items: center;">

                    </div>
                    <script>
                        $('#go_on').click(function () {
                            var select_length = $("input:radio[name='ul_png']").length
                            var select_item = $("input:radio[name='ul_png']:checked")
                            var select_data = $("input:radio[name='ul_png']:checked").attr("id").toString()
                            var select_id = parseInt(select_data[3]) + 1
                            var select_show_id = "#self_" + select_id.toString()
                            // console.log($('input:radio[name="ul_png"]:checked').attr("id")) 
                            console.log(select_length)
                            if (select_id <= select_length) {
                                // $("#self_png_show").animate({scrollTop:$(select_show_id).offset().top},100);
                                $("#a_" + select_id.toString())[0].click()

                                var next_id = "#in_" + select_id.toString()
                                $("input:radio[name='ul_png']:checked").attr("checked", false)
                                $(next_id).attr("checked", true)
                            }
                            else {
                                alert("到头了")
                            }
                        })
                        $('#go_back').click(function () {
                            // console.log("??")
                            var select_length = $("input:radio[name='ul_png']").length
                            var select_item = $("input:radio[name='ul_png']:checked")
                            var select_data = $("input:radio[name='ul_png']:checked").attr("id").toString()
                            var select_id = parseInt(select_data[3]) - 1
                            var select_show_id = "#self_" + select_id.toString()

                            if (select_id >= 1) {
                                // $("#self_png_show").animate({scrollTop:$(select_show_id).offset().top},100);
                                $("#a_" + select_id.toString())[0].click()

                                var next_id = "#in_" + select_id.toString()
                                $("input:radio[name='ul_png']:checked").attr("checked", false)
                                $(next_id).attr("checked", true)
                            }
                            else {
                                alert("到头了")
                            }

                        })
                    </script>

                </div>
                <!-- 历史数据模式 -->
                <div id="tool3_view"
                    style="display: inline-block;background-color:white; width: 100%; height: 100%;border: 3px solid rgb(58, 128, 0);overflow:auto">
                    <div id="calendar_history" style="width: 100%; height: 30%;border: 3px solid rgb(58, 128, 0);">


                    </div>
                    <script type="text/javascript">
                        var dom = document.getElementById("calendar_history");
                        var myChart = echarts.init(dom);
                        var app = {};

                        var option;



                        const dateList = [

                            ['2022-4-14', '十七', '强降水'],
                            ['2022-4-15', '十八'],
                            ['2022-4-16', '十九'],
                            ['2022-4-17', '二十'],
                            ['2022-4-18', '廿一', '浓雾-小雨'],
                            ['2022-4-19', '廿二', '大风'],
                            ['2022-4-20', '廿三', '小雨'],
                            ['2022-4-21', '廿四'],
                            ['2022-4-22', '廿五'],
                            ['2022-4-23', '廿六'],
                            ['2022-4-24', '廿七'],
                            ['2022-4-25', '廿八', '强降水']


                        ];
                        let heatmapData = [];
                        let lunarData = [];
                        for (let i = 0; i < dateList.length; i++) {
                            heatmapData.push([dateList[i][0], Math.random() * 300]);
                            lunarData.push([dateList[i][0], 1, dateList[i][1], dateList[i][2]]);
                        }
                        option = {
                            title: {
                                text: '历史天况统计',
                                textStyle: { fontSize: 30 },
                            },
                            tooltip: {
                                formatter: function (params) {
                                    return '降雨量: ' + params.value[1].toFixed(2);
                                }
                            },
                            visualMap: {
                                show: false,
                                min: 0,
                                max: 300,
                                calculable: true,
                                seriesIndex: [2],
                                orient: 'horizontal',
                                left: 'center',
                                bottom: 20,
                                inRange: {
                                    color: ['#e0ffff', '#006edd'],
                                    opacity: 0.3
                                },
                                controller: {
                                    inRange: {
                                        opacity: 0.5
                                    }
                                }
                            },
                            calendar: [
                                {
                                    left: 'center',
                                    top: 'middle',
                                    cellSize: [60, 60],
                                    yearLabel: { show: false },
                                    orient: 'vertical',
                                    dayLabel: {
                                        firstDay: 1,
                                        nameMap: 'cn'
                                    },
                                    monthLabel: {
                                        show: false
                                    },
                                    range: ['2022-04-14', '2022-04-25']
                                }
                            ],
                            series: [
                                {
                                    type: 'scatter',
                                    coordinateSystem: 'calendar',
                                    symbolSize: 1,
                                    label: {
                                        show: true,
                                        formatter: function (params) {
                                            var d = echarts.number.parseDate(params.value[0]);
                                            return d.getDate() + '\n\n' + params.value[2] + '\n\n';
                                        },
                                        color: '#000'
                                    },
                                    data: lunarData
                                },
                                {
                                    type: 'scatter',
                                    coordinateSystem: 'calendar',
                                    symbolSize: 1,
                                    label: {
                                        show: true,
                                        formatter: function (params) {
                                            return '\n\n\n' + (params.value[3] || '');
                                        },
                                        fontSize: 14,
                                        fontWeight: 700,
                                        color: '#a00'
                                    },
                                    data: lunarData
                                },
                                {
                                    name: '降雨量',
                                    type: 'heatmap',
                                    coordinateSystem: 'calendar',
                                    data: heatmapData
                                }
                            ]
                        };

                        if (option && typeof option === 'object') {
                            myChart.setOption(option);
                        }

                    </script>
                    <div class="tabbable" id="tabs-492675"
                        style="width: 100%; height: 50%;border: 3px solid rgb(58, 128, 0);">
                        <ul class="nav nav-tabs" style="width: 100%; height: 12%;border: 3px solid rgb(58, 128, 0);">
                            <li class="active">
                                <a href="#panel-883512" data-toggle="tab">降水</a>
                            </li>
                            <li>
                                <a href="#panel-725174" data-toggle="tab">大风</a>
                            </li>
                            <li>
                                <a href="#panel-725173" data-toggle="tab">能见度</a>
                            </li>
                            <li>
                                <a href="#panel-725171" data-toggle="tab">气温</a>
                            </li>
                        </ul>
                        <div class="tab-content"
                            style="display: inline-block;width: 100%; height: 88%;border: 3px solid rgb(58, 128, 0);">
                            <!-- 历史降水 -->
                            <div class="tab-pane active" id="panel-883512"
                                style="width: 100%; height: 100%;border: 3px solid rgb(58, 128, 0);">

                                <div id="map_bar" style="width: 100%; height: 100%;border: 3px solid rgb(58, 128, 0);">


                                </div>
                                <script src='static/js/map_bar.js'></script>


                            </div>
                            <!-- 其他特征 -->
                            <div class="tab-pane" id="panel-725174"
                                style="width: 100%; height: 100%;border: 3px solid rgb(58, 128, 0);">
                                <div style="display: inline-flex;width: 100%; height: 100%;">
                                    <div id="map_wind"
                                        style="display: inline-block;width: 580px; height: 370px;border: 3px solid rgb(58, 128, 0);">

                                    </div>
                                    <script src='static/js/map_wind.js'></script>
                                    <div
                                        style="width: 350px; height:380px;border: 3px solid rgb(128, 73, 0);overflow: auto;">
                                        <table class="table table-hover table-bordered table-condensed">
                                            <thead>
                                                <tr>
                                                    <th>
                                                        排序
                                                    </th>
                                                    <th>
                                                        乡镇
                                                    </th>
                                                    <th>
                                                        站点
                                                    </th>
                                                    <th>
                                                        风力
                                                    </th>
                                                </tr>
                                            </thead>
                                            <tbody>
                                                <tr>
                                                    <td>
                                                        1
                                                    </td>
                                                    <td>
                                                        TB - Monthly
                                                    </td>
                                                    <td>
                                                        01/04/2012
                                                    </td>
                                                    <td>
                                                        Default
                                                    </td>
                                                </tr>
                                                <tr class="success">
                                                    <td>
                                                        1
                                                    </td>
                                                    <td>
                                                        TB - Monthly
                                                    </td>
                                                    <td>
                                                        01/04/2012
                                                    </td>
                                                    <td>
                                                        Approved
                                                    </td>
                                                </tr>
                                                <tr class="error">
                                                    <td>
                                                        2
                                                    </td>
                                                    <td>
                                                        TB - Monthly
                                                    </td>
                                                    <td>
                                                        02/04/2012
                                                    </td>
                                                    <td>
                                                        Declined
                                                    </td>
                                                </tr>
                                                <tr class="warning">
                                                    <td>
                                                        3
                                                    </td>
                                                    <td>
                                                        TB - Monthly
                                                    </td>
                                                    <td>
                                                        03/04/2012
                                                    </td>
                                                    <td>
                                                        Pending
                                                    </td>
                                                </tr>
                                                <tr class="info">
                                                    <td>
                                                        4
                                                    </td>
                                                    <td>
                                                        TB - Monthly
                                                    </td>
                                                    <td>
                                                        04/04/2012
                                                    </td>
                                                    <td>
                                                        Call confirm
                                                    </td>
                                                </tr>
                                                <tr class="info">
                                                    <td>
                                                        4
                                                    </td>
                                                    <td>
                                                        TB - Monthly
                                                    </td>
                                                    <td>
                                                        04/04/2012
                                                    </td>
                                                    <td>
                                                        Call in
                                                    </td>
                                                </tr>
                                                <tr class="info">
                                                    <td>
                                                        4
                                                    </td>
                                                    <td>
                                                        TB - Monthly
                                                    </td>
                                                    <td>
                                                        04/04/2012
                                                    </td>
                                                    <td>
                                                        Call in to
                                                    </td>
                                                </tr>
                                                <tr class="info">
                                                    <td>
                                                        4
                                                    </td>
                                                    <td>
                                                        TB - Monthly
                                                    </td>
                                                    <td>
                                                        04/04/2012
                                                    </td>
                                                    <td>
                                                        Call in to
                                                    </td>
                                                </tr>
                                                <tr class="info">
                                                    <td>
                                                        4
                                                    </td>
                                                    <td>
                                                        TB - Monthly
                                                    </td>
                                                    <td>
                                                        04/04/2012
                                                    </td>
                                                    <td>
                                                        Call in
                                                    </td>
                                                </tr>
                                                <tr class="info">
                                                    <td>
                                                        4
                                                    </td>
                                                    <td>
                                                        TB - Monthly
                                                    </td>
                                                    <td>
                                                        04/04/2012
                                                    </td>
                                                    <td>
                                                        Call in
                                                    </td>
                                                </tr>
                                                <tr class="info">
                                                    <td>
                                                        4
                                                    </td>
                                                    <td>
                                                        TB - Monthly
                                                    </td>
                                                    <td>
                                                        04/04/2012
                                                    </td>
                                                    <td>
                                                        Call in
                                                    </td>
                                                </tr>
                                                <tr class="info">
                                                    <td>
                                                        4
                                                    </td>
                                                    <td>
                                                        TB -
                                                    </td>
                                                    <td>
                                                        04/04/2012
                                                    </td>
                                                    <td>
                                                        Call in
                                                    </td>
                                                </tr>
                                            </tbody>
                                        </table>

                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>



                    <!-- 历史数据统计 -->
                    <div style="width: 100%; height: 20%;border: 3px solid rgb(58, 128, 0);">
                        <blockquote>
                            <p>
                                风雨情统计
                            </p> <small>昨天08时到今天，全是降水80毫米，本次较强降雨过程已结束，截止26日08时，全市出现大雨，部分地区暴雨，累计面雨量46.2毫米，各县（市、区）如下：玉环55.6毫米、三门53.8毫米、天台51.1毫米、临海49.5毫米、椒江45.8毫米、黄岩44.0毫米、温岭43.0毫米、路桥36.7毫米、仙居34.5毫米；共有58个乡镇面雨量超50毫米，单站最大天台石梁镇龙皇堂91.5毫米；沿海海面和海拔较高山区出现最大10级偏南大风，风力较大的有临海田岙岛27.9m／s（10级）、椒江上大陈26.9m／s（10级）、临海括苍山25.6m／s（10级）。预计今天阴天，傍晚到夜里部分地区有阵雨，沿海海面北到东北风6－7级阵风8级，夜里减弱到5－6级阵风7级。
                                <cite>面雨量最大的城市主要集中在台州的中北部</cite></small>
                        </blockquote>

                    </div>

                </div>
                <!-- web -->
                <!-- <div id = "tool4_view"
                    style="background-color:white; width: 100%; height: 100%;border: 3px solid rgb(58, 128, 0);overflow:auto">
                    <iframe id="mainIframe" name="mainIframe" src="http://www.baidu.com" frameborder="0" scrolling="auto" ></iframe>

                </div> -->
                <!-- canvas_view -->
                <div id="tool5_view"
                    style="display: inline-block;background-color:white; width: 100%; height: 100%;border: 3px solid rgb(58, 128, 0);overflow:auto">
                    <!-- 这里是canvas的结果 -->
                    <div id="canvas_plot_div"
                        style="width:100%;height:70%;border: 3px solid rgb(58, 128, 0);overflow:auto">
                        <!-- <img id = "canvas_plot" src=" " style="width:100%;height:100%;">
                        <img src="static/src/降水.png" style="width:100%;height:100%;"> -->

                    </div>

                    <div
                        style="display: inline-flex;width:100%;height:30%;border: 3px solid rgb(58, 128, 0);overflow:auto">
                        <div id="canvas_bar"
                            style="width:60%;height:100%;border: 3px solid rgb(58, 128, 0);overflow:auto">

                        </div>
                        <script>
                            var chartDom = document.getElementById('canvas_bar');
                            var myChart = echarts.init(chartDom);
                            var option;

                            option = {
                                tooltip: {
                                    trigger: 'axis',
                                    axisPointer: {
                                        type: 'cross'
                                    }
                                },
                                toolbox: {
                                    feature: {
                                        dataView: { show: true, readOnly: false },
                                        restore: { show: true },
                                        saveAsImage: { show: true }
                                    }
                                },
                                xAxis: {
                                    type: 'category',
                                    data: ['仙居', '玉环', '三门', '临海', '椒江', '临海', '黄岩']
                                },
                                yAxis: {
                                    type: 'value'
                                },
                                series: [
                                    {
                                        data: [120, 200, 150, 80, 70, 110, 130],
                                        type: 'bar'
                                    }
                                ]
                            };

                            option && myChart.setOption(option);

                        </script>
                        <div style="width:40%;height:100%;border: 3px solid rgb(58, 128, 0);overflow:auto">

                            <table class="table table-bordered">
                                <caption>乡镇排行</caption>
                                <thead>
                                    <tr>
                                        <th>排名</th>
                                        <th>名称</th>
                                        <th>降水</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr>
                                        <td>1</td>
                                        <td>坎门</td>
                                        <td>30mm</td>
                                    </tr>
                                    <tr>
                                        <td>2</td>
                                        <td>淡竹</td>
                                        <td>15mm</td>
                                    </tr>
                                    <tr>
                                        <td>3</td>
                                        <td>Pune</td>
                                        <td>1mm</td>
                                    </tr>
                                    <tr>
                                        <td>3</td>
                                        <td>Pune</td>
                                        <td>1mm</td>
                                    </tr>

                                </tbody>
                            </table>


                        </div>



                    </div>



                </div>


            </div>

        </div>
        {% csrf_token %}
    </div>


</body>

</html>