<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script src="https://cdn.staticfile.org/jquery/3.2.1/jquery.min.js"></script>
    <script src="https://cdn.staticfile.org/popper.js/1.15.0/umd/popper.min.js"></script>
    <link rel="stylesheet" href="https://cdn.staticfile.org/twitter-bootstrap/3.3.7/css/bootstrap.min.css">
    <script src="https://cdn.staticfile.org/twitter-bootstrap/3.3.7/js/bootstrap.min.js"></script>
    <!-- <script type="text/javascript" src="static/js/dataTool.min.js"></script> -->
    <link rel="stylesheet" type="text/css" href="static/css/jquery.datetimepicker.css" />
    <script src="static/js/jquery.datetimepicker.full.min.js"></script>
    <title>决策材料操作平台</title>
</head>

<body>
    <div class="container-fiuled" style="padding-right: 30px; padding-left: 30px;">
        <div class="row clearfix">
            <div class="col-md-12 column">
                <ul class="nav nav-pills">
                    <li class="active">
                        <a href="#">一周天气预测</a>
                    </li>
                    <li>
                        <a href="#">气象信息快报</a>
                    </li>
                    <li>
                        <a href="#">重要气象报告</a>
                    </li>
                </ul>
            </div>
        </div>
        <div class="row clearfix">
            <div class="col-md-6 column" style=" height:900px; overflow:auto">
                <div class="row clearfix" style="border: 3px solid green;">
                    <div class="col-md-12 column">
                        <!-- 这里是文件头 -->
                        <div class="row clearfix">
                            <div class="col-md-12 column">
                                <h5 style=" left: 30px;float: left">标题：</h5><input
                                    style=" left: 30px;float: left;width:70%">
                            </div>
                        </div>
                        <div class="row clearfix">
                            <div class="col-md-6 column">
                                <h5 style=" left: 30px;float: left">期数：</h5><input style=" left: 30px;float: left">
                            </div>
                            <div class="col-md-6 column">
                                <input style=" right:30px;float: right">
                                <h5 style=" left: 30px;float: right">撰稿人：</h5>
                            </div>
                        </div>
                        <div class="row clearfix">
                            <div class="col-md-4 column">
                                <h5 style=" left: 30px;float: left">日期:</h5>
                                <input id="datetimepicker1" type="text" style=" left: 30px;float: left">
                                <script>
                                    $('#datetimepicker1').datetimepicker(
                                        {
                                            theme: 'dark',
                                            format: 'Y-m-d H:i'
                                        }
                                    );
                                </script>
                            </div>
                            <div class="col-md-4 column">
                                <h5 style=" left: 30px;float: left">单位：</h5><input style=" left: 30px;float: left">

                            </div>
                            <div class="col-md-4 column">
                                <input style=" right: 30px;float: right">
                                <h5 style=" right: 30px;float: right">签发人：</h5>

                            </div>
                        </div>

                    </div>
                </div>







                <!-- 这里是文件内容部分 -->
                <div class="row clearfix" style="border: 3px solid green;width:104%; height: 70%;">
                    <div class="col-md-12 column">
                        <!-- 文件选项部分 -->
                        <div class="container">
                            <div class="row clearfix">
                                <div class="col-md-12 column">
                                    <div class="tabbable" id="tabs-567898">
                                        <ul class="nav nav-tabs">
                                            <li class="active">
                                                <a href="#panel-00001" data-toggle="tab">文字段落</a>
                                            </li>
                                            <li>
                                                <a href="#panel-00002" data-toggle="tab">图片布局</a>

                                            </li>
                                            <li>
                                                <a href="#panel-00003" data-toggle="tab">列表数据</a>
                                            </li>
                                        </ul>
                                        <div class="tab-content" style="width:100%; height: 500%;margin: 0 auto；">
                                            <div class="tab-pane active" id="panel-00001"
                                                style="width:100%; height: 500%;margin: 0 auto">
                                                <div class="col-md-12 column">
                                                    <h5 style=" left: 30px;float: left">标题</h5><input type="text" id="title_text"
                                                        style="width:350px;hwight:100px;float: left">

                                                    <select class="form-control" id="wordposition"
                                                        style="width:100px;height:10;float: left">
                                                        <option value="居中">居中</option>
                                                        <option value="居左">居左</option>
                                                        <option value="居右">居右</option>
                                                    </select>
                                                    <select class="form-control" id="wordsize"
                                                        style="width:100px;height:10;float: left">
                                                        <option value="五号">五号</option>
                                                        <option value="一号">一号</option>
                                                        <option value="四号">四号</option>
                                                    </select>
                                                    <select class="form-control" id="wordthinks"
                                                        style="width:100px;height:10;float: left">
                                                        <option value="加粗">加粗</option>
                                                        <option value="原版">原版</option>

                                                    </select>
                                                </div>
                                                <!-- 文字部分 -->
                                                <div class="col-md-12 column">
                                                    <textarea rows="5" cols="100" id = "text"></textarea>
                                                    </textarea>
                                                </div>
                                                <!-- 添加删除 -->
                                                <div >
                                                    <input type="button" id="add_text" value="添加"
                                                        style="width:50px;height:25px;">
                                                    <input type="button" id="del_text" value="删除"
                                                        style="width:50px;height:25px;">
                                                </div>

                                            </div>
                                            <div class="tab-pane" id="panel-00002"
                                                style="width:100%; height: 500%;margin: 0 auto">
                                                
                                                <!-- 这里是图片布局的核心 -->
                                                <div class="container">
                                                    <div class="row clearfix">
                                                        <div class="col-md-12 column">
                                                            <div class="tabbable" id="tabs-753279">
                                                                <ul class="nav nav-tabs">
                                                                    <li class="active">
                                                                        <a href="#panel-1001" data-toggle="tab">单图</a>
                                                                    </li>
                                                                    <li>
                                                                        <a href="#panel-1002" data-toggle="tab">双图</a>
                                                                    </li>
                                                                    <li>
                                                                        <a href="#panel-1003" data-toggle="tab">四图</a>
                                                                    </li>
                                                                </ul>
                                                                <div class="tab-content">
                                                                    <div class="tab-pane active" id="panel-1001">
                                                                        <p>
                                                                            这里是单图模式
                                                                        </p>
                                                                        <div class="col-md-12 column">
                                                                            <div>
                                                                                <input name="pic_file"
                                                                                    onchange="picViewImagesLook(this,6)"
                                                                                    type="file" />
                                                                            </div>
                                                                            <div>
                                                                                标题:<input type="text">
                                                                            </div>
                                                                            <div id="look_view6">
                                                                                <img src="" alt="" height="200"
                                                                                    width="200" style="display:none;" />
                                                                            </div>
                                                                        </div>
                                                                    </div>
                                                                    <div class="tab-pane" id="panel-1002">
                                                                        <p>
                                                                            这里是多图模式.
                                                                        </p>
                                                                        <table class="table-bordered">
                                                                            <thead>
                                                                                <tr>
                                                                                    <th>图片</th>
                                                                                    <th>图片</th>

                                                                                </tr>
                                                                            </thead>
                                                                            <tbody>
                                                                                <tr>

                                                                                    <td>
                                                                                        <div class="col-md-12 column">
                                                                                            <div>
                                                                                                <input name="pic_file"
                                                                                                    onchange="picViewImagesLook(this,21)"
                                                                                                    type="file" />
                                                                                            </div>
                                                                                            <div>
                                                                                                标题:<input type="text">
                                                                                            </div>
                                                                                            <div id="look_view21">
                                                                                                <img src="" alt=""
                                                                                                    height="200"
                                                                                                    width="200"
                                                                                                    style="display:none;" />
                                                                                            </div>
                                                                                        </div>

                                                                                    </td>
                                                                                    <td>
                                                                                        <div class="col-md-12 column">
                                                                                            <div>
                                                                                                <input name="pic_file"
                                                                                                    onchange="picViewImagesLook(this,22)"
                                                                                                    type="file" />
                                                                                            </div>
                                                                                            <div>
                                                                                                标题:<input type="text">
                                                                                            </div>
                                                                                            <div id="look_view22">
                                                                                                <img src="" alt=""
                                                                                                    height="200"
                                                                                                    width="200"
                                                                                                    style="display:none;" />
                                                                                            </div>
                                                                                        </div>

                                                                                    </td>

                                                                                </tr>

                                                                            </tbody>
                                                                        </table>

                                                                    </div>
                                                                    <div class="tab-pane" id="panel-1003">
                                                                        <p>
                                                                            这里是四图模式
                                                                        </p>
                                                                        <table class="table-bordered">
                                                                            <thead>
                                                                                <tr>
                                                                                    <th>
                                                                                        图片
                                                                                    </th>
                                                                                    <th>
                                                                                        图片
                                                                                    </th>
                                                                                </tr>
                                                                            </thead>
                                                                            <tbody>
                                                                                <tr>
                                                                                    <td>
                                                                                        <div style="float: right">
                                                                                            <input name="pic_file"
                                                                                                onchange="picViewImagesLook(this,11)"
                                                                                                type="file" />
                                                                                        </div>
                                                                                        <div>
                                                                                            标题:<input type="text">
                                                                                        </div>
                                                                                        <div id="look_view11">
                                                                                            <img src="" alt=""
                                                                                                height="200" width="200"
                                                                                                style="display:none;" />
                                                                                        </div>
                                                                                    </td>
                                                                                    <td>
                                                                                        <div style="float: right">
                                                                                            <input name="pic_file"
                                                                                                onchange="picViewImagesLook(this,12)"
                                                                                                type="file" />
                                                                                        </div>
                                                                                        <div>
                                                                                            标题:<input type="text">
                                                                                        </div>
                                                                                        <div id="look_view12">
                                                                                            <img src="" alt=""
                                                                                                height="200" width="200"
                                                                                                style="display:none;" />
                                                                                        </div>
                                                                                    </td>
                                                                                </tr>
                                                                                <tr>
                                                                                    <td>
                                                                                        <div style="float: right">
                                                                                            <input name="pic_file"
                                                                                                onchange="picViewImagesLook(this,13)"
                                                                                                type="file" />
                                                                                        </div>
                                                                                        <div>
                                                                                            标题:<input type="text">
                                                                                        </div>
                                                                                        <div id="look_view13">
                                                                                            <img src="" alt=""
                                                                                                height="200" width="200"
                                                                                                style="display:none;" />
                                                                                        </div>
                                                                                    </td>
                                                                                    <td>
                                                                                        <div style="float: right">
                                                                                            <input name="pic_file"
                                                                                                onchange="picViewImagesLook(this,14)"
                                                                                                type="file" />
                                                                                        </div>
                                                                                        <div>
                                                                                            标题:<input type="text">
                                                                                        </div>
                                                                                        <div id="look_view14">
                                                                                            <img src="" alt=""
                                                                                                height="200" width="200"
                                                                                                style="display:none;" />
                                                                                        </div>
                                                                                    </td>
                                                                                </tr>
                                                                            </tbody>
                                                                        </table>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                                <!-- 上传图片的核心代码 -->
                                                <script type="text/javascript">
                                                    //图片预览功能  divViewIdNum 图片的id号
                                                    function picViewImagesLook(file, divViewIdNum) {
                                                        var viewMaxW = 200;
                                                        var viewMaxH = 200;
                                                        var div = document.getElementById('look_view' + divViewIdNum);
                                                        if (file.files && file.files[0]) {
                                                            div.innerHTML = '<img id=look_img_tag_id' + divViewIdNum + '>';
                                                            var img = document.getElementById('look_img_tag_id' + divViewIdNum + '');
                                                            img.onload = function () {
                                                                var rect = picViewZoom(viewMaxW, viewMaxH, img.offsetWidth, img.offsetHeight);
                                                                img.width = rect.width;
                                                                img.height = rect.height;
                                                                //img.style.marginLeft = rect.left+'px';
                                                                img.style.marginTop = rect.top + 'px';
                                                            }
                                                            var reader = new FileReader();
                                                            reader.onload = function (evt) { img.src = evt.target.result; }
                                                            reader.readAsDataURL(file.files[0]);
                                                        }
                                                        else {
                                                            var sFilter = 'filter:progid:DXImageTransform.Microsoft.AlphaImageLoader(sizingMethod=scale,src="';
                                                            file.select();
                                                            var src = document.selection.createRange().text;
                                                            div.innerHTML = '<img id=look_img_tag_id' + divViewIdNum + '>';
                                                            var img = document.getElementById('imghead2');
                                                            img.filters.item('DXImageTransform.Microsoft.AlphaImageLoader').src = src;
                                                            var rect = picViewZoom(viewMaxW, viewMaxH, img.offsetWidth, img.offsetHeight);
                                                            status = ('rect:' + rect.top + ',' + rect.left + ',' + rect.width + ',' + rect.height);
                                                            div.innerHTML = "<div id=look_div_tag_id" + divViewIdNum + " style='width:" + rect.width + "px;height:" + rect.height + "px;margin-top:" + rect.top + "px;" + sFilter + src + "\"'></div>";
                                                        }
                                                    }
                                                    function picViewZoom(maxWidth, maxHeight, width, height) {
                                                        var param = { top: 0, left: 0, width: width, height: height };
                                                        if (width > maxWidth || height > maxHeight) {
                                                            rateWidth = width / maxWidth;
                                                            rateHeight = height / maxHeight;

                                                            if (rateWidth > rateHeight) {
                                                                param.width = maxWidth;
                                                                param.height = Math.round(height / rateWidth);
                                                            } else {
                                                                param.width = Math.round(width / rateHeight);
                                                                param.height = maxHeight;
                                                            }
                                                        }
                                                        param.left = Math.round((maxWidth - param.width) / 2);
                                                        param.top = Math.round((maxHeight - param.height) / 2);
                                                        return param;
                                                    }
                                                </script>
                                                <div >
                                                    <input type="button" id="add_png" value="添加"
                                                        style="width:50px;height:25px;">
                                                    <input type="button" id="del_png" value="删除"
                                                        style="width:50px;height:25px;">
                                                </div>



                                            </div>
                                            <div class="tab-pane" id="panel-00003"
                                                style="width:100%; height: 500%;margin: 0 auto">
                                               
                                                <div>
                                                    <table class="table-bordered">
                                                        <thead>
                                                            <tr>
                                                                <th><input type="text"></input></th>
                                                                <th><input type="text"></input></th>
                                                                <th><input type="text"></input></th>
                                                            </tr>
                                                        </thead>
                                                        <tbody>

                                                            <tr>
                                                                <td>
                                                                    <input type="text"></input>
                                                                </td>
                                                                <td>
                                                                    <input type="text"></input>
                                                                </td>
                                                                <td>
                                                                    <input type="text"></input>
                                                                </td>
                                                            </tr>
                                                            <tr>
                                                                <td>
                                                                    <input type="text"></input>
                                                                </td>
                                                                <td>
                                                                    <input type="text"></input>
                                                                </td>
                                                                <td>
                                                                    <input type="text"></input>
                                                                </td>
                                                            </tr>
                                                        </tbody>
                                                    </table>
                                                </div>
                                                <div >
                                                    <input type="button" id="add_table" value="添加"
                                                        style="width:50px;height:25px;">
                                                    <input type="button" id="del_table" value="删除"
                                                        style="width:50px;height:25px;">
                                                </div>

                                            </div>
                                        </div>
                                        <script>
                                            // 按钮
                                            var add_Btn_text = document.getElementById('add_text');
                                            var del_Btn_text = document.getElementById('del_text');

                                            var add_Btn_png = document.getElementById('add_png');
                                            var del_Btn_png = document.getElementById('del_png');

                                            var add_Btn_table = document.getElementById('add_table');
                                            var del_Btn_table = document.getElementById('del_table');
                                            var list_div = [];
                                            var list_data = [];
                                            // var data_post = {
                                            //     "type:":

                                            // }
                                            var id_div = 0
                                            html_all = ""

                                            // 按钮事件
                                            add_Btn_text.onclick = function () {
                                                if (id_div >= 0){
                                                    id_div = id_div + 1

                                                }
                                                // id_div = id_div + 1
                                                var html = document.getElementById('panel-00001');
                                                var text = document.getElementById('text').value;
                                                var title = document.getElementById('title_text').value;
                                                var font_pos = document.getElementById('wordposition').value;
                                                var font_size = document.getElementById('wordsize').value;
                                                var font_thins = document.getElementById('wordthinks').value;
                                                
                                                var data_add = {
                                                    "type":"text",
                                                    "id":id_div,
                                                    "title":title,
                                                    "fontsize":[font_pos,font_size,font_thins], 
                                                    "content":text
                                                }
                                                list_div.push(html)
                                                list_data.push(data_add)
                                                // console.log(data_add.type,'666')
                                                // console.log(list_div)
                                                
                                                show(data_add)

                                            };

                                            del_Btn_text.onclick = function () {
                                                if (id_div >0){
                                                    id_div = id_div - 1
                                                }
                                                list_div.pop();
                                                // console.log(list_div)
                                                data_add = {
                                                    "type":"del"                                                }

                                                show(data_add)
                                            };

                                            add_Btn_png.onclick = function () {
                                                id_div = id_div + 1
                                                var html = document.getElementById('panel-00002');
                                                var data_png ={

                                                };

                                                list_div.push(html)
                                                // console.log(list_div)
                                                console.log(html)
                                                show()

                                            };

                                            del_Btn_png.onclick = function () {
                                                list_div.pop();
                                                console.log(list_div)
                                                show()
                                            };
                                            add_Btn_table.onclick = function () {
                                                id_div = id_div + 1
                                                var html = document.getElementById('panel-00003');

                                                list_div.push(html)
                                                // console.log(list_div)
                                                console.log(html)
                                                show()

                                            };

                                            del_Btn_table.onclick = function () {
                                                list_div.pop();
                                                console.log(list_div)
                                                show()
                                            };






                                            function show(data_add) {
                                                var  type = data_add.type   
                                                                                    
                                                // if (type =='text'){
                                                //     console.log("检测到数据")
                                                //     console.log(data_add.title)
                                                    

                                                // }
                                                // console.log(data.type)
                                                $('#view').html('')
                                                for (var i = 0; i < list_div.length; i++) {
                                                    console.log("执行show函数")
                                                    var a_button = document.createElement("a")
                                                    a_button.id = "modal-"+ i.toString()
                                                    a_button.href = "#modal-container-"+i.toString()
                                                    a_button.text = "添加"
                                                    a_button.setAttribute("data-toggle","modal")
                                                    a_button.setAttribute("role","button")
                                                    a_button.setAttribute("class","btn")
                                                    

                                                    var div_modal = document.createElement("div")
                                                    div_modal.setAttribute("class","modal fade")
                                                    div_modal.setAttribute("role","dialog")
                                                    div_modal.id = "modal-container-"+ i.toString()
                                                    div_modal.setAttribute("role","dialog")
                                                    div_modal.setAttribute("aria-labelledby","myModalLabel")
                                                    div_modal.setAttribute("aria-hidden","true")
                                                

                                                    
                                                    var div_dialog = document.createElement("div")
                                                    div_dialog.setAttribute("class","modal-dialog") 
                                                    div_modal.appendChild(div_dialog)

                                                    var div_content = document.createElement("div")
                                                    div_content.setAttribute("class","modal-content") 
                                                    div_dialog.appendChild(div_content)

                                                    var div_head = document.createElement("div")
                                                    div_head.setAttribute("class","modal-header")
                                                
                                                    var button_head = document.createElement("button")
                                                    button_head.setAttribute("data-dismiss","modal")
                                                    button_head.setAttribute("aria-hidden","true")
                                                    button_head.setAttribute("class","close")
                                                    button_head.setAttribute("type","button")

                                                    var title_h4 = document.createElement("h4")
                                                    title_h4.setAttribute("class","modal-title")
                                                    // title_h4.setAttribute("id","myModalLabel")
                                                    title_h4.innerText = "标题"
                                                    div_head.appendChild(button_head)
                                                    div_head.appendChild(title_h4)
                                                    
                                                    // body
                                                    var div_body = document.createElement("div")
                                                    div_body.setAttribute("class", "modal-body")
                                                    // div_body.class = "modal-body"
                                                    // div_body.value = "内容"
                                                    div_body.innerText = "内容" + "我是内容" + i.toString()

                                                    // foot
                                                    var div_foot = document.createElement("div")
                                                    div_foot.setAttribute("class","modal-footer")
                                                    // div_foot.calss = "modal-footer"

                                                    var button_foot_close = document.createElement("button")
                                                    button_foot_close.setAttribute("type","button")
                                                    button_foot_close.setAttribute("class","btn btn-default")
                                                    button_foot_close.setAttribute("data-dismiss","modal")
                                                    // button_foot_close.value = "关闭"
                                                    button_foot_close.innerText = "关闭"

                                                    var button_foot_save = document.createElement("button")
                                                    button_foot_save.setAttribute("type","button")
                                                    button_foot_save.setAttribute("class","btn btn-primary")
                                                    button_foot_save.innerText = "保存"
                                                    // button_foot_save.type = "button"
                                                    // button_foot_save.class = "btn btn-primary"
                                                    
                                                    div_foot.appendChild(button_foot_close)
                                                    div_foot.appendChild(button_foot_save)



                                                    div_content.appendChild(div_head)
                                                    div_content.appendChild(div_body)
                                                    div_content.appendChild(div_foot)

                                                    var div_all = document.createElement("div")
                                                    div_all.setAttribute("class","col-md-12 column")
                                                    div_all.appendChild(a_button)
                                                    div_all.appendChild(div_modal)




                                                    






                                                    $('#view').append(div_all)



                                                    



                                                }
                                            };

                                            


                                        </script>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-12 column" id = "view" style="border: 3px solid green;width:104; height: 60%;display:flex;flex-direction: column;">

                    </div>

                    <!-- 遮罩窗体 -->


                </div>




                <!-- 这里是文件的末尾 -->
                <div class="row clearfix"
                    style="position: absolute; bottom: 0px; display: block;border: 3px solid green;width:100%;">
                    <div class="col-md-12 column">
                        <!-- 这里是文件尾部 -->
                        <input type="radio" name="sex" checked="checked"><span>是</span>
                        <input type="radio" name="sex"><span>否</span>
                    </div>
                    <div class="col-md-12 column">
                        <input style="width:100%">

                    </div>
                    <div class="col-md-12 column">
                        <button style="width:50px;height:25px; right: 30px;float: right" text="预览">

                    </div>
                </div>
            </div>




            <!-- 这里是文件展示区域 -->
            <div class="col-md-6 column" style=" height:800px; overflow:auto">
                <iframe src="/home" style="width: 100%;height: 100%;"></iframe>
                
                <!-- <img src="static/img/week.png" style="width:80%"></img>
                <img src="static/img/week.png" style="width:80%"></img> -->
            </div>
        </div>
    </div>

</body>

</html>